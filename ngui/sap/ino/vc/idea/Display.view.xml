<mvc:View
    controllerName="sap.ino.vc.idea.Display"
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form"
	xmlns:uxap="sap.uxap"
	xmlns:ino="sap.ino.controls"
	xmlns:blocks="sap.ino.vc.idea"
	xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
	<Page id="ideaDisplay" 
    	  height="inherit"
          app:aofSmartControl="true"
	      app:aofModel="object"
          app:aofObject="sap.ino.xs.object.idea.Idea">
          <customHeader>
                <OverflowToolbar id="ideaPageToolbar">
                    <VBox class="ideaPageVbox">
                        <OverflowToolbar id="pageIndicatorPanel">
                            <ToolbarSpacer/>
                			<Button id="previousIdeaBtn" icon="sap-icon://arrow-down" press="onPressPrevious" class="sapInoPreIdeaBtn" enabled="{path:'view>/PAGE_INDICATOR',formatter:'.formatter.formatPressPreviousButton'}" />
  			                <Label id="pageIndicatorLabel" text="{view>/PAGE_INDICATOR}" />
                			<Label text="{i18n>IDEA_OF_PAGER}" />
                			<Label id="pageSizeLabel" text="{view>/PAGE_SIZE}" />
                			<Button id="nextIdeaBtn" icon="sap-icon://arrow-down" press="onPressNext" class="sapInoNextIdeaBtn"  enabled ="{parts:['view>/PAGE_INDICATOR','view>/PAGE_SIZE'],formatter:'.formatter.formatPressNextButton'}"/>
                		    <ToolbarSpacer/>
                        </OverflowToolbar>
                        <ino:ColorBar id="ideaPageColorBar" backgroundColor="{path: 'object>CAMPAIGN_COLOR', formatter: '.formatter.color'}">
                            <core:Fragment fragmentName="sap.ino.vc.commons.fragments.NavBackButton" type="XML" />
            				<ToolbarSpacer/>
            				<Link text="{object>CAMPAIGN_NAME}" press="onCampaignPressed" href="{path: 'object>CAMPAIGN_ID', formatter: '.formatter.campaignNavigationLink'}"/>
            				<ToolbarSpacer/>
            				<core:Fragment fragmentName="sap.ino.vc.commons.fragments.FullScreenButton" type="XML"/>
                        </ino:ColorBar>
                    </VBox>
                </OverflowToolbar>
		  </customHeader>
		<content>
			<uxap:ObjectPageLayout  id="objectpage"  useIconTabBar="true"  enableLazyLoading="true"  class="sapInoIdeaLayout" 
                navigate="onTabSelect" visible="{view>/objectExists}" alwaysShowContentHeader="true">
				<uxap:headerTitle>	
				    <uxap:ObjectPageHeader 
	                    id="ideaLayoutPageHeader"
                        objectImageURI="{=${object>IS_OPEN_FOR_CONTRIBUTORS} === 1 ? 'sap-icon://InoIcons/shake_hands' : ''}"
                        objectImageAlt="{i18n>IDEA_OPEN_CONTRIBUTION}"
                        objectTitle="{object>NAME}"
                        objectSubtitle="{parts: ['i18n>IDEA_OBJECT_TIT_IDEA_ID', 'object>ID', 'i18n>IDEA_OBJECT_TIT_IDEA_RESP_VALUE_NAME', 'object>RESP_VALUE_NAME', 'i18n>FLD_BY', 'object>SUBMITTER_NAME', 'object>CREATED_BY_NAME', 'object>SUBMITTED_AT', 'object>CREATED_AT', 'view>/DISABLE_IDEA_IMAGE'], formatter:'.formatter.ideaDisplaySubtitle'}"                    
                        isObjectIconAlwaysVisible="{=${object>IS_OPEN_FOR_CONTRIBUTORS} === 1 ? true : false}"
                        isObjectTitleAlwaysVisible="true"
                        isObjectSubtitleAlwaysVisible="true"
                        isActionAreaAlwaysVisible="true"
                        class="sapInoIdeaHeaderContainer">
                		<uxap:actions>
        					<core:Fragment fragmentName="sap.ino.vc.idea.fragments.DisplayHeadTitle" type="XML"/>
        					<core:Fragment fragmentName="sap.ino.vc.idea.fragments.DisplayHeadTitleWithoutImg" type="XML"/>
                    	</uxap:actions>
                    </uxap:ObjectPageHeader>
	            </uxap:headerTitle>
				<uxap:headerContent class="sapUiNoMargin">
					<core:Fragment  fragmentName="sap.ino.vc.idea.fragments.DisplayHeadContent" type="XML"/>
					<core:Fragment  fragmentName="sap.ino.vc.idea.fragments.DisplayHeadContentWithoutImg" type="XML"/>
					<core:Fragment  fragmentName="sap.ino.vc.idea.fragments.DisplayHeadContentWithoutImgHidenPhaseBar" type="XML"/>
				</uxap:headerContent>
				<uxap:sections>
					<uxap:ObjectPageSection id="sectionDetails" title="{i18n>MENU_MIT_DETAILS}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection title="{i18n>MENU_MIT_DETAILS}">
								<uxap:blocks>
									<core:Fragment fragmentName="sap.ino.vc.idea.fragments.DisplayDetails" type="XML"/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionAttachments" title="{i18n>MENU_MIT_ATTACHMENTS}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection 
                                title="{parts: ['object>ATTACHMENT_COUNT', 
                                              'i18n>MENU_MIT_ATTACHMENTS'], 
                                        formatter:'.formatter.sectionTitle'}">
								<uxap:blocks>
									<blocks:AttachmentBlock app:editable="false"/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionIntegration" title="{i18n>MENU_MIT_INTEGRATION}"
					    visible="{= ${object>IS_INTEGRATION_ACTIVE} === 1 &amp;&amp; ${object>/property/nodes/Root/customProperties/backofficeCampaignPrivilege}}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection title="{i18n>MENU_MIT_INTEGRATION}">
								<uxap:blocks>
									<blocks:IntegrationBlock/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionWalls" title="{i18n>IDEA_OBJECT_TIT_WALLS}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection 
                                title="{parts: ['object>WALL_COUNT', 
                                              'i18n>IDEA_OBJECT_TIT_WALLS'], 
                                        formatter:'.formatter.sectionTitle'}">
								<uxap:blocks>
									<blocks:WallListBlock app:editable="false" />
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionComments" title="{i18n>MENU_MIT_COMMENTS}">
						<uxap:subSections >
							<uxap:ObjectPageSubSection 
                                title="{parts: ['object>COMMENT_COUNT', 
                                              'i18n>MENU_MIT_COMMENTS'], 
                                        formatter:'.formatter.sectionTitle'}">
								<uxap:blocks>
									<blocks:CommentRichBlock app:modelObjectType="sap.ino.commons.models.object.IdeaComment" />
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionVotes" title="{i18n>MENU_MIT_VOTES}" 
                        visible="{parts: ['object>PUBLISH_VOTE', 
                                          'object>PUBLIC_VOTE',
                                          'object>VOTE_COMMENT_TYPE',
                                          'object>/property/nodes/Root/customProperties/backofficeCampaignPrivilege'], 
                        formatter:'.formatter.voteTabVisibility'}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection 
                                title="{parts: ['object>VOTE_COUNT', 
                                              'i18n>MENU_MIT_VOTES'], 
                                        formatter:'.formatter.sectionTitle'}">
								<uxap:blocks>
									<blocks:VotesBlock />
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionRelated" title="{i18n>MENU_MIT_RELATED_IDEAS}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection title="{i18n>MENU_MIT_RELATED_IDEAS}">
								<uxap:blocks>
									<blocks:RelatedIdeasBlock/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionExperts" title="{i18n>IDEA_OBJECT_TIT_STAKEHOLDERS}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection title="{i18n>IDEA_OBJECT_TIT_STAKEHOLDERS}">
								<uxap:blocks>
									<blocks:ExpertsBlock/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionEvaluations" title="{i18n>MENU_MIT_EVALUATIONS}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection 
                                title="{parts: ['i18n>MENU_MIT_EVALUATIONS']}">
								<uxap:blocks>
									<blocks:EvaluationsBlock/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionVolunteers" title="{i18n>MENU_MIT_VOLUNTEERS}" visible="{= ${object>/property/nodes/Root/customProperties/backofficeIdeaModifyPrivilege}}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection title="{i18n>MENU_MIT_VOLUNTEERS}">
								<uxap:blocks>
									<blocks:VolunteersBlock/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionRewards" title="{i18n>MENU_MIT_REWARDS}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection title="{i18n>MENU_MIT_REWARDS}">
								<uxap:blocks>
									<blocks:RewardsBlock/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionInternal" 
					    title="{parts: ['object>INTERNAL_NOTE_COUNT', 'object>INTERNAL_ATTACHMENT_COUNT','i18n>MENU_MIT_INTERNAL'], formatter:'.formatter.sectionInternalTitle'}" visible="{= ${object>STATUS_CODE} !== 'sap.ino.config.DRAFT' &amp;&amp; ${object>/property/nodes/Root/customProperties/backofficeCampaignPrivilege} }" showTitle="false">
						<uxap:subSections>
							<uxap:ObjectPageSubSection>
								<uxap:blocks>
									<blocks:InternalSectionBlock  app:modelObjectType="sap.ino.commons.models.object.InternalNote" columnLayout="auto"/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionActivities" title="{i18n>MENU_MIT_ACTIVITIES}">
						<uxap:subSections>
							<uxap:ObjectPageSubSection title="{i18n>MENU_MIT_ACTIVITIES}">
								<uxap:blocks>
									<blocks:ActivitiesBlock/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
					<uxap:ObjectPageSection id="sectionPPM" title="{i18n>MENU_MIT_PORTFOLIO}" 
                    visible="{= ${object>/property/nodes/Root/customProperties/backofficeCampaignPrivilege} &amp;&amp; ${config>/sap.ino.config.PPM_INTEGRATION_ACTIVE}==='1'}" showTitle="false">
						<uxap:subSections>
							<uxap:ObjectPageSubSection title="{i18n>MENU_MIT_PORTFOLIO}">
								<uxap:blocks>
									<blocks:PPMBlock/>
								</uxap:blocks>
							</uxap:ObjectPageSubSection>
						</uxap:subSections>
					</uxap:ObjectPageSection>
				</uxap:sections>
			</uxap:ObjectPageLayout>
			<core:Fragment fragmentName="sap.ino.vc.commons.fragments.GeneralObjectNotExists" type="XML"/>
		</content>
		<footer>
			<OverflowToolbar visible="{view>/objectExists}">
				<core:Fragment fragmentName="sap.ino.vc.commons.fragments.MessageLog"
                               type="XML"/>
				<ToolbarSpacer/>
				<Button visible="{object>property/actions/del/enabled}" type="Reject" id="deleteBtn" text="{i18n>BTN_DEL}" press="onDelete"/>
				<Button text="{i18n>IDEA_OBJECT_BTN_ASSIGN_GENERAL}"
                        press="onAssignGeneral"/>
				<Button visible="{object>/property/actions/executeStatusTransition/enabled}"
                        text="{i18n>IDEA_OBJECT_BUT_CHANGE_STATUS}"
                        press="onChangeStatus"/>
                <Button visible="{object>/property/nodes/Root/customProperties/backofficeChangeAuthorPrivilege}" 
                        text="{i18n>IDEA_OBJECT_BUT_CHANGE_AUTHOR}" 
                        press="onChangeAuthor"
                        enabled="{= ${object>/SUBMITTER_ID} !== 0}"/>
				<Button text="{i18n>IDEA_OBJECT_BTN_FOLLOW_UP}"
                        press="onFollowUpMixinFollowUp"
                        id="followUpButton"
                        visible="{object>/property/nodes/Root/customProperties/backofficeCampaignPrivilege}"/>
				<!-- <Button text="{i18n>IDEA_OBJECT_BTN_MERGE}"
                        press="onIdeaMerge"
                        id="mergeButton"
                        visible="{ parts: [{path: 'object>/property/actions/mergeIdeas/enabled'}, {path: 'clipboard>/enabled'}], formatter: '.formatIdeasInClipboardAndParam' }"/> -->
                <Button text="{i18n>IDEA_OBJECT_BTN_MERGE}"
                        press="handleMassMerge"
                        id="mergeButton"
                        visible="{ parts: [{path: 'object>/property/actions/mergeIdeas/enabled'}, {path: 'clipboard>/enabled'}], formatter: '.formatIdeasInClipboardAndParam' }"/>
				<Button visible="{= ${object>/property/actions/update/enabled} || ${object>/property/actions/del/enabled} || ${object>/property/actions/changeDecision/enabled}}"
                        id="generalEditButton"
                        text="{i18n>BTN_EDIT}"
                        press="onGeneralEdit"/>                        
				<Button text="{i18n>IDEA_OBJECT_BTN_CREATE}" 
                        press="onCreate"/>
				<Button text="{i18n>IDEA_OBJECT_BTN_COPY_IDEA}" 
				        enabled="{object>/property/actions/copy/enabled}"
				        visible="{object>/property/actions/copy/enabled}"
                        press="onCopyIdea"/>
				<Button text="{i18n>IDEA_OBJECT_BTN_CONTACT}"
                        press="onContactPeople"/>
			</OverflowToolbar>
		</footer>
			<customData>
			<core:CustomData 
                key="style-detail-comment-class"  
                value="{path:'object>SHOW_COMMENT_VIEWER',formatter:'.formatter.setIdeaDetailCommentsTab'}" 
                writeToDom="true"/>
            <!--core:CustomData 
                key="style-detail-create-class"  
                value="{parts:[{path:'object>SHOW_CREATED_VIEWER'},{path:'view>/DISABLE_IDEA_IMAGE'}],formatter:'.formatter.setIdeaDetailCreateIcon'}" 
                writeToDom="true"/-->
		   </customData>  		
	</Page>
</mvc:View>
