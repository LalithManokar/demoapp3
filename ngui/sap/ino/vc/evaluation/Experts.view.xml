<mvc:View
    controllerName="sap.ino.vc.idea.Experts"
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form"
	xmlns:ino="sap.ino.controls"
	xmlns:data="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
    <VBox>
	    <Label text="{i18n>EXPERT_FINDER_TIT_EXPERT}" required="true"/>
	    <l:Grid>
    	    <MultiInput
                id="suggestUserForDialog"
                startSuggestion="1"
                showSuggestion="true"
                filterSuggests="false"
                showValueHelp="false"
                enableMultiLineMode="false"
                suggest="onSuggestIdeaExpert"
                suggestionItemSelected="onAddInputExpertForDialog"
                tokens="{object>/Experts}">
                <tokens>
                    <Token key="{object>IDENTITY_ID}" text="{object>NAME}" delete="onTokenDelete"/>
                </tokens>
                <layoutData>
					<l:GridData span="XL8 L8 M12 S12" />
				</layoutData>
            </MultiInput>
            <Button text="{i18n>BTN_ADD_FROM_CLIPBOARD}" 
                press="onAddFromClipboard" 
                visible="{=!${device>/system/phone}}" 
                enabled="{ parts: [{path: 'clipboard>/changed'}], formatter: '.formatHasUsersInClipboard' }">
                <layoutData>
					<l:GridData span="XL4 L4 M12 S12" />
				</layoutData>
            </Button>
        </l:Grid>
        <OverflowToolbar width="100%" class="sapInoIdeaExpertToolbar">
			<Title text="{i18n>EXPERTS_TIT_IDEA_EXPERTS}"/>
		</OverflowToolbar>
        <l:Grid id="ideaExpertsForDialog" content="{object>/IdeaExpertsForDialog}"
            hSpacing="0.5" vSpacing="0.5" position="Left" defaultSpan="XL6 L6 M12 S12">
			<ino:IdentityActionCard 
			    id="ideaExpertForDialog"
                identityId="{object>IDENTITY_ID}" 
                userName="{object>NAME}"
                userOrganization="{object>ORGANIZATION}"
                userRole="{ path: 'object>ROLE_CODE', formatter: '.formatter.roleCode' }"
                userImageUrl="{ path: 'object>IMAGE_ID', formatter: '.formatter.userImage' }"
                actionable="{= ${object>IDENTITY_ID} !== -1}"
                pinnable="{clipboard>/enabled}"
                isPinned="{ parts: [{path: 'object>IDENTITY_ID'}, {path: 'clipboard>/changed'}], formatter: '.formatIsUserInClipboard' }"
                pinPressed="onUserPinPressed"
                isAdd="{parts : [{path: 'object>IDENTITY_ID'}, {path: 'object>/Experts'}], formatter: '.isExpertAddedForDialog'}"
                mailable="{path: 'object>IS_VALID_EMAIL', type:'sap.ino.commons.models.types.IntBooleanType'}"
                mailPressed="onMailPressed"
                addRemovePressed="onAddRemoveExpertForDialog"
                identityPress="onOpenIdentityQuickView"
            />
		</l:Grid>
		<OverflowToolbar width="100%" class="sapInoIdeaExpertToolbar">
			<Title text="{i18n>EXPERTS_TIT_CAMPAIGN_EXPERTS}"/>
		</OverflowToolbar>
		<l:Grid content="{object>/CampExpertsForDialog}"
            hSpacing="0.5" vSpacing="0.5" position="Left" defaultSpan="XL6 L6 M12 S12">
			<ino:IdentityActionCard 
                identityId="{object>IDENTITY_ID}" 
                userName="{object>NAME}"
                userOrganization="{object>ORGANIZATION}"
                userRole="{ path: 'object>ROLE_CODE', formatter: '.formatter.roleCode' }"
                userImageUrl="{ path: 'object>IMAGE_ID', formatter: '.formatter.userImage' }"
                actionable="{= ${object>IDENTITY_ID} !== -1}"
                pinnable="{clipboard>/enabled}"
                isPinned="{ parts: [{path: 'object>IDENTITY_ID'}, {path: 'clipboard>/changed'}], formatter: '.formatIsUserInClipboard' }"
                pinPressed="onUserPinPressed"
                isAdd="{parts : [{path: 'object>IDENTITY_ID'}, {path: 'object>/Experts'}], formatter: '.isExpertAddedForDialog'}"
                mailable="{path: 'object>IS_VALID_EMAIL', type:'sap.ino.commons.models.types.IntBooleanType'}"
                mailPressed="onMailPressed"
                addRemovePressed="onAddRemoveExpertForDialog"
                identityPress="onOpenIdentityQuickView"
            />
		</l:Grid>
		<VBox width="100%" visible="{= !!${object>/RESP_VALUE_CODE} }">
    		<OverflowToolbar width="100%" class="sapInoIdeaExpertToolbar">
    			<Title text="{parts: [{path:'i18n>EXPERTS_TIT_RESPONSIBILITY_EXPERTS'}, {path:'object>/RESP_NAME'}], formatter: '.respExpertsFormatter'}"/>
    		</OverflowToolbar>
    		<l:Grid content="{object>/RespExpertsForDialog}"
                hSpacing="0.5" vSpacing="0.5" position="Left" defaultSpan="XL6 L6 M12 S12">
    			<ino:IdentityActionCard 
                    identityId="{object>IDENTITY_ID}" 
                    userName="{object>NAME}"
                    userOrganization="{object>ORGANIZATION}"
                    userRole="{ path: 'object>ROLE_CODE', formatter: '.formatter.roleCode' }"
                    userImageUrl="{ path: 'object>IMAGE_ID', formatter: '.formatter.userImage' }"
                    actionable="{= ${object>IDENTITY_ID} !== -1}"
                    pinnable="{clipboard>/enabled}"
                    isPinned="{ parts: [{path: 'object>IDENTITY_ID'}, {path: 'clipboard>/changed'}], formatter: '.formatIsUserInClipboard' }"
                    pinPressed="onUserPinPressed"
                    isAdd="{parts : [{path: 'object>IDENTITY_ID'}, {path: 'object>/Experts'}], formatter: '.isExpertAddedForDialog'}"
                    mailable="{path: 'object>IS_VALID_EMAIL', type:'sap.ino.commons.models.types.IntBooleanType'}"
                    mailPressed="onMailPressed"
                    addRemovePressed="onAddRemoveExpertForDialog"
                    identityPress="onOpenIdentityQuickView"
                />
    		</l:Grid>
    	</VBox>
	</VBox>
	
	<VBox width="100%">
		<OverflowToolbar width="100%"
            class="sapInoIdeaExpertToolbar">
			<Title text="{i18n>EXPERTS_TIT_PROPOSED_EXPERTS}"/>
		</OverflowToolbar>
		<List id="expertList" items="{proposedExperts>/}"
            noDataText="{i18n>EXPERTS_LBL_NO_EXPERTS_FOUND}">
			<CustomListItem>
				<core:Fragment fragmentName="sap.ino.vc.expertfinder.fragments.ExpertDetails" type="XML"/>
			</CustomListItem>
		</List>
	</VBox>
</mvc:View>