/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
sap.ui.define(["sap/m/QuickViewPage","sap/m/Toolbar","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/ui/core/Icon","sap/m/Title","sap/m/Button","sap/m/Image",'sap/ui/layout/VerticalLayout','sap/ui/layout/HorizontalLayout','sap/m/HBox','sap/m/VBox','sap/ui/layout/form/SimpleForm','sap/ui/layout/library','sap/ui/layout/form/ResponsiveGridLayout','sap/ui/core/Title','sap/m/Label','sap/m/Text',"sap/m/ProgressIndicator","sap/ui/layout/GridData","sap/ui/layout/Grid","sap/ui/core/LayoutData"],function(Q,T,O,a,I,b,B,c,V,H,d,e,S,l,R,C,L,f,P,G,g,h){"use strict";var i=l.form.SimpleFormLayout;return Q.extend("sap.ino.controls.QuickViewPageEnhance",{metadata:{properties:{headerToolBarIcon:{type:"string",group:"Misc",defaultValue:""},headerToolBarText:{type:"string",group:"Misc",defaultValue:""},visibleLeaderBoard:{type:"boolean",defaultValue:false},visibleDimension:{type:"boolean",defaultValue:false}},aggregations:{horizontalBox:{type:"sap.m.HBox"},dimensionGroups:{type:"sap.ino.controls.QuickViewGroupDimension",multiple:true}},events:{navigate:{}}},init:function(){Q.prototype.init.apply(this,arguments);this._oRB=sap.ui.getCore().getLibraryResourceBundle("sap.ino.controls");},_createPage:function(){var t=this;var p=Q.prototype._createPage.apply(this,arguments);if(!this.getVisibleLeaderBoard()){return p;}var o=new c({src:this.getHeaderToolBarIcon()});var j=new b({text:this.getHeaderToolBarText()});var k=new B({icon:"sap-icon://navigation-right-arrow",tooltip:this._oRB.getText("CTRL_GAMIFICATION_NAVIGATION_TO_LEADER_BOARD"),press:function(){t._onNavigateTo();}});o.addStyleClass("sapInoQuickViewPageHeaderImage");j.addStyleClass("sapInoQuickViewPageHeaderText");k.addStyleClass("sapInoQuickViewPageHeaderButton");var m=new T();m.addContent(o);m.addContent(j);m.addContent(new a());m.addContent(k);m.addStyleClass("sapInoQuickViewPageHeaderToolBar");p.setSubHeader(m);p.addStyleClass("sapInoQuickViewPageEnhanceHeader");if(this._mPageContent.header){p.insertContent(this._mPageContent.dimensionForm,1);}else{p.insertContent(this._mPageContent.dimensionForm,0);}return p;},_onNavigateTo:function(){this.fireNavigate();},_createPageContent:function(){var p=Q.prototype._createPageContent.apply(this,arguments);if(!this.getVisibleDimension()){return this._mPageContent;}var D=this._createDimensionForm();this._mPageContent.dimensionForm=D;this._mPageContent=p;return this._mPageContent;},_createDimensionForm:function(){var D=this.getAggregation("dimensionGroups");var o=new g({width:"100%",defaultSpan:"XL12 L12 M12 S12"});if(D){for(var j=0;j<D.length;j++){if(D[j].getVisible()){this._renderDimensionGroup(D[j],o);}}}o.addStyleClass("sapInoDimensionGrid");return o;},_renderDimensionGroup:function(o,j){var v=new e({width:"100%",layoutData:new G({span:"XL12 L12 M12 S12"})});v.addStyleClass("sapInoDimensionVBox");var r=o.getRedeemEnabled();if(o.getHeading()){var t=new L({text:o.getHeading(),tooltip:o.getHeading()});t.addStyleClass("sapInoDimensionTitle");var k=new c({src:o.getHeadingIcon()});if(o.getHeadingIcon()){k.addStyleClass("sapInoDimensionImage");}var m=new d({items:[k,t]});m.addStyleClass("sapInoDimensionHBoxLine sapInoDimensionHBoxHeader");v.addItem(m);}if(!o.getShowOnlyDimension()){var s=this._oRB.getText('CTRL_GAMIFICATION_DIMENSION_TOTAL_POINTS',[o.getDimensionUnit()]);var n=new L({text:s,tooltip:s});var p=new L({text:o.getTotalPoints()});var q=new L({text:":"});var u=new d({items:[n,q,p]});n.addStyleClass("sapInoDimensionLblDesc");p.addStyleClass("sapInoDimensionSmallMarginleft sapInoDimensionNumberText");if(r){var w=this._oRB.getText('CTRL_GAMIFICATION_DIMENSION_TOTAL_REDEEM_POINTS',[o.getDimensionUnit()]);var x=new L({text:w,tooltip:w});var y=new L({text:o.getRedeemPoints()});var z=new L({text:":"});x.addStyleClass("sapInoDimensionSmallMarginleft sapInoDimensionLblReedemDesc");y.addStyleClass("sapInoDimensionSmallMarginleft sapInoDimensionNumberText");u.addItem(x);u.addItem(z);u.addItem(y);}u.addStyleClass("sapInoDimensionHBoxLine sapInoDimensionHBoxTotalPoints");v.addItem(u);if(!r){if(o.getNextLevel()){var A=this._oRB.getText('CTRL_GAMIFICATION_DIMENSION_NEED');var D=this._oRB.getText('CTRL_GAMIFICATION_DIMENSION_TO_NEXT_LEVEL',[o.getDimensionUnit()]);var E=new L({text:A,tooltip:A+o.getPointsToNextLevel()+" "+D});var F=new L({text:o.getPointsToNextLevel(),tooltip:A+o.getPointsToNextLevel()+" "+D});var J=new L({text:D,tooltip:A+o.getPointsToNextLevel()+" "+D});F.addStyleClass("sapInoDimensionSmallMarginleft sapInoDimensionNeedPointsText");J.addStyleClass("sapInoDimensionSmallMarginleft sapInoDimensionLblLevelDesc");var K=new d({items:[E,F,J]});K.addStyleClass("sapInoDimensionHBoxLine");v.addItem(K);}var M;var N=o.getDiffPointsToNextLevel();var U=o.getCurrentPointsBWBadge();if(N>0&&N>U){M=parseInt((U/N*100).toFixed(),10);}else{M=0;}if(!o.getNextLevel()){M=100;}if(o.getStartLevel()||o.getNextLevel()){var W=new P({percentValue:M,state:"Warning"});W.addStyleClass("sapInoDimensionProgressIndicator");v.addItem(W);var X=new L({text:o.getStartLevel()});var Y=new L({text:o.getNextLevel()});var Z=new d({items:[X,Y]});Z.addStyleClass("sapInoDimensionHBoxLine sapInoDimensionHBoxLevel");v.addItem(Z);}}}j.addContent(v);}});});
