/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
sap.ui.define(["sap/ui/core/Control","sap/ino/controls/util/ColorSupport","sap/m/Button","sap/m/ButtonType","sap/m/Label","sap/m/Link","sap/m/Text","sap/ui/core/HTML","sap/ui/core/TextAlign","sap/ui/core/Icon","sap/ino/controls/VoteType","sap/base/security/sanitizeHTML"],function(C,a,B,b,L,c,T,H,d,I,V,s){"use strict";var e=C.extend("sap.ino.controls.IdeaCard",{metadata:{properties:{"ideaCreatedAt":{type:"string"},"ideaDescription":{type:"string"},"ideaHref":{type:"sap.ui.core.URI"},"ideaId":{type:"int"},"ideaName":{type:"string"},"ideaSubmittedAt":{type:"string"},"ideaSubmitter":{type:"string"},"ideaSubmitterId":{type:"int"},"ideaSubmitterHref":{type:"sap.ui.core.URI"},"isDraft":{type:"boolean"},"isOpenForContributors":{type:"boolean"},"color":{type:"sap.ui.core.CSSColor"},"campaignId":{type:"int"},"campaignHref":{type:"sap.ui.core.URI"},"campaignName":{type:"string"}},aggregations:{"commentDisplayPlaceholder":{type:"sap.ui.core.Control",multiple:false},"processDisplayPlaceholder":{type:"sap.ui.core.Control",multiple:false},"viewDisplayPlaceholder":{type:"sap.ui.core.Control",multiple:false},"anonymousDisplayPlaceholder":{type:"sap.ui.core.Control",multiple:false},"voteDisplayPlaceholder":{type:"sap.ui.core.Control",multiple:false},"votePlaceholder":{type:"sap.ui.core.Control",multiple:false},"followButton":{type:"sap.ui.core.Control",multiple:false},"image":{type:"sap.m.Image",multiple:false},"_campaignLink":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_campaignLinkBack":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_draftLabel":{type:"sap.m.Label",multiple:false,visibility:"hidden"},"_ideaDescription":{type:"sap.ui.core.HTML",multiple:false,visibility:"hidden"},"_ideaLink":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_ideaLinkBack":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_ideaMoreLink":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_ideaSubmitter":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_flipButton":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_commentButton":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_flipButtonBack":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"contributorButton":{type:"sap.ui.core.Control",multiple:false},"_noticeStatusIcon":{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},"_noticeCommentIcon":{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},"_noticeUpdateIcon":{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},"_noticeCreateIcon":{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},"_IdeaReadButton":{type:"sap.m.Button",multiple:false,visibility:"hidden"}},events:{openIdea:{},openSubmitter:{},press:{},openCampaign:{},openIdeaComment:{},readIdea:{}}},init:function(){this._oRB=sap.ui.getCore().getLibraryResourceBundle("sap.ino.controls");this.isFront=true;},_getCampaignLink:function(A){var t=this;var f="_campaignLink";if(A){f+=A;}var o=this.getAggregation(f);var g=this.getProperty("campaignName");if(!o){o=new c({id:this.getId()+f,href:this.getProperty("campaignHref"),press:function(E){E.preventDefault();t.fireOpenCampaign({campaignId:t.getProperty("campaignId")});},text:g}).addStyleClass("sapInoIdeaCardAccessibilityCampaignLink");this.setAggregation(f,o,true);}return o;},_getIdeaLink:function(A){var t=this;var f="_ideaLink";if(A){f+=A;}var i=this.getAggregation(f);var g=this.getProperty("ideaName");if(!i){i=new c({id:this.getId()+f,href:this.getProperty("ideaHref"),press:function(E){E.preventDefault();t.fireOpenIdea({ideaId:t.getProperty("ideaId")});}}).setText(g).addStyleClass("sapInoIdeaCardAccessibilityIdeaLink");this.setAggregation(f,i,true);}if(this.getProperty("ideaHref")){i.setHref(this.getProperty("ideaHref"));}return i;},_getIdeaDescription:function(){var i=this.getAggregation("_ideaDescription");if(!i){i=new H({content:"<span>"+(this.getProperty("ideaDescription")||"")+"</span>",sanitizeContent:true,preferDOM:false});this.setAggregation("_ideaDescription",i,true);}return i;},_getIdeaSubmitter:function(){var t=this;var i=this.getAggregation("_ideaSubmitter");if(!i){i=new c({id:this.getId()+"_ideaSubmitter",press:function(E){E.preventDefault();t._bIsFlipped=true;t.fireOpenSubmitter({ideaSubmitterId:t.getProperty("ideaSubmitterId")});},href:this.getProperty("ideaSubmitterHref"),text:t._getIdeaSubmitterText()}).addStyleClass("sapInoIdeaCardAccessibilitySubmitter");this.setAggregation("_ideaSubmitter",i,true);}return i;},_getIdeaSubmitterText:function(){return this._oRB.getText("CTRL_IDEACARD_FLD_SUBMITTED_BY",[this.getProperty("ideaSubmitter"),this.getProperty("ideaSubmittedAt")||this.getProperty("ideaCreatedAt")]);},_getDraftLabel:function(){var t=this;var D=this.getAggregation("_draftLabel");if(!D){D=new L({id:this.getId()+"_draftLabel",text:t._oRB.getText("CTRL_IDEACARD_TIT_DRAFT"),tooltip:t._oRB.getText("CTRL_IDEACARD_TIT_DRAFT"),textAlign:d.Center});this.setAggregation("_draftLabel",D,true);}return D;},_getIdeaMoreLink:function(A){var t=this;var f="_ideaMoreLink";if(A){f+=A;}var i=this.getAggregation(f);var g=this.getProperty("ideaName");if(!i){i=new c({id:this.getId()+f,href:t.getProperty("ideaHref"),press:function(E){E.preventDefault();t.fireOpenIdea({ideaId:t.getProperty("ideaId")});},text:t._oRB.getText("CTRL_IDEACARD_XLNK_MORE")}).setTooltip(t._oRB.getText("CTRL_IDEACARD_ALT_IDEA_TOOLTIP",[g])).addStyleClass("sapInoIdeaCardAccessibilityMoreButton");this.setAggregation(f,i,true);}return i;},_getFlipButton:function(A){var t=this;var f="_flipButton";if(A){f+=A;}var F=this.getAggregation(f);if(!F){F=new B({type:b.Transparent,icon:"sap-icon://redo",tooltip:t._oRB.getText("CTRL_IDEACARD_BUT_FLIP_BUTTON"),press:function(){t._flip();},enabled:true}).addStyleClass("sapInoIdeaCardAccessibilityFlipButton"+A);this.setAggregation(f,F,true);}return F;},_getCommentButton:function(A){var t=this;var f="_commentButton";if(A){f+=A;}var o=this.getAggregation(f);if(!o){o=new B({type:b.Transparent,icon:"sap-icon://comment",tooltip:{parts:[{path:'data>COMMENT_HAS_PRIVILEGE'},{path:'data>PARTICIPANT_CAN_COMMENT'},{path:'data>OPEN_STATUS_SETTING'}],formatter:function(i,g,O){var S=O>0&&i>0||!O;if(g>0&&S){return t._oRB.getText("CTRL_IDEACARD_BUT_COMMENT_BUTTON");}return t._oRB.getText("VOTE_MSG_COMMENT_NO_PRIVILEGE");}},press:function(){t.fireOpenIdeaComment({ideaId:t.getProperty("ideaId")});},enabled:{parts:[{path:'data>COMMENT_HAS_PRIVILEGE'},{path:'data>PARTICIPANT_CAN_COMMENT'},{path:'data>OPEN_STATUS_SETTING'}],formatter:function(i,g,O){var S=O>0&&i>0||!O;return g>0&&S;}}}).addStyleClass("sapInoIdeaCardBottomRibbonContent sapInoIdeaCardAccessibilityCommentButton");this.setAggregation(f,o,true);}return o;},_getIdeaReadButton:function(){var t=this;var A="_IdeaReadButton";var i=this.getAggregation(A);if(!i){i=new B({type:b.Transparent,icon:"sap-icon://InoIcons/idea_read",tooltip:t._oRB.getText("IDEA_LIST_FLD_READ"),press:function(){t.fireReadIdea({ideaId:t.getProperty("ideaId")});},visible:"{= !!${data>SHOW_UPDATED_VIEWER} || !!${data>SHOW_COMMENT_VIEWER} || !!${data>SHOW_STATUSCHANGE_VIEWER}}"}).addStyleClass("ideaNoticeReadButton");this.setAggregation(A,i,true);}return i;},_getNoticeStatusIcon:function(){var t=this;var n=this.getAggregation("_noticeStatusIcon");if(!n){n=new I({src:"sap-icon://InoIcons/new_status",tooltip:t._oRB.getText("IDEA_LIST_ITEM_IDEA_STATUS"),size:"1.5rem",visible:"{= !!${data>SHOW_STATUSCHANGE_VIEWER}}",press:function(){t.fireOpenIdea({ideaId:t.getProperty("ideaId")});}}).addStyleClass("ideaNoticeStatusIcon");this.setAggregation("_noticeStatusIcon",n,true);}return n;},_getNoticeCommentIcon:function(){var t=this;var n=this.getAggregation("_noticeCommentIcon");if(!n){n=new I({src:"sap-icon://InoIcons/new_comment",tooltip:t._oRB.getText("IDEA_LIST_ITEM_IDEA_COMMENT"),size:"1.5rem",visible:"{= !!${data>SHOW_COMMENT_VIEWER}}",press:function(){t.fireOpenIdeaComment({ideaId:t.getProperty("ideaId")});}}).addStyleClass("ideaNoticeCommentIcon");this.setAggregation("_noticeCommentIcon",n,true);}return n;},_getNoticeUpdateIcon:function(){var t=this;var n=this.getAggregation("_noticeUpdateIcon");if(!n){n=new I({src:"sap-icon://InoIcons/idea_update",tooltip:t._oRB.getText("IDEA_LIST_ITEM_IDEA_UPDATE"),size:"1.5rem",visible:"{= !!${data>SHOW_UPDATED_VIEWER}}",press:function(){t.fireOpenIdea({ideaId:t.getProperty("ideaId")});}}).addStyleClass("ideaNoticeUpdateIcon");this.setAggregation("_noticeUpdateIcon",n,true);}return n;},_getNoticeCreateIcon:function(){var t=this;var n=this.getAggregation("_noticeCreateIcon");if(!n){n=new I({src:"sap-icon://InoIcons/idea_create",tooltip:t._oRB.getText("IDEA_LIST_ITEM_IDEA_CREATE"),size:"1.5rem",visible:"{= !!${data>SHOW_CREATED_VIEWER}}",press:function(){t.fireOpenIdea({ideaId:t.getProperty("ideaId")});}}).addStyleClass("ideaNoticeCreateIcon");this.setAggregation("_noticeCreateIcon",n,true);}return n;},_flip:function(){var f=this._getFlipper(this);if(f){this._bIsFlipped=!this._bIsFlipped;f.classList.toggle("flip");if(!jQuery(f).hasClass("flip")){this._getFlipButton().focus();}else{this._getFlipButton("Back").focus();}}},_getFlipper:function(o){var f=o.$().find(".sapInoIdeaCardFlipContainer");if(f&&f.length>0){return f[0];}return undefined;},onAfterRendering:function(){if(C.prototype.onAfterRendering){C.prototype.onAfterRendering.apply(this,arguments);}this.initTabIndex();this.setAccessibility();this._initTabs();},setAccessibility:function(){var l=this.getParent();if(l&&l.attachBrowserEvent){l.attachBrowserEvent('focus',function(f){var t=f.target;$(t).find('.ideaListFollow button').attr("tabindex","0");});l.attachBrowserEvent('blur',function(f){var t=f.target;var g=$(t).find('.starVote');$(t).find('.ideaListFollow button').attr('tabindex','-1');if(g&&g.length){g.attr('tabindex','-1');}});}},initTabIndex:function(){this._getIdeaLink().$().attr("tabindex","-1");this._getIdeaLink("Back").$().attr("tabindex","-1");this._getFlipButton().$().attr("tabindex","-1");this._getCommentButton().$().attr("tabindex","-1");this._getFlipButton("Back").$().attr("tabindex","-1");this._getCampaignLink().$().attr("tabindex","-1");this._getCampaignLink("Back").$().attr("tabindex","-1");this._getIdeaMoreLink().$().attr("tabindex","-1");this._getIdeaSubmitter().$().attr("tabindex","-1");this.getAggregation("votePlaceholder").$().find('.starVote, button').attr('tabindex','-1');this.getAggregation("followButton").$().find('button').attr("tabindex","-1");this.getAggregation("contributorButton").$().find('button').attr("tabindex","-1");},renderer:function(r,o){r.write("<div");r.writeControlData(o);r.addClass("sapInoIdeaCard");r.addClass("sapUiSizeCompact");r.writeClasses();r.write(">");o._renderContent(r,o);r.write("</div>");},_renderContent:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardFlipContainer");if(this._bIsFlipped){r.addClass("flip");}r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoIdeaCardFlipper");r.writeClasses();r.write(">");o._renderFrontContent(r,o);o._renderBackContent(r,o);r.write("</div>");r.write("</div>");},_renderImage:function(r,o){var i=o.getAggregation("image");if(i){r.renderControl(i);}},_renderFrontContent:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardFront");r.writeClasses();r.write(">");o._renderTopRibbon(r,o);o._renderImage(r,o);o._renderTopPlaceholder(r,o);o._renderIdeaLink(r,o);o._renderBottomPlaceholder(r,o);o._renderIdeaNoticeIcon(r,o);o._renderBottomRibbon(r,o);o._renderFollowButton(r,o);r.write("</div>");},_renderBackContent:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardBack");r.writeClasses();r.write(">");o._renderTopRibbon(r,o,true);o._renderIdeaLink(r,o,true);o._renderIdeaSubmitter(r,o);o._renderIdeaDescription(r,o);o._renderIdeaMoreLink(r,o);o._renderBottomRibbon(r,o,true);r.write("</div>");},_renderIdeaLink:function(r,o,R){r.write("<div");r.addClass("sapInoIdeaCardIdeaLink");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoIdeaCardIdeaLinkTooltip");r.writeAttributeEscaped("title",o._oRB.getText("CTRL_IDEACARD_ALT_IDEA_TOOLTIP",[this.getProperty("ideaName")]));r.writeClasses();r.write(">");if(R){r.renderControl(o._getIdeaLink("Back"));}else{r.renderControl(o._getIdeaLink());}r.write("</div>");if(this.getProperty("isOpenForContributors")){r.renderControl(new I({src:"sap-icon://InoIcons/shake_hands",tooltip:o._oRB.getText("CTRL_IDEACARD_ALT_OPEN_CONTRIBUTION_TOOLTIP")}));}r.write("</div>");},_renderTopPlaceholder:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardTopPlaceholder");r.writeClasses();r.write(">");var v=o.getAggregation("voteDisplayPlaceholder");if(v){r.renderControl(v);}var f=o.getAggregation("commentDisplayPlaceholder");if(f){r.renderControl(f);}var g=o.getAggregation("viewDisplayPlaceholder");if(g){r.renderControl(g);}var A=o.getAggregation("anonymousDisplayPlaceholder");if(A){r.renderControl(A);}r.write("</div>");},_renderBottomPlaceholder:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardBottomPlaceholder");r.writeClasses();r.write(">");if(o.getProperty("isDraft")){o._renderDraftLabel(r,o);}else{var p=o.getAggregation("processDisplayPlaceholder");if(p){r.renderControl(p);}}r.write("</div>");},_renderIdeaNoticeIcon:function(r,o){r.write("<div");r.addClass("sapInoIdeaNoticeIconPlaceholder");r.writeClasses();r.write(">");r.renderControl(o._getNoticeStatusIcon());r.renderControl(o._getNoticeCommentIcon());r.renderControl(o._getNoticeUpdateIcon());r.write("</div>");},_renderFollowButton:function(r,o){r.write("<div");r.write(">");var f=o.getAggregation("followButton");r.renderControl(f);r.write("</div>");},_renderContributorButton:function(r,o){var f=o.getAggregation("contributorButton");f.addStyleClass("sapInoIdeaCardBottomRibbonContent sapInoIdeaCardAccessibilityContributorButton");r.renderControl(f);},_renderDraftLabel:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardDraftLabel");r.writeClasses();r.write(">");var D=o._getDraftLabel();r.renderControl(D);r.write("</div>");},_renderIdeaSubmitter:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardIdeaSubmitter");r.writeClasses();r.write(">");var i=o._getIdeaSubmitter();r.renderControl(i);r.write("</div>");},_renderIdeaDescription:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardIdeaDescription");r.writeClasses();r.write(">");var i=o._getIdeaDescription();r.renderControl(i);r.write("</div>");},_renderIdeaMoreLink:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardIdeaMoreLink");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoIdeaCardIdeaMoreLinkTooltip");r.writeAttributeEscaped("title",o._oRB.getText("CTRL_IDEACARD_ALT_IDEA_TOOLTIP",[this.getProperty("ideaName")]));r.writeClasses();r.write(">");var i=o._getIdeaMoreLink();r.renderControl(i);r.write("</div>");r.write("</div>");},_renderBottomRibbon:function(r,o,R){r.write("<div");r.addClass("sapInoIdeaCardRibbon");r.addClass("sapInoIdeaCardBottomRibbon");r.writeClasses();r.write(">");if(!R){var v=o.getAggregation("votePlaceholder");if(v){v.addStyleClass("sapInoIdeaCardAccessibilityVote");v.addStyleClass("sapInoIdeaCardBottomRibbonContent");r.renderControl(v);}r.renderControl(o._getCommentButton());o._renderContributorButton(r,o);}r.write("<div");r.addClass("sapInoIdeaCardBottomRibbonContent");r.writeClasses();r.write(">");if(R){r.renderControl(o._getFlipButton("Back"));}else{r.renderControl(o._getFlipButton());}r.renderControl(o._getIdeaReadButton());r.write("</div>");r.write("</div>");},_renderTopRibbon:function(r,o,R){r.write("<div");r.addClass("sapInoIdeaCardRibbon sapInoIdeaCardTopRibbon");r.writeClasses();var f=o.getProperty("color");if(f&&f.length===7){r.writeAttributeEscaped("style","background-color: "+f);}r.write(">");r.write("<span");r.addClass("sapInoIdeaCardAccessibilityText");r.addClass("sapUiInvisibleText");r.writeAttributeEscaped("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_IDEA_LINK",[this.getProperty("ideaName")]));r.writeClasses();r.write("></span>");r.write("<div");r.addClass("sapInoIdeaCardCampaignLink");if(!f){f="#FFFFFF";}r.addClass("sapInoIdeaCardCampaignTitle"+a.calculateTitleTextColor(f.substr(1,2),f.substr(3,2),f.substr(5,2)));r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoIdeaCardCampaignLinkTooltip");r.writeAttributeEscaped("title",o._oRB.getText("CTRL_CARD_ALT_CAMPAIGN_TOOLTIP"));r.writeClasses();r.write(">");if(R){r.renderControl(o._getCampaignLink("Back"));}else{r.renderControl(o._getCampaignLink());}r.write("</div>");r.write("</div>");r.write("</div>");},ontouchstart:function(E){E.setMarked();},ontap:function(E){this.firePress();},getFocusDomRef:function(){if(this._bIsFlipped){return this._getIdeaLink("Back").$();}return this._getIdeaLink().$();},onfocusin:function(E){if(!this._$AccessibilityText){this._$AccessibilityText=this.$().find(".sapInoIdeaCardAccessibilityText");}if(!E||!E.target||!E.target.className){this._$AccessibilityText.attr("title","");return;}if(E.target.className.indexOf("sapInoIdeaCardAccessibilityCampaignLink")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_CAMPAIGN_LINK",[this.getProperty("campaignName")]));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilityFlipButtonBack")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_FLIP_BACK"));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilityFlipButton")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_FLIP"));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilitySubmitter")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_SUBMITTER"));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilityIdeaLink")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_IDEA_LINK",[this.getProperty("ideaName")]));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilityMoreButton")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_MORE",[this.getProperty("ideaName")]));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilityVote")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_VOTE",[this.getProperty("ideaName")]));}else if(E.target.className.indexOf('sapInoIdeaCardAccessibilityCommentButton')!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_COMMENT",[this.getProperty("ideaName")]));}else if(E.target.className.indexOf('sapInoIdeaCardAccessibilityContributorButton')!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_CONTRIBUTOR",[this.getProperty("ideaName")]));}else{var v=jQuery(E.target).closest(".sapInoIdeaCardAccessibilityVote");if(v&&v.length>0){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_VOTE",[this.getProperty("ideaName")]));}}},_initTabs:function(){var f=this._getFlipButton();var o=this._getFlipButton("Back");f.addStyleClass("sapInoIdeaCardFlipButton");o.addStyleClass("sapInoIdeaCardFlipButton");var F=this.getAggregation("votePlaceholder");var g=this.getAggregation("followButton");var h=this.getAggregation("contributorButton");this._aFrontTabs=[];this._aFrontTabs.push(this._getCampaignLink().$()[0].id);this._aFrontTabs.push(this._getIdeaLink().$()[0].id);if(F.getEnabled()){var i=F.$().find(".starVote, button");if(i&&i.length>0){this._aFrontTabs.push(i[0].id);for(var j=1;j<i.length;j++){this._aFrontTabs.push(i[j].id);}}}if(g.getEnabled()){var k=g.$().find("button");if(k&&k.length){this._aFrontTabs.push(k[0].id);}}if(h.getEnabled()){var l=h.$().find('button');if(l&&l.length){this._aFrontTabs.push(l[0].id);}}this._aFrontTabs.push(this._getFlipButton().$()[0].id);this._aFrontTabs.push(this._getCommentButton().$()[0].id);this._aBackTabs=[];this._aBackTabs.push(this._getCampaignLink("Back").$()[0].id);this._aBackTabs.push(this._getIdeaLink("Back").$()[0].id);this._aBackTabs.push(this._getIdeaSubmitter().$()[0].id);this._aBackTabs.push(s(this._getIdeaMoreLink().$()[0].id));this._aBackTabs.push(this._getFlipButton("Back").$()[0].id);},_getTabs:function(){if(this._bIsFlipped){return this._aBackTabs;}return this._aFrontTabs;},_defaultOnKeyDown:function(E){if(C.prototype.onkeydown){C.prototype.onkeydown.apply(this,arguments);}},onkeydown:function(E){var t=this._getTabs();var u=this._incr;if(E.shiftKey||E.keyCode===jQuery.sap.KeyCodes.ARROW_UP||E.keyCode===jQuery.sap.KeyCodes.ARROW_LEFT){u=this._decr;}if(E.keyCode===jQuery.sap.KeyCodes.ESCAPE){this.getParent().focus();}else if(E.keyCode===jQuery.sap.KeyCodes.TAB||E.keyCode===jQuery.sap.KeyCodes.ARROW_DOWN||E.keyCode===jQuery.sap.KeyCodes.ARROW_RIGHT||E.keyCode===jQuery.sap.KeyCodes.ARROW_UP||E.keyCode===jQuery.sap.KeyCodes.ARROW_LEFT){var f=jQuery(":focus");var i=-1;if(f&&f.length>0){i=t.indexOf(f[0].id);if(i!==-1){i=u(i,t.length-1);this._focus(jQuery("#"+t[i]));E.preventDefault();E.stopPropagation();}else{this.getParent().focus();}}else{this.getParent().focus();}}else{this._defaultOnKeyDown(E);}},_incr:function(v,m){v++;if(v>m){return 0;}return v;},_decr:function(v,m){v--;if(v<0){return m;}return v;},_focus:function(E){if(jQuery.type(E.focus)==="function"){setTimeout(function(){E.focus();},0);}}});e.prototype.setIdeaDescription=function(v){this.setProperty("ideaDescription",v);this._getIdeaDescription().setContent("<span>"+(v||"")+"</span>");};e.prototype.setIdeaName=function(v){this.setProperty("ideaName",v);var i=this._getIdeaLink();if(i){i.setText(v);}i=this._getIdeaLink("Back");if(i){i.setText(v);}};e.prototype.setIdeaSubmittedAt=function(v){this.setProperty("ideaSubmittedAt",v);this._getIdeaSubmitter().setText(this._getIdeaSubmitterText());};e.prototype.setIdeaCreatedAt=function(v){this.setProperty("ideaCreatedAt",v);this._getIdeaSubmitter().setText(this._getIdeaSubmitterText());};e.prototype.setIdeaSubmitter=function(v){this.setProperty("ideaSubmitter",v);this._getIdeaSubmitter().setText(this._getIdeaSubmitterText());};return e;});
