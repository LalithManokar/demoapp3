/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
sap.ui.define(["sap/ui/core/Control","sap/m/Image","sap/ui/core/Icon","sap/m/Link","sap/m/Text","sap/m/Size","sap/ui/core/Orientation"],function(C,I,a,L,T,S,O){"use strict";var b=C.extend("sap.ino.controls.IdentityCard",{metadata:{properties:{identityId:{type:"int"},userImageUrl:{type:"sap.ui.core.URI"},imageSize:{type:"sap.m.Size",defaultValue:"M"},userName:{type:"string"},userOrganization:{type:"string"},orientation:{type:"sap.ui.core.Orientation",defaultValue:"Horizontal"}},aggregations:{actions:{type:"sap.ui.core.Control",multiple:true,singularName:"action"},content:{type:"sap.ui.core.Control",multiple:true},contribution:{type:"sap.ui.core.Control",multiple:false},_nameLink:{type:"sap.m.Link",multiple:false,visibility:"hidden"},_organizationLabel:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_userImage:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},events:{identityPress:{}},defaultAggregation:"content"},init:function(){},setUserImageUrl:function(u){var i=this.getAggregation("_userImage");var o;if(i){if(u&&this.getProperty("userImageUrl")!==u){o=new I({src:u,decorative:true,press:this.fireNavigateToUser.bind(this)});o.addStyleClass("sapInoUserImage");}else if(!u&&i.getMetadata().getName()==="sap.m.Image"){o=new a({src:"sap-icon://person-placeholder",decorative:true,useIconTooltip:false,press:this.fireNavigateToUser.bind(this)});o.addStyleClass("sapInoUserIcon");}}else{if(u){o=new I({src:u,decorative:true,press:this.fireNavigateToUser.bind(this)});o.addStyleClass("sapInoUserImage");}else{o=new a({src:"sap-icon://person-placeholder",decorative:true,useIconTooltip:false,press:this.fireNavigateToUser.bind(this)});o.addStyleClass("sapInoUserIcon");}}if(o){this.setAggregation("_userImage",o);}this.setProperty("userImageUrl",u);return this;},setUserName:function(u){if(u&&this.getProperty("userName")!==u&&this.getIdentityId()!==0){this.setAggregation("_nameLink",new L({text:u,press:this.fireNavigateToUser.bind(this),wrapping:false}).setTooltip(u));}this.setProperty("userName",u);return this;},setUserOrganization:function(o){if(o){this.setAggregation("_organizationLabel",new T({text:o,wrapping:true}));}this.setProperty("userOrganization",o);return this;},fireNavigateToUser:function(e){this.fireIdentityPress({identityId:this.getIdentityId(),actualSource:e.getSource()});return this;},getImageAggregation:function(){if(!this.getAggregation("_userImage")){this.setUserImageUrl();}return this.getAggregation("_userImage");},renderer:function(r,c){r.write("<div ");r.writeControlData(c);r.addClass("sapInoIdentityCard");if(c.getOrientation()===O.Vertical){r.addClass("sapInoIdentityCardVertical");}else{r.addClass("sapInoIdentityCardHorizontal");}r.writeClasses();r.writeStyles();r.write(">");var o=c.getImageAggregation();var s=c.getImageSize();if(s===S.XS){o.addStyleClass("sapInoUserImageXSmall");}else if(s===S.S){o.addStyleClass("sapInoUserImageSmall");}else if(s===S.L){o.addStyleClass("sapInoUserImageLarge");}else{o.addStyleClass("sapInoUserImageMedium");}r.write("<div ");r.addClass("sapInoUserImageWrapper");r.writeClasses();r.write(">");r.renderControl(o);r.write("</div>");r.write("<div");r.addClass("sapInoUserContentWrapper");r.writeClasses();r.write(">");var n=c.getAggregation("_nameLink");if(n){r.renderControl(n);}var d=c.getAggregation("_organizationLabel");if(d){r.renderControl(d);}var e=c.getContent();if(e&&e.length>0){for(var i=0;i<e.length;i=i+1){r.renderControl(e[i]);}}r.write("</div>");var A=c.getActions();if(A&&A.length>0){r.write("<div");r.addClass("sapInoUserActionWrapper");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoActionBtnWrapper");r.writeClasses();r.write(">");for(i=0;i<A.length;i=i+1){r.renderControl(A[i]);}r.write("</div>");var f=c.getAggregation("contribution");if(f){r.renderControl(f);}r.write("</div>");}r.write("</div>");},onAfterRendering:function(){var i=this.getImageAggregation();if(i){i.$().attr("tabindex","-1");}}});return b;});
