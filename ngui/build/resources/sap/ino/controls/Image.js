/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
sap.ui.define(["sap/ino/controls/util/ColorSupport","sap/m/Image","sap/m/ImageRenderer"],function(C,I,a){"use strict";var b=I.extend("sap.ino.controls.Image",{metadata:{properties:{"foregroundColor":{type:"sap.ui.core.CSSColor"},"objectId":{type:"int"},"objectName":{type:"string"},"imageAlt":{type:"string"},"disableImage":{type:'boolean'}},aggregations:{"followButton":{type:"sap.ui.core.Control",multiple:false}},events:{press:{parameters:{objectId:{type:"int"}}}}},init:function(){this._oRB=sap.ui.getCore().getLibraryResourceBundle("sap.ino.controls");},renderDisableImage:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapInoImage sapInoImageTextContainer");if(c.hasListeners("press")){r.addClass("sapInoImageTextContainerNav");}var s="";if(c.getProperty("width")){s="width:"+c.getProperty("width")+";";}if(c.getProperty("height")){s=s+"height:"+c.getProperty("height")+";";}if(s){r.writeAttributeEscaped("style",s);}r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoImageDescription");var f=c.getProperty("foregroundColor");if(f&&f.length===7){r.writeAttributeEscaped("style","color: "+C.calculateMediaTextColor(f.substr(1,2),f.substr(3,2),f.substr(5,2))+"; background-color: "+f);}r.writeClasses();if(c.hasListeners("press")){if(c.getTooltip_Text()){r.writeAttributeEscaped("title",c.getTooltip_Text());}}r.write(">");var i=c.getProperty("imageAlt");if(i&&i.length>100){i=i.slice(0,99)+'...';}if(i){r.writeEscaped(i);}r.write("</div>");c._renderFollowButton(r,c);r.write("</div>");},renderImage:function(r,c){r.write("<div>");c._renderFollowButton(r,c);a.render.apply(this,arguments);r.write("</div>");},renderDefault:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapInoImage sapInoImageTextContainer");if(c.hasListeners("press")){r.addClass("sapInoImageTextContainerNav");}var s="";if(c.getProperty("width")){s="width:"+c.getProperty("width")+";";}if(c.getProperty("height")){s=s+"height:"+c.getProperty("height")+";";}if(s){r.writeAttributeEscaped("style",s);}r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoImageDefaultText");var f=c.getProperty("foregroundColor");if(f&&f.length===7){r.writeAttributeEscaped("style","opacity: 0.4; color: "+C.calculateMediaTextColor(f.substr(1,2),f.substr(3,2),f.substr(5,2))+"; background-color: "+f);}r.writeClasses();if(c.hasListeners("press")){if(c.getTooltip_Text()){r.writeAttributeEscaped("title",c.getTooltip_Text());}}r.write(">");var o=c.getProperty("objectName");if(o){r.writeEscaped(o);}r.write("</div>");c._renderFollowButton(r,c);r.write("</div>");},renderer:function(r,c){var d=c.getProperty('disableImage');var i=c.getProperty("src");if(d){return c.renderDisableImage(r,c);}if(!i){return c.renderDefault(r,c);}return c.renderImage(r,c);},_renderFollowButton:function(r,c){var f=c.getAggregation("followButton");r.renderControl(f);},onAfterRendering:function(){var $=jQuery(this.getDomRef());$.addClass("sapInoImage");if($.is("img")){$.addClass("sapInoImageMargins");$.attr("tabindex","-1");}else if(this.getWidth()){var p=this.getWidth().match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/);if(p&&p[1]){var P=(p[2]==="px")?0:2;var f=""+(p[1]*0.37).toFixed(P)+p[2];$.children(".sapInoImageText").css("font-size",f);}}}});b.prototype.setSrc=function(v){this.setProperty("src",v);};return b;});
