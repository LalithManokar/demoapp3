sap.ui.define(["sap/m/ButtonType","sap/m/Button","sap/ui/core/IconPool","sap/m/ToggleButton","sap/ui/core/InvisibleText"],function(B,a,I,T,b){'use strict';return a.extend("sap.ino.controls.Follow",{metadata:{properties:{"Id":{type:"int"},"objectId":{type:"int"},"enabled":{type:"boolean"},"type":{type:"string"},"value":{type:"float"},"tooltip":{type:"string"},"onlyIcon":{type:"boolean"},"styleType":{type:"string"},"visible":{type:"boolean"},"showType":{type:"string",defaultValue:"card"}},aggregations:{"_follow":{type:"sap.m.ToggleButton",multiple:false,visibility:"hidden"},"_followDescription":{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}},events:{follow:{}}},init:function(){this._oRB=sap.ui.getCore().getLibraryResourceBundle("sap.ino.controls");},_onFollow:function(){var v=this.getProperty('value');var o=this.getProperty('objectId');var t=this.getProperty('type');this.setProperty('value',this.getProperty('value')?0:1);this.fireFollow({value:v,objectId:o,type:t});},_followButton:function(){var f=this.getAggregation("_follow");var s=this;var v=s.getProperty('value');var c=s.getProperty('showType');var i=s.getModel("i18n").getResourceBundle();var t=v?'UNFOLLOW_TOOLTIP_'+s.getProperty('type'):'FOLLOW_TOOLTIP_'+s.getProperty('type');var d=v?i.getText('FOLLOW_STATUS_FOLLOWING'):i.getText('FOLLOW_STATUS_FOLLOW');var e=v?I.getIconURI('following','InoIcons'):I.getIconURI('follow','InoIcons');if(f){f.setText(d);f.setPressed(!!v);f.setEnabled(s.getProperty('enabled'));f.setVisible(s.getProperty('visible'));f.setTooltip(i.getText(t));f.setIcon(e);}else{f=new T({ariaDescribedBy:this._getFollowDescription(i.getText(t)),text:d,icon:e,enabled:this.getProperty("enabled"),visible:this.getProperty('visible'),press:function(){s._onFollow();},pressed:!!v,tooltip:i.getText(t),type:B.Transparent});this.setAggregation("_follow",f,true);}if(v){f.attachBrowserEvent('mouseenter focus',function(){f.setIcon(I.getIconURI('unfollow','InoIcons'));f.$().removeClass('isHover').addClass('isHover');f.setText(i.getText('FOLLOW_STATUS_UNFOLLOW'));return false;});f.attachBrowserEvent('mouseleave blur',function(){f.setIcon(I.getIconURI('following','InoIcons'));f.$().removeClass('isHover');f.setText(i.getText('FOLLOW_STATUS_FOLLOWING'));return false;});}else{f.$().removeClass('isHover');f.aBindParameters=[];}return f;},_followIcon:function(){var f=this.getAggregation("_follow");var s=this;var v=s.getProperty('value');var c=s.getProperty('showType');var i=s.getModel("i18n");var d;if(i){d=i.getResourceBundle();}var t=v?'UNFOLLOW_TOOLTIP_'+s.getProperty('type'):'FOLLOW_TOOLTIP_'+s.getProperty('type');var e=v?I.getIconURI('following','InoIcons'):I.getIconURI('follow','InoIcons');if(f){f.setPressed(!!v);f.setEnabled(s.getProperty('enabled'));f.setVisible(s.getProperty('visible'));f.setTooltip(d?d.getText(t):"");f.setIcon(e);}else{f=new T({ariaDescribedBy:this._getFollowDescription(d?d.getText(t):""),enabled:this.getProperty("enabled"),visible:this.getProperty('visible'),icon:e,press:function(){s._onFollow();},pressed:!!v,tooltip:d?d.getText(t):"",type:B.Transparent});this.setAggregation("_follow",f,true);}if(v){f.attachBrowserEvent('mouseenter focus',function(){f.setIcon(I.getIconURI('unfollow','InoIcons'));f.$().removeClass('isHover').addClass('isHover');return false;});f.attachBrowserEvent('mouseleave blur',function(){f.setIcon(I.getIconURI('following','InoIcons'));f.$().removeClass('isHover');return false;});}else{f.$().removeClass('isHover');f.aBindParameters=[];}return f;},_getFollowDescription:function(t){var d=this.getAggregation("_followDescription");if(!d){d=new b({text:t});this.setAggregation("_followDescription",d);}return d;},renderer:function(r,c){var f,d;var o=c.getProperty('onlyIcon');var s=c.getProperty('showType');var e=c.getProperty('styleType')?c.getProperty('styleType'):'';var i=c.getProperty('value')?'isActive':'';if(o){f=c._followIcon();d='sapFollowIcon';}else{f=c._followButton();d='sapFollowButton';}if(s==="card"){r.write("<div");r.writeControlData(c);r.addClass(d);r.addClass(e);r.addClass(i);r.writeClasses();r.write(">");if(f){r.renderControl(f);r.renderControl(c._getFollowDescription());}r.write("</div>");}else if(s==="list"){if(f){r.renderControl(f);r.renderControl(c._getFollowDescription());}}}});});
