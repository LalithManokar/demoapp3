/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
sap.ui.define(["sap/ui/core/Control","sap/ino/controls/util/ColorSupport","sap/m/Button","sap/m/ButtonType","sap/m/Label","sap/m/Link","sap/m/Text","sap/ui/core/HTML","sap/ui/core/TextAlign","sap/ui/core/Icon","sap/ino/controls/VoteType","sap/m/FlexBox","sap/ui/commons/Label","sap/base/security/sanitizeHTML"],function(C,a,B,b,L,c,T,H,d,I,V,F,e,s){"use strict";var f=C.extend("sap.ino.controls.IdeaCardNoImage",{metadata:{properties:{"ideaCreatedAt":{type:"string"},"ideaDescription":{type:"string"},"ideaHref":{type:"sap.ui.core.URI"},"ideaId":{type:"int"},"ideaName":{type:"string"},"ideaSubmittedAt":{type:"string"},"ideaSubmitter":{type:"string"},"ideaSubmitterId":{type:"int"},"ideaSubmitterHref":{type:"sap.ui.core.URI"},"isDraft":{type:"boolean"},"isOpenForContributors":{type:"boolean"},"color":{type:"sap.ui.core.CSSColor"},"campaignId":{type:"int"},"campaignHref":{type:"sap.ui.core.URI"},"campaignName":{type:"string"},"phase":{type:"string"},"status":{type:"string"},statusColor:{type:"string"},"respValue":{type:"string"},"voteType":{type:"string"},'voteCount':{type:"int"},'voteLike':{type:"int"},'voteDislike':{type:'int'},'likeVotes':{type:'float'},'negativeVotes':{type:'int'},'positiveVotes':{type:'int'}},aggregations:{"commentDisplayPlaceholder":{type:"sap.ui.core.Control",multiple:false},"viewDisplayPlaceholder":{type:"sap.ui.core.Control",multiple:false},"voteDisplayPlaceholder":{type:"sap.ui.core.Control",multiple:false},"votePlaceholder":{type:"sap.ui.core.Control",multiple:false},"followButton":{type:"sap.ui.core.Control",multiple:false},"_campaignLink":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_campaignLinkBack":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_draftLabel":{type:"sap.m.Label",multiple:false,visibility:"hidden"},"_ideaDescription":{type:"sap.ui.core.HTML",multiple:false,visibility:"hidden"},"_ideaLink":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_ideaLinkBack":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_ideaMoreLink":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_ideaSubmitter":{type:"sap.m.Link",multiple:false,visibility:"hidden"},"_flipButton":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_commentButton":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_flipButtonBack":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"contributorButton":{type:"sap.ui.core.Control",multiple:false},"_status":{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"},"_phase":{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"},"_ideaId":{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"},"_respValue":{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"},"_voteCount":{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"},"_noticeStatusIcon":{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},"_noticeCommentIcon":{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},"_noticeUpdateIcon":{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},"_noticeCreateIcon":{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},"_IdeaReadButton":{type:"sap.m.Button",multiple:false,visibility:"hidden"}},events:{openIdea:{},openSubmitter:{},press:{},openCampaign:{},openIdeaComment:{},readIdea:{}}},init:function(){this._oRB=sap.ui.getCore().getLibraryResourceBundle("sap.ino.controls");this.isFront=true;},_getCampaignLink:function(A){var t=this;var g="_campaignLink";if(A){g+=A;}var o=this.getAggregation(g);var h=this.getProperty("campaignName");if(!o){o=new c({id:this.getId()+g,href:this.getProperty("campaignHref"),press:function(E){E.preventDefault();t.fireOpenCampaign({campaignId:t.getProperty("campaignId")});},text:h}).addStyleClass("sapInoIdeaCardAccessibilityCampaignLink");this.setAggregation(g,o,true);}return o;},_getIdeaLink:function(A){var t=this;var g="_ideaLink";if(A){g+=A;}var i=this.getAggregation(g);var h=this.getProperty("ideaName");if(!i){i=new c({id:this.getId()+g,href:this.getProperty("ideaHref"),press:function(E){E.preventDefault();t.fireOpenIdea({ideaId:t.getProperty("ideaId")});}}).setText(h).addStyleClass("sapInoIdeaCardAccessibilityIdeaLink");this.setAggregation(g,i,true);}if(this.getProperty("ideaHref")){i.setHref(this.getProperty("ideaHref"));}return i;},_getIdeaDescription:function(){var i=this.getAggregation("_ideaDescription");if(!i){i=new H({content:"<span>"+(this.getProperty("ideaDescription")||"")+"</span>",sanitizeContent:true,preferDOM:false});this.setAggregation("_ideaDescription",i,true);}return i;},_getIdeaSubmitter:function(){var t=this;var i=this.getAggregation("_ideaSubmitter");if(!i){i=new c({id:this.getId()+"_ideaSubmitter",press:function(E){E.preventDefault();t._bIsFlipped=true;t.fireOpenSubmitter({ideaSubmitterId:t.getProperty("ideaSubmitterId")});},href:this.getProperty("ideaSubmitterHref"),text:t._getIdeaSubmitterText()}).addStyleClass("sapInoIdeaCardAccessibilitySubmitter");this.setAggregation("_ideaSubmitter",i,true);}return i;},_getIdeaSubmitterText:function(){var g=this.getProperty("ideaSubmitter");if(this.getProperty("ideaSubmitterId")===0){g=this.getModel("i18n").getProperty("IDEA_OBJECT_TIT_IDEA_Anonymity");}return this._oRB.getText("CTRL_IDEACARD_FLD_SUBMITTED_BY",[g,this.getProperty("ideaSubmittedAt")||this.getProperty("ideaCreatedAt")]);},_getDraftLabel:function(){var t=this;var D=this.getAggregation("_draftLabel");if(!D){D=new L({id:this.getId()+"_draftLabel",text:t._oRB.getText("CTRL_IDEACARD_TIT_DRAFT"),tooltip:t._oRB.getText("CTRL_IDEACARD_TIT_DRAFT"),textAlign:d.Center});this.setAggregation("_draftLabel",D,true);}return D;},_getIdeaMoreLink:function(A){var t=this;var g="_ideaMoreLink";if(A){g+=A;}var i=this.getAggregation(g);var h=this.getProperty("ideaName");if(!i){i=new c({id:this.getId()+g,href:t.getProperty("ideaHref"),press:function(E){E.preventDefault();t.fireOpenIdea({ideaId:t.getProperty("ideaId")});},text:t._oRB.getText("CTRL_IDEACARD_XLNK_MORE")}).setTooltip(t._oRB.getText("CTRL_IDEACARD_ALT_IDEA_TOOLTIP",[h])).addStyleClass("sapInoIdeaCardAccessibilityMoreButton");this.setAggregation(g,i,true);}return i;},_getFlipButton:function(A){var t=this;var g="_flipButton";if(A){g+=A;}var o=this.getAggregation(g);if(!o){o=new B({type:b.Transparent,icon:"sap-icon://redo",tooltip:t._oRB.getText("CTRL_IDEACARD_BUT_FLIP_BUTTON"),press:function(E){t._flip();},enabled:true}).addStyleClass("sapInoIdeaCardAccessibilityFlipButton"+A);this.setAggregation(g,o,true);}return o;},_getCommentButton:function(A){var t=this;var g="_commentButton";if(A){g+=A;}var o=this.getAggregation(g);if(!o){o=new B({type:b.Transparent,icon:"sap-icon://comment",tooltip:{parts:[{path:'data>COMMENT_HAS_PRIVILEGE'},{path:'data>PARTICIPANT_CAN_COMMENT'},{path:'data>OPEN_STATUS_SETTING'}],formatter:function(i,h,O){var S=O>0&&i>0||!O;if(h>0&&S){return t._oRB.getText("CTRL_IDEACARD_BUT_COMMENT_BUTTON");}return t._oRB.getText("VOTE_MSG_COMMENT_NO_PRIVILEGE");}},press:function(E){t.fireOpenIdeaComment({ideaId:t.getProperty("ideaId")});},enabled:{parts:[{path:'data>COMMENT_HAS_PRIVILEGE'},{path:'data>PARTICIPANT_CAN_COMMENT'},{path:'data>OPEN_STATUS_SETTING'}],formatter:function(i,h,O){var S=O>0&&i>0||!O;return h>0&&S;}}}).addStyleClass("sapInoIdeaCardBottomRibbonContent sapInoIdeaCardAccessibilityCommentButton");this.setAggregation(g,o,true);}return o;},_getIdeaReadButton:function(){var t=this;var A="_IdeaReadButton";var i=this.getAggregation(A);if(!i){i=new B({type:b.Transparent,icon:"sap-icon://InoIcons/idea_read",tooltip:t._oRB.getText("IDEA_LIST_FLD_READ"),press:function(){t.fireReadIdea({ideaId:t.getProperty("ideaId")});},visible:"{= !!${data>SHOW_UPDATED_VIEWER} || !!${data>SHOW_COMMENT_VIEWER} || !!${data>SHOW_STATUSCHANGE_VIEWER}}"}).addStyleClass("ideaNoticeReadButton");this.setAggregation(A,i,true);}return i;},_getNoticeStatusIcon:function(){var t=this;var n=this.getAggregation("_noticeStatusIcon");if(!n){n=new I({src:"sap-icon://InoIcons/new_status",tooltip:t._oRB.getText("IDEA_LIST_ITEM_IDEA_STATUS"),size:"1.5rem",visible:"{= !!${data>SHOW_STATUSCHANGE_VIEWER}}",press:function(){t.fireOpenIdea({ideaId:t.getProperty("ideaId")});}}).addStyleClass("ideaNoticeStatusIcon");this.setAggregation("_noticeStatusIcon",n,true);}return n;},_getNoticeCommentIcon:function(){var t=this;var n=this.getAggregation("_noticeCommentIcon");if(!n){n=new I({src:"sap-icon://InoIcons/new_comment",tooltip:t._oRB.getText("IDEA_LIST_ITEM_IDEA_COMMENT"),size:"1.5rem",visible:"{= !!${data>SHOW_COMMENT_VIEWER}}",press:function(){t.fireOpenIdeaComment({ideaId:t.getProperty("ideaId")});}}).addStyleClass("ideaNoticeCommentIcon");this.setAggregation("_noticeCommentIcon",n,true);}return n;},_getNoticeUpdateIcon:function(){var t=this;var n=this.getAggregation("_noticeUpdateIcon");if(!n){n=new I({src:"sap-icon://InoIcons/idea_update",tooltip:t._oRB.getText("IDEA_LIST_ITEM_IDEA_UPDATE"),size:"1.5rem",visible:"{= !!${data>SHOW_UPDATED_VIEWER}}",press:function(){t.fireOpenIdea({ideaId:t.getProperty("ideaId")});}}).addStyleClass("ideaNoticeUpdateIcon");this.setAggregation("_noticeUpdateIcon",n,true);}return n;},_getNoticeCreateIcon:function(){var t=this;var n=this.getAggregation("_noticeCreateIcon");if(!n){n=new I({src:"sap-icon://InoIcons/idea_create",tooltip:t._oRB.getText("IDEA_LIST_ITEM_IDEA_CREATE"),size:"1.5rem",visible:"{= !!${data>SHOW_CREATED_VIEWER}}",press:function(){t.fireOpenIdea({ideaId:t.getProperty("ideaId")});}}).addStyleClass("ideaNoticeCreateIcon");this.setAggregation("_noticeCreateIcon",n,true);}return n;},_getVoteCountLabel:function(){var v=this.getProperty('voteType');var l=[];var g,h,t;switch(v){case V.TYPE_LIKE:g="sap-icon://InoIcons/heart";h=this.getProperty('voteCount');t=this._oRB.getText('CTRL_IDEACARD_FLD_VOTE_LABEL',[h]);break;case V.TYPE_LIKE_DISLIKE:g="sap-icon://InoIcons/thumbsup";h=this.getProperty('positiveVotes');t=this._oRB.getText('CTRL_IDEACARD_FLD_LIKE_LABEL',[h]);break;case V.TYPE_STAR:g="sap-icon://favorite";h=this.getProperty('voteCount');t=this._oRB.getText('CTRL_IDEACARD_FLD_VOTE_LABEL',[h]);break;default:g="sap-icon://InoIcons/heart";h=this.getProperty('voteCount');t=this._oRB.getText('CTRL_IDEACARD_FLD_VOTE_LABEL',[h]);break;}l.push(new e({icon:g,text:h,tooltip:t}));if(v===V.TYPE_LIKE_DISLIKE){l.push(new e({icon:"sap-icon://InoIcons/thumbsdown",text:this.getProperty('negativeVotes'),tooltip:this._oRB.getText('CTRL_IDEACARD_FLD_DISLIKE_LABEL',[this.getProperty('voteDislike')])}));}return l;},_getVoteCount:function(){var v=this.getAggregation('_voteCount');var l=this._getVoteCountLabel();if(!v){v=new F({items:l,alignItems:"Start",justifyContent:"Start",alignContent:"Start"});this.setAggregation('_voteCount',v);}return v;},_flip:function(){var o=this._getFlipper(this);if(o){this._bIsFlipped=!this._bIsFlipped;o.classList.toggle("flip");if(!jQuery(o).hasClass("flip")){this._getFlipButton().focus();}else{this._getFlipButton("Back").focus();}}},_getFlipper:function(o){var g=o.$().find(".sapInoIdeaCardFlipContainer");if(g&&g.length>0){return g[0];}return undefined;},onAfterRendering:function(){if(C.prototype.onAfterRendering){C.prototype.onAfterRendering.apply(this,arguments);}this.initTabIndex();this.setAccessibility();this._initTabs();var S=this.getProperty("statusColor");if(S&&S.length===6){S="#"+S;}else{S="#333333";}if(this.getDomRef()){$(this.getDomRef()).find('.sapInoNoImageStatusText').css("color",S);}},setAccessibility:function(){var l=this.getParent();if(l){l.attachBrowserEvent('focus',function(g){var t=g.target;$(t).find('.ideaListFollow button').attr("tabindex","0");});l.attachBrowserEvent('blur',function(g){var t=g.target;var h=$(t).find('.starVote');$(t).find('.ideaListFollow button').attr('tabindex','-1');if(h&&h.length){h.attr('tabindex','-1');}});}},initTabIndex:function(){this._getIdeaLink().$().attr("tabindex","-1");this._getIdeaLink("Back").$().attr("tabindex","-1");this._getFlipButton().$().attr("tabindex","-1");this._getCommentButton().$().attr("tabindex","-1");this._getFlipButton("Back").$().attr("tabindex","-1");this._getCampaignLink().$().attr("tabindex","-1");this._getCampaignLink("Back").$().attr("tabindex","-1");this._getIdeaMoreLink().$().attr("tabindex","-1");this._getIdeaSubmitter().$().attr("tabindex","-1");this.getAggregation("votePlaceholder").$().attr('tabindex','-1');this.getAggregation("votePlaceholder").$().find('.starVote, button').attr('tabindex','-1');this.getAggregation("followButton").$().find('button').attr("tabindex","-1");this.getAggregation("contributorButton").$().find('button').attr("tabindex","-1");},renderer:function(r,o){r.write("<div");r.writeControlData(o);r.addClass("sapInoIdeaCard");r.addClass("sapUiSizeCompact");r.writeClasses();r.write(">");o._renderContent(r,o);r.write("</div>");},_renderContent:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardFlipContainer sapInoIdeaCardFlipContainerNoImage");if(this._bIsFlipped){r.addClass("flip");}r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoIdeaCardFlipper");r.writeClasses();r.write(">");o._renderFrontContent(r,o);o._renderBackContent(r,o);r.write("</div>");r.write("</div>");},_renderFrontContent:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardFront");r.writeClasses();r.write(">");o._renderTopRibbon(r,o);o._renderIdeaLink(r,o);o._renderTopDesciption(r,o);o._renderVotePlaceholder(r,o);o._renderVoteCount(r,o);o._renderBottomPlaceholder(r,o);o._renderIdeaNoticeIcon(r,o);o._renderBottomRibbon(r,o);r.write("</div>");},_renderBackContent:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardBack sapInoIdeaCardBackNoImage");r.writeClasses();r.write(">");o._renderTopRibbon(r,o,true);o._renderIdeaLink(r,o,true);o._renderIdeaSubmitter(r,o);o._renderIdeaDescription(r,o);o._renderIdeaMoreLink(r,o);o._renderBottomRibbon(r,o,true);r.write("</div>");},_renderIdeaLink:function(r,o,R){r.write("<div");r.addClass("sapInoIdeaCardIdeaLink");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoIdeaCardIdeaLinkTooltip");r.writeAttributeEscaped("title",o._oRB.getText("CTRL_IDEACARD_ALT_IDEA_TOOLTIP",[this.getProperty("ideaName")]));r.writeClasses();r.write(">");if(R){r.renderControl(o._getIdeaLink("Back"));}else{r.renderControl(o._getIdeaLink());}r.write("</div>");if(this.getProperty("isOpenForContributors")){r.renderControl(new I({src:"sap-icon://InoIcons/shake_hands",tooltip:o._oRB.getText("CTRL_IDEACARD_ALT_OPEN_CONTRIBUTION_TOOLTIP")}));}r.write("</div>");},_renderVotePlaceholder:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardNoImageVotePlaceholder");r.writeClasses();r.write(">");var v=o.getAggregation("votePlaceholder");if(v){v.addStyleClass("sapInoIdeaCardNoImageVote");r.renderControl(v);}r.write("</div>");},_renderVoteCount:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardNoImageVoteCount");r.writeClasses();r.write(">");r.renderControl(o._getVoteCount());r.write("</div>");},_renderTopDesciption:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardNoImageTopDes");r.writeClasses();r.write(">");o._renderTopInfoText(r,o);r.write("</div>");},_renderPhaseStatus:function(r,o){var R=false;if(o.getProperty("phase")||o.getProperty("status")){R=true;}r.write("<div>");o._renderInfoText(r,o,R);r.write("</div>");},_renderBottomPlaceholder:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardNoImageBottomPlaceholder");r.writeClasses();r.write(">");if(o.getProperty("isDraft")){o._renderDraftLabel(r,o);}else{o._renderPhaseStatus(r,o);}r.write("</div>");},_renderIdeaNoticeIcon:function(r,o){r.write("<div");r.addClass("sapInoIdeaNoticeIconPlaceholder");r.writeClasses();r.write(">");r.renderControl(o._getNoticeStatusIcon());r.renderControl(o._getNoticeCommentIcon());r.renderControl(o._getNoticeUpdateIcon());r.write("</div>");},_getPhase:function(){var p=this.getAggregation("_phase");if(!p){p=new F({items:[this._getPhaseLabel(),this._getPhaseText()],alignItems:"Start",justifyContent:"Start",alignContent:"Start"});this.setAggregation("_phase",p);}return p;},_getIdeaId:function(){var i=this.getAggregation("_ideaId");if(!i){i=new F({items:[this._getIdeaIdLabel(),this._getIdeaIdLink()],alignItems:"Start",justifyContent:"Start",alignContent:"Start"}).addStyleClass("sapInoNoImagesId");this.setAggregation("_ideaId",i);}return i;},_getResponsibility:function(){var r=this.getAggregation("_respValue");if(!r){r=new F({items:[this._getRespValueLabel(),this._getRespValueText()],alignItems:"Start",justifyContent:"Start",alignContent:"Start"}).addStyleClass("sapInoNoImageResp");this.setAggregation("_respValue",r);}return r;},_getStatus:function(){var S=this.getAggregation("_status");if(!S){S=new F({items:[this._getStatusLabel(),this._getStatusText()],alignItems:"Start",justifyContent:"Start",alignContent:"Start"}).addStyleClass("sapInoNoImageStatus");this.setAggregation("_status",S);}return S;},_getStatusReason:function(){var S=this.getAggregation("_statusReason");if(!S){S=new F({items:[this._getStatusReasonLabel(),this._getStatusReasonText()],alignItems:"Start",justifyContent:"Start",alignContent:"Start"}).addStyleClass("sapInoNoImageStatus");this.setAggregation("_statusReason",S);}return S;},_getPhaseLabel:function(){var p=this.getProperty("phase");if(this.getProperty("isDraft")){p="";}return new L({text:this._oRB.getText("CTRL_PROCESSINDICATOR_FLD_PHASE_LABEL"),tooltip:this._oRB.getText("CTRL_PROCESSINDICATOR_ALT_PHASE_TOOLTIP",p)}).addStyleClass("sapInoNoImagePhaseLabel");},_getPhaseText:function(){var p=this.getProperty("phase");if(this.getProperty("isDraft")){p="";}return new T({text:p,tooltip:this._oRB.getText("CTRL_PROCESSINDICATOR_ALT_PHASE_TOOLTIP",p)});},_getStatusLabel:function(){var S=this.getProperty("status");return new L({text:this._oRB.getText("CTRL_PROCESSINDICATOR_FLD_STATUS_LABEL"),tooltip:this._oRB.getText("CTRL_PROCESSINDICATOR_ALT_STATUS_TOOLTIP",S)}).addStyleClass("sapInoNoImageStatusLabel");},_getStatusText:function(){var S=this.getProperty("status");return new T({text:S,tooltip:this._oRB.getText("CTRL_PROCESSINDICATOR_ALT_STATUS_TOOLTIP",S)}).addStyleClass("sapInoNoImageStatusText");},_getStatusReasonLabel:function(){var S=this.getProperty("statusReason");return new L({text:"Reason:",tooltip:this._oRB.getText("CTRL_PROCESSINDICATOR_ALT_STATUS_TOOLTIP",S)}).addStyleClass("sapInoNoImageStatusLabel");},_getStatusReasonText:function(){var S=this.getProperty("statusReason");return new T({text:S,tooltip:this._oRB.getText("CTRL_PROCESSINDICATOR_ALT_STATUS_TOOLTIP",S)});},_getIdeaIdLabel:function(){var i=this.getProperty("ideaId");return new L({text:this._oRB.getText("CTRL_PROCESSINDICATOR_FLD_IDEA_LABEL"),tooltip:this._oRB.getText("CTRL_PROCESSINDICATOR_ALT_IDEA_TOOLTIP",i)}).addStyleClass("sapInoNoImageStatusLabel");},_getIdeaIdLink:function(){var t=this;var i=this.getProperty("ideaId");var A="_ideaIdLink";return new c({id:this.getId()+A,href:this.getProperty("ideaHref"),tooltip:this._oRB.getText("CTRL_PROCESSINDICATOR_ALT_IDEA_TOOLTIP",i),press:function(E){E.preventDefault();t.fireOpenIdea({ideaId:t.getProperty("ideaId")});}}).setText(i).addStyleClass("sapInoIdeaCardAccessibilityIdeaLink");},_getRespValueLabel:function(){var r=this.getProperty("respValue");return new L({text:this._oRB.getText("CTRL_PROCESSINDICATOR_FLD_RESP_LABEL"),tooltip:this._oRB.getText("CTRL_PROCESSINDICATOR_ALT_RESP_TOOLTIP",r)}).addStyleClass("sapInoNoImageStatusLabel");},_getRespValueText:function(){var r=this.getProperty("respValue");return new T({text:r,tooltip:this._oRB.getText("CTRL_PROCESSINDICATOR_ALT_RESP_TOOLTIP",r)});},_renderTopInfoText:function(r,o){r.renderControl(o._getIdeaId());r.renderControl(o._getResponsibility());},_renderInfoText:function(r,o,R){if(R&&!o.getProperty("isDraft")&&!!this.getProperty("phase")){r.renderControl(o._getPhase());}if((R||o.getProperty("isDraft"))&&!!this.getProperty("status")){r.renderControl(o._getStatus());}},_renderFollowButton:function(r,o){r.write("<div");r.write(">");var g=o.getAggregation("followButton");r.renderControl(g);r.write("</div>");},_renderContributorButton:function(r,o){var g=o.getAggregation("contributorButton");g.addStyleClass("sapInoIdeaCardBottomRibbonContent sapInoIdeaCardAccessibilityContributorButton");r.renderControl(g);},_renderDraftLabel:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardDraftLabel");r.writeClasses();r.write(">");var D=o._getDraftLabel();r.renderControl(D);r.write("</div>");},_renderIdeaSubmitter:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardIdeaSubmitter");r.writeClasses();r.write(">");var i=o._getIdeaSubmitter();r.renderControl(i);r.write("</div>");},_renderIdeaDescription:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardIdeaDescription");r.writeClasses();r.write(">");var i=o._getIdeaDescription();r.renderControl(i);r.write("</div>");},_renderIdeaMoreLink:function(r,o){r.write("<div");r.addClass("sapInoIdeaCardIdeaMoreLink");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoIdeaCardIdeaMoreLinkTooltip");r.writeAttributeEscaped("title",o._oRB.getText("CTRL_IDEACARD_ALT_IDEA_TOOLTIP",[this.getProperty("ideaName")]));r.writeClasses();r.write(">");var i=o._getIdeaMoreLink();r.renderControl(i);r.write("</div>");r.write("</div>");},_renderBottomRibbon:function(r,o,R){r.write("<div");r.addClass("sapInoIdeaCardRibbon");r.addClass("sapInoIdeaCardBottomRibbon");r.writeClasses();r.write(">");if(!R){var g=o.getAggregation("followButton");if(g){g.addStyleClass("sapInoIdeaCardAccessibilityVote");g.addStyleClass("sapInoIdeaCardBottomRibbonContent");r.renderControl(g);}r.renderControl(o._getCommentButton());o._renderContributorButton(r,o);}r.write("<div");r.addClass("sapInoIdeaCardBottomRibbonContent");r.writeClasses();r.write(">");if(R){r.renderControl(o._getFlipButton("Back"));}else{r.renderControl(o._getFlipButton());}r.write("</div>");r.renderControl(o._getIdeaReadButton());r.write("</div>");},_renderTopRibbon:function(r,o,R){r.write("<div");r.addClass("sapInoIdeaCardRibbon sapInoIdeaCardTopRibbon");r.writeClasses();var g=o.getProperty("color");if(g&&g.length===7){r.writeAttributeEscaped("style","background-color: "+g);}r.write(">");r.write("<span");r.addClass("sapInoIdeaCardAccessibilityText");r.addClass("sapUiInvisibleText");r.writeAttributeEscaped("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_IDEA_LINK",[this.getProperty("ideaName")]));r.writeClasses();r.write("></span>");r.write("<div");r.addClass("sapInoIdeaCardCampaignLink");if(!g){g="#FFFFFF";}r.addClass("sapInoIdeaCardCampaignTitle"+a.calculateTitleTextColor(g.substr(1,2),g.substr(3,2),g.substr(5,2)));r.writeClasses();r.write(">");r.write("<div");r.addClass("sapInoIdeaCardCampaignLinkTooltip");r.writeAttributeEscaped("title",o._oRB.getText("CTRL_CARD_ALT_CAMPAIGN_TOOLTIP"));r.writeClasses();r.write(">");if(R){r.renderControl(o._getCampaignLink("Back"));}else{r.renderControl(o._getCampaignLink());}r.write("</div>");r.write("</div>");r.write("</div>");},ontouchstart:function(E){E.setMarked();},ontap:function(E){this.firePress();},getFocusDomRef:function(){if(this._bIsFlipped){return this._getIdeaLink("Back").$();}return this._getIdeaLink().$();},onfocusin:function(E){if(!this._$AccessibilityText){this._$AccessibilityText=this.$().find(".sapInoIdeaCardAccessibilityText");}if(!E||!E.target||!E.target.className){this._$AccessibilityText.attr("title","");return;}if(E.target.className.indexOf("sapInoIdeaCardAccessibilityCampaignLink")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_CAMPAIGN_LINK",[this.getProperty("campaignName")]));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilityFlipButtonBack")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_FLIP_BACK"));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilityFlipButton")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_FLIP"));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilitySubmitter")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_SUBMITTER"));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilityIdeaLink")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_IDEA_LINK",[this.getProperty("ideaName")]));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilityMoreButton")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_MORE",[this.getProperty("ideaName")]));}else if(E.target.className.indexOf("sapInoIdeaCardAccessibilityVote")!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_VOTE",[this.getProperty("ideaName")]));}else if(E.target.className.indexOf('sapInoIdeaCardAccessibilityCommentButton')!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_COMMENT",[this.getProperty("ideaName")]));}else if(E.target.className.indexOf('sapInoIdeaCardAccessibilityContributorButton')!==-1){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_CONTRIBUTOR",[this.getProperty("ideaName")]));}else{var v=jQuery(E.target).closest(".sapInoIdeaCardAccessibilityVote");if(v&&v.length>0){this._$AccessibilityText.attr("title",this._oRB.getText("CTRL_IDEACARD_ALT_ACCESSIBILITY_TEXT_VOTE",[this.getProperty("ideaName")]));}}},_initTabs:function(){var o=this._getFlipButton();var g=this._getFlipButton("Back");o.addStyleClass("sapInoIdeaCardFlipButton");g.addStyleClass("sapInoIdeaCardFlipButton");var h=this.getAggregation("votePlaceholder");var i=this.getAggregation("followButton");var j=this.getAggregation("contributorButton");this._aFrontTabs=[];this._aFrontTabs.push(this._getCampaignLink().$()[0].id);this._aFrontTabs.push(this._getIdeaLink().$()[0].id);if(h.getEnabled()){var k=h.$().find(".starVote, button");if(k&&k.length>0){this._aFrontTabs.push(k[0].id);for(var l=1;l<k.length;l++){this._aFrontTabs.push(k[l].id);}}}if(i.getEnabled()){var m=i.$().find("button");if(m&&m.length){this._aFrontTabs.push(m[0].id);}}if(j.getEnabled()){var n=j.$().find('button');if(n&&n.length){this._aFrontTabs.push(n[0].id);}}this._aFrontTabs.push(this._getFlipButton().$()[0].id);this._aFrontTabs.push(this._getCommentButton().$()[0].id);this._aBackTabs=[];this._aBackTabs.push(this._getCampaignLink("Back").$()[0].id);this._aBackTabs.push(this._getIdeaLink("Back").$()[0].id);this._aBackTabs.push(this._getIdeaSubmitter().$()[0].id);this._aBackTabs.push(s(this._getIdeaMoreLink().$()[0].id));this._aBackTabs.push(this._getFlipButton("Back").$()[0].id);},_getTabs:function(){if(this._bIsFlipped){return this._aBackTabs;}return this._aFrontTabs;},_defaultOnKeyDown:function(E){if(C.prototype.onkeydown){C.prototype.onkeydown.apply(this,arguments);}},onkeydown:function(E){var t=this._getTabs();var u=this._incr;if(E.shiftKey||E.keyCode===jQuery.sap.KeyCodes.ARROW_UP||E.keyCode===jQuery.sap.KeyCodes.ARROW_LEFT){u=this._decr;}if(E.keyCode===jQuery.sap.KeyCodes.ESCAPE){this.getParent().focus();}else if(E.keyCode===jQuery.sap.KeyCodes.TAB||E.keyCode===jQuery.sap.KeyCodes.ARROW_DOWN||E.keyCode===jQuery.sap.KeyCodes.ARROW_RIGHT||E.keyCode===jQuery.sap.KeyCodes.ARROW_UP||E.keyCode===jQuery.sap.KeyCodes.ARROW_LEFT){var g=jQuery(":focus");var i=-1;if(g&&g.length>0){i=t.indexOf(g[0].id);if(i!==-1){i=u(i,t.length-1);this._focus(jQuery("#"+t[i]));E.preventDefault();E.stopPropagation();}else{this.getParent().focus();}}else{this.getParent().focus();}}else{this._defaultOnKeyDown(E);}},_incr:function(v,m){v++;if(v>m){return 0;}return v;},_decr:function(v,m){v--;if(v<0){return m;}return v;},_focus:function(E){if(jQuery.type(E.focus)==="function"){setTimeout(function(){E.focus();},0);}}});f.prototype.setIdeaDescription=function(v){this.setProperty("ideaDescription",v);this._getIdeaDescription().setContent("<span>"+(v||"")+"</span>");};f.prototype.setIdeaName=function(v){this.setProperty("ideaName",v);var i=this._getIdeaLink();if(i){i.setText(v);}i=this._getIdeaLink("Back");if(i){i.setText(v);}};f.prototype.setIdeaSubmittedAt=function(v){this.setProperty("ideaSubmittedAt",v);this._getIdeaSubmitter().setText(this._getIdeaSubmitterText());};f.prototype.setIdeaCreatedAt=function(v){this.setProperty("ideaCreatedAt",v);this._getIdeaSubmitter().setText(this._getIdeaSubmitterText());};f.prototype.setIdeaSubmitter=function(v){this.setProperty("ideaSubmitter",v);this._getIdeaSubmitter().setText(this._getIdeaSubmitterText());};return f;});
