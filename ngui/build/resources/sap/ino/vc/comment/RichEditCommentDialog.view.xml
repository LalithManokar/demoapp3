<mvc:View
    controllerName="sap.ino.vc.comment.RichEditCommentDialog"
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:u="sap.ui.unified">
	<Dialog
        id="richEditCommentDialog"
        class="sapInoRichEditCommentDialog"
        title="{parts:[{path:'view>/id'},{path:'view>/parentId'},{path:'view>/type'}],formatter:'.formatTitle'}"
        contentWidth="600px"
        contentHeight="600px"
        stretch="{= ${device>phone} ? true: false}">
		<VBox class="sapInoRichEditCommentDialogContent">
            <core:Fragment fragmentName="sap.ino.vc.comment.fragments.RichCommentReplyCtrl" type="XML" />  
			<Toolbar class="sapInoCommentToolBar">
				<ToolbarSpacer />
				<u:FileUploader id="commentAttachmentUploader" name="commentAttachmentUploader"   buttonOnly="true"
                    buttonText="{i18n>COMMENT_OBJECT_BTN_ATTACH}"  uploadUrl="{local>/ATTACHMENT_UPLOAD_URL}" 
                    uploadOnChange="true" sameFilenameAllowed="true" sendXHR="true" uploadProgress="richAttachmentMixinonUploadProgress"
                    uploadComplete="richAttachmentMixinonUploadComplete" change="richAttachmentMixinOnChange" uploadStart="richAttachmentMixinonBeforeUploadStarts"/>
			</Toolbar>
			<UploadCollection
	            id="commentAttachmentList"
	            multiple="true"
	            items="{ path : 'comment>/Attachments', sorter: [{ path: 'CREATED_AT', descending: true }], filters: { path: 'ROLE_TYPE_CODE', operator: 'EQ', value1: 'ATTACHMENT' }}"
	            showSeparators="true"
	            fileDeleted="richAttachmentMixinonFileDeleted"
	            uploadEnabled="true">
				<toolbar>
					<OverflowToolbar>
						<ToolbarSpacer />
					</OverflowToolbar>
				</toolbar>
				<items>
					<UploadCollectionItem
                  		documentId="{comment>ID}"
      		            fileName="{comment>FILE_NAME}"
      		            mimeType="{comment>MEDIA_TYPE}"
      		            thumbnailUrl="{ parts:[{path:'comment>MEDIA_TYPE'}, {path:'comment>ATTACHMENT_ID'}], formatter:'.formatter.previewUrl' }"
      		            url="{ path:'comment>ATTACHMENT_ID', formatter:'.formatter.downloadUrl' }"
      		            visibleEdit="false"
      		            visibleDelete="true" />
				</items>
			</UploadCollection>
		</VBox>
		<buttons>
			<Button text="{i18n>COMMENT_OBJECT_BTN_UPDATE}" visible="{=${view>/id}!==-1}" press="onUpdatePressed"/>
			<Button text="{i18n>COMMENT_OBJECT_BTN_DELETE}" visible="{=${view>/id}!==-1}" press="onDeletePressed">
				<customData>
					<core:CustomData  value="{view>/id}" />
					<core:CustomData  value="{view>/parentId}" />
				</customData>
			</Button>
			<Button text="{i18n>COMMENT_OBJECT_BTN_REPLY}" visible="{=${view>/id}===-1}" press="onReplyPressed"/>
			<Button text="{i18n>COMMENT_OBJECT_BTN_CANCEL}" press="onCancelPressed"/>
		</buttons>
	</Dialog>
</mvc:View>