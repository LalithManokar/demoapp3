<mvc:View
    controllerName="sap.ino.vc.home.RegisterApprovalList"
    xmlns="sap.m"
    xmlns:ino="sap.ino.controls"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
    <Page 
        id="registerapprovallistpage"
        enableScrolling="false">
        <customHeader>
            <ino:ColorBar 
                class="sapMBar" 
                design="Auto">
                <core:Fragment fragmentName="sap.ino.vc.commons.fragments.NavBackButton" type="XML" />
                <ToolbarSpacer/>
                <Label text="{i18n>REGISTER_APPR_LIST_TIT}"/>
                <ToolbarSpacer/>
                <core:Fragment fragmentName="sap.ino.vc.commons.fragments.RefreshButton" type="XML" />
                <core:Fragment fragmentName="sap.ino.vc.commons.fragments.FullScreenButton" type="XML" />
            </ino:ColorBar>
        </customHeader>
        <content>
                
                    <ScrollContainer
                        id="scrollContainer"
                        horizontal="false"
                        vertical="true"
                        height="100%"
                        class="sapInoScrollContainer sapInoObjectList">
                        <PullToRefresh
                            id="pullToRefresh"
                            visible="{device>/support/touch}"
                            refresh="onRefresh" />
                        <List   id="registerList"
                            showSeparators="Inner"
                            items="{path: 'data>/Registers', sorter:[{path: 'data>REGISTER_DATE', descending: true}], filters:[{path: 'IS_REGISTER_AUTO_APPROVE', operator: 'NE', value1: 1}]}"
                            noDataText="{i18n>REG_APPR_LIST_NO_DATA}"                      
                            growing="true" growingScrollToLoad="true" growingThreshold="10">
                            <items>
                                <CustomListItem class="sapInoRegisterListItem sapInoRegisterManageListItem sapInoRegApprList" visible="{data>REGISTER_STATUS, formatter: '.isVisabledForApprove'}" id="customlist">
                                    <FlexBox alignItems="Start" wrap="NoWrap" width="100%" height="100%">
                                        <items>
                                            <ino:ColorRibbon color="{data>COLOR_CODE}" class="sapInoRegisterListColor"/>
                                            <FlexBox
                                                            class="sapInoCampaignListLine"
                                                            alignItems="Stretch"
                                                            visible="{= !${device>/system/phone} }">
                                                <items>
                                                    <HBox class="sapInoRegListCamInfoContainer sapInoRegisterListSeparatorMargin">
                                                        <ino:Image
                                                                height="72px"
                                                                width="129px"                                                          
                                                                objectId="{data>CAMPAIGN_ID}"
                                                                objectName="{data>CAMP_SHORT_NAME}"
                                                                src="{{parts: [{path:'data>CAMPAIGN_IMAGE_ID'},{path:'data>CAMPAIGN_LIST_IMAGE_ID'}], formatter: '.formatter.campaignListImageURL'}}"
                                                                press="onCampaignsListItemPress"
                                                                class="sapUiTinyMarginBeginEnd sapUiTinyMarginTopBottom sapInoIdeaListImageBorder sapInoIdeaManageListImage sapInoRegisterApprovalListImage"></ino:Image>
                                                        <VBox class="sapUiTinyMarginBegin sapUiTinyMarginBottom" justifyContent="Center">
                                                            <Link 
                                                                class="sapUiTinyMarginBottom sapInoCampaignListTitle" 
                                                                text="{data>CAMP_SHORT_NAME}" 
                                                                emphasized="true" 
                                                                wrapping="false" 
                                                                press="onCampaignsListItemPress"/>
                                                            <VBox>
                                                                    <FormattedText 
                                                                visible="{path: 'data>IDEA_SUBMIT_START', formatter: '.formatter.isFutureDate'}"
                                                                htmlText="{path: 'data>IDEA_SUBMIT_START', formatter: '.formatter.submissionStartsInDays'}" 
                                                                class="sapInoCampaignListSmallFont sapInoCampaignListLineDateInfo"/>
                                                                    <FormattedText 
                                                                visible="{=!${path: 'data>IDEA_SUBMIT_START', formatter: '.formatter.isFutureDate'} }"
                                                                htmlText="{path: 'data>IDEA_SUBMIT_END', formatter: '.formatter.submissionDaysLeft'}" 
                                                                class="sapInoCampaignListSmallFont sapInoCampaignListLineDateInfo"/>
                                                                    <FormattedText 
                                                                visible="{= !${path: 'data>CAMPAIGN_START', formatter: '.formatter.isFutureDate'} }"
                                                                htmlText="{path: 'data>CAMPAIGN_END', formatter: '.formatter.daysLeft'}" 
                                                                class="sapInoCampaignListSmallFont sapInoCampaignListLineDateInfo"/>
                                                                    <FormattedText 
                                                                visible="{path: 'data>CAMPAIGN_START', formatter: '.formatter.isFutureDate'}"
                                                                htmlText="{path: 'data>CAMPAIGN_START', formatter: '.formatter.campaignStartsInDays'}" 
                                                                class="sapInoCampaignListSmallFont sapInoCampaignListLineDateInfo"/>
                                                                <core:ExtensionPoint name="extension_line_grid1"/>
                                                            </VBox>
                                                        </VBox>
                                                    </HBox>
                                                    <VBox 
                                                        alignItems="End" 
                                                        justifyContent="Center" 
                                                        class="sapUiSmallMarginEnd">
                                                        <HBox alignItems="Center" class="sapInoRegisterUserBox">
                                                            <ino:IdentityCard 
                                                                identityId="{data>REQUESTER_ID}" 
                                                                userName="{data>REQUESTER_NAME}"
                                                                userOrganization="{data>REQUESTER_ORGANIZATION}"
                                                                userImageUrl="{ path: 'data>IDENTITY_IMAGE_ID', formatter: '.formatter.userImage' }"
                                                                identityPress="onOpenIdentityQuickView"
                                                                imageSize="M"                                                                                     
                                                            />
                                                        </HBox>
                                                    </VBox>
                                                    <VBox 
                                                        alignItems="End" 
                                                        justifyContent="Center" 
                                                        class="sapUiSmallMarginEnd sapInoRegApprovalListTimeInfo ">
                                                        <VBox alignItems="Center" justifyContent="Center" class="sapInoIdeaManageListFollowUpContent sapInoRegisterTimeBox">
                                                            <core:Icon  src="sap-icon://past" class="sapUiTinyMarginBottom" app:exportIgnore="true"/>
                                                            <Label class="sapInoIdeaManageListSmallFont" text="{i18n>REGISTER_DATE_LABEL}" />
                                                            <Text  class="sapInoIdeaManageListSmallFont"  text="{ path: 'data>REGISTER_DATE', type: 'sap.ui.model.type.DateTime', formatOptions: { relative: false }}" app:exportRaw="true"/>
                                                            <core:ExtensionPoint name="extension_line_grid2"/>
                                                        </VBox>
                                                    </VBox>
                                                    <HBox class="sapInoRegisterActionBox">
                                                        <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapInoIdeaManageListActions">
                                                            <Button 
                                                                type="Transparent" 
                                                                icon="sap-icon://accept"                                                           
                                                                press="Approved"
                                                                tooltip="{i18n>REG_APPR_BTN_ACCEPT_BUTTON}"
                                                                class="sapInoPinBtn"/>
                                                            <Button 
                                                                type="Transparent" 
                                                                icon="sap-icon://decline"                                                       
                                                                 press="Rejected"
                                                                 tooltip="{i18n>REG_APPR_BTN_REJECT_BUTTON}"
                                                                class="sapInoPinBtn sapUiSmallMarginBeginEnd"/>
                                                            <CheckBox  class="sapInoIdeaManageListSelection" select="onApprovalListSelectionChange"/>
                                                        </HBox>
                                                        <core:ExtensionPoint name="extension_line_grid5"/>
                                                    </HBox>
                                                
                                                </items>
                                            </FlexBox>

                                            <FlexBox  alignItems="Stretch" visible="{device>/system/phone}">

                                                   <VBox class="sapUiTinyMarginBeginEnd sapInoIdeaManageListText" justifyContent="Center">
                                                            <Link id="ideaLink" class="sapUiTinyMarginTopBottom" wrapping="true" text="{data>CAMP_SHORT_NAME}"  emphasized="true"  press="onCampaignsListItemPress"
                                                                href="{data>CAMPAIGN_ID, formatter: '.formatter.campaignNavigationLink'}"/>
                                                           
                                                            <HBox class="sapInoIdeaManageListAuthor">
                                                                <Label text="{i18n>REGISTER_APPR_LIST_FLD_REQUESTER}"  class="sapInoIdeaManageListMarginEnd4 sapInoIdeaManageListSmallFont"/>
                                                                <Link text="{data>REQUESTER_NAME}"  class="sapInoIdeaManageListSmallFont" />
                                                            </HBox>
                                                             <HBox >
                                                                <Label  text="{i18n>REGISTER_APPR_LIST_FLD_ORGANIZATION}" class="sapInoIdeaManageListSmallFont sapInoIdeaManageListMarginEnd4"/>
                                                                <Link text="{data>REQUESTER_ORGANIZATION}" class="sapInoIdeaManageListSmallFont"/>
                                                            </HBox>

                                                    </VBox>

                                                    <HBox class="sapInoRegisterActionBox">
                                                        <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapInoIdeaManageListActions">
                                                            <Button 
                                                                type="Transparent" 
                                                                icon="sap-icon://accept"                                                           
                                                                press="Approved"
                                                                tooltip="{i18n>REG_APPR_BTN_ACCEPT_BUTTON}"
                                                                class="sapInoPinBtn"/>
                                                            <Button 
                                                                type="Transparent" 
                                                                icon="sap-icon://decline"                                                       
                                                                 press="Rejected"
                                                                 tooltip="{i18n>REG_APPR_BTN_REJECT_BUTTON}"
                                                                class="sapInoPinBtn sapUiSmallMarginBeginEnd"/>
                                                        </HBox>
                                                        <core:ExtensionPoint name="extension_line_grid5"/>
                                                    </HBox>
                                            </FlexBox>            

                                        </items>
                                    </FlexBox>
                                    <core:InvisibleText
                                        class="sapInoItemAriaLabel"
                                        text="{parts: [{path: 'data>CAMP_NAME'}, 
                                                       {path: 'data>CAMPAIGN_END'},
                                                       {path: 'data>IDEA_SUBMIT_END'},
                                                       {path: 'data>REQUESTER_NAME'},
                                                       {path: 'data>REQUESTER_ORGANIZATION'},
                                                       {path: 'data>REGISTER_DATE'}
                                                       ], formatter: '.formatter.registerAccessibilityApprovalListItem'}">
                                    </core:InvisibleText>
                                </CustomListItem>
                            </items>
                        </List>
                    </ScrollContainer>
                
        </content>
        <footer>
            <core:Fragment fragmentName="sap.ino.vc.home.fragments.MassRegApprToolbar" type="XML" />
        </footer>
    </Page>
</mvc:View>