<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:ino="sap.ino.controls"
	xmlns:l="sap.ui.layout">
	<Panel width="auto" class="sapInoHomeTitledPanel sapInoTopPanelHiddenfooter sapInoHomepageBorder">
		<headerToolbar>
			<Toolbar height="3rem" class="sapInoHomeTitledPanelHeader" active="true" press="onNavigateToFeedList" tooltip="{i18n>CAMPAIGN_HOME_PANEL_FEEDS_NAVIGATE}">
				<Title id="panelTitle" text="{i18n>CAMPAIGN_HOME_PANEL_FEED}" />
				<ToolbarSpacer />
				<Button icon="sap-icon://navigation-right-arrow" press="onNavigateToFeedList" tooltip="{i18n>CAMPAIGN_HOME_PANEL_FEEDS_NAVIGATE}"/>
			</Toolbar>
		</headerToolbar>
		<content>
			<List   id="feedList"
                showSeparators="Inner"
                items="{path: 'data>/Feeds', sorter:[{path: 'EVENT_AT', descending: true}], length: 4}"
                noDataText="{i18n>FEED_LIST_NO_DATA}"
                class="sapInoFeedList">
				<items>
					<CustomListItem class="sapInoFeedListItem">
						<content>
							<FlexBox alignItems="Start" width="100%" height="100%">
								<items>
									<VBox width="100%" class="sapUiSmallMarginTopBottom" >
										<HBox width="100%">
											<ino:IdentityCard
                                                visible="{= !${device>/system/phone} }"
                                                userImageUrl="{ path: 'data>ACTOR_IMAGE_ID', formatter: '.formatter.userImage' }"
                                                identityId="{data>ACTOR_ID}"
                                                identityPress="onOpenIdentityQuickView"
                                                imageSize="S" />
											<VBox height="100%" wrap="Wrap" class="sapInoFeedListItemBox">
												<l:HorizontalLayout allowWrapping="true" class="sapInoFeedListItemTxt sapUiSmallMarginBottom">
													<l:content>
														<Text class="sapUiTinyMarginEnd" visible="{= ${data>ACTOR_ID} === 0}" text="{i18n>IDEA_OBJECT_TIT_IDEA_Anonymity}" />
														<Link visible="{parts:[{path :'data>FEED_CODE'},{path:'data>ACTOR_ID'}],formatter: '.formatter.feedLink'}" text="{data>ACTOR_NAME}" press="onOpenActor" class="sapUiTinyMarginEnd"/>
														<core:HTML 
                                                            content="{path: 'data>', formatter:'.formatter.feedMsgFormatter'}" 
                                                            sanitizeContent="true" 
                                                            afterRendering="_onAfterRendering"/>
													</l:content>
												</l:HorizontalLayout>
												<Label text="{path: 'data>EVENT_AT', type: 'sap.ui.model.type.DateTime', formatOptions: { relative: false }}"
                                                    class="sapInoTimestamp"/>
												<core:HTML preferDOM="false" sanitizeContent="true" 
                                                    visible="{= ${data>INVOLVED_OBJ_TYPE_CODE} === 'COMMENT' &amp;&amp; !!${data>CONTENT}}" 
                                                    content="{path:'data>CONTENT', formatter:'.formatter.wrapToHTML'}" 
                                                    class="sapUiSmallMarginTop" />
												<l:HorizontalLayout class="sapUiSmallMarginTop" />
											</VBox>
										</HBox>
									</VBox>
								</items>
							</FlexBox>
						</content>
					</CustomListItem>
				</items>
			</List>
		</content>
	</Panel>
</core:FragmentDefinition>