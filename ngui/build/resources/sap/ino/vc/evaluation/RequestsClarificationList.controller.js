sap.ui.define(["sap/ino/vc/commons/BaseController","sap/ino/commons/formatters/BaseFormatter","sap/ino/vc/commons/TopLevelPageFacet","sap/m/MessageToast"],function(C,B,T,M){"use strict";return C.extend("sap.ino.vc.evaluation.RequestsClarificationList",jQuery.extend({},T,{formatter:B,onBeforeRendering:function(){this.setViewProperty("/USER_IMAGE_ID",this.getOwnerComponent().getCurrentUserImageId());},onClarificationSubmit:function(e){var c=this;var E=c.getModel("object");if(!E){return;}var n=e.getSource().getCustomData()[0].getValue();var a=e.getSource().getCustomData()[1].getValue();var s=e.getSource().getProperty("value");var A=E.sendClarification({EVAL_REQ_ITEM_ID:n,TO_IDENTITY:a,CONTENT:s});if(A){A.done(function(){M.show(c.getText("EVAL_REQ_MSG_CLARIFICATION_SUCCESS"));});A.fail(function(o){if(o.MESSAGES&&o.MESSAGES.length>0){M.show(c.getText(o.MESSAGES[0].MESSAGE_TEXT));}});}},onOpenCreatorInFirstClarification:function(e){this._onOpenCreator(e,"CREATED_BY_ID");},onOpenCreatorInClarification:function(e){this._onOpenCreator(e,"CREATED_BY_ID");},_onOpenCreator:function(e,p){var s=e.getSource();var d=e.getParameter("domRef");var c=s.getBindingContext("object");var i=c.getProperty(p);if(d){var r=sap.ui.getCore().byId(d.id);}if(!this.oIdentityCardView){this.oIdentityCardView=sap.ui.xmlview({viewName:"sap.ino.vc.iam.IdentityCard"});this.getView().addDependent(this.oIdentityCardView);}if(r){this.oIdentityCardView.getController().open(r,i);}else{this.oIdentityCardView.getController().open(s,i);}}}));});
