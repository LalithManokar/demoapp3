sap.ui.define(["sap/ino/vc/commons/BaseController","sap/ino/commons/application/Configuration","sap/ui/model/json/JSONModel","sap/ino/vc/commons/TopLevelPageFacet","sap/ui/Device","sap/ino/vc/commons/mixins/ClipboardMixin","sap/ino/vc/commons/mixins/IdentityQuickviewMixin","sap/ino/commons/formatters/ObjectListFormatter"],function(B,C,J,T,D,a,I,O){"use strict";var l={"newIdeas":{sPath:"data>/MyIdeaMediumCommunity"},"newStatus":{sPath:"data>/IdeaMediumCommunity"},"newComments":{sPath:"data>/IdeaMediumSearchParams(searchToken='',tagsToken='',tagsToken1='',tagsToken2='',tagsToken3='',tagsToken4='',filterName='completedIdeas',filterBackoffice=0,c1='',o1=-2,v1='',c2='',o2=-1,v2='',c3='',o3=-1,v3='')/Results"}};var b=[{ID:36338,CREATED_AT:"/Date(1566541324522)/",CREATED_BY_ID:814053,CHANGED_AT:"/Date(1566541324522)/",CHANGED_BY_ID:814053,OBJECT_ID:314794,COMMENT:"Can you demo the POC to us.",PARENT_ID:null,CHANGED_BY_NAME:"Allen Zhang",CHANGED_BY_EMAIL:"allen.zhang07@sap.com",CHANGED_BY_PHONE:null,CHANGED_BY_MOBILE:"1",CHANGED_BY_OFFICE:null,CHANGED_BY_IMAGE_ID:null,CREATED_BY_NAME:"Allen Zhang",CREATED_BY_EMAIL:"allen.zhang07@sap.com",CREATED_BY_PHONE:null,CREATED_BY_MOBILE:"1",CREATED_BY_OFFICE:null,CREATED_BY_IMAGE_ID:null,HAS_ATTACHMENTS:0,HAS_REPLIES:1,CAN_UPDATE:1,CAN_DELETE:1,SOURCE_ID:null,STATUS:0,ChildrenComments:[{ID:36338,CREATED_AT:"/Date(1566541324522)/",CREATED_BY_ID:814053,CHANGED_AT:"/Date(1566541324522)/",CHANGED_BY_ID:814053,OBJECT_ID:314794,COMMENT:"Can you demo the POC to us.",PARENT_ID:null,CHANGED_BY_NAME:"Allen Zhang",CHANGED_BY_EMAIL:"allen.zhang07@sap.com",CHANGED_BY_PHONE:null,CHANGED_BY_MOBILE:"1",CHANGED_BY_OFFICE:null,CHANGED_BY_IMAGE_ID:null,CREATED_BY_NAME:"Allen Zhang",CREATED_BY_EMAIL:"allen.zhang07@sap.com",CREATED_BY_PHONE:null,CREATED_BY_MOBILE:"1",CREATED_BY_OFFICE:null,CREATED_BY_IMAGE_ID:null,HAS_ATTACHMENTS:0,HAS_REPLIES:1,CAN_UPDATE:1,CAN_DELETE:1,SOURCE_ID:null,STATUS:0}]}];return B.extend("sap.ino.vc.notice.NoticeList",jQuery.extend({},T,a,I,{routes:["noticelist"],formatter:jQuery.extend({},O),view:{"showCommentDialogBtn":false},onInit:function(){B.prototype.onInit.apply(this,arguments);this.oViewModel=this.getModel("view");this.oViewModel.setData(this.view,true);},onRouteMatched:function(){this.bindViewData();},onItemPress:function(e){var i=e.getSource();var c=i.getBindingContext("data");if(c){this.navigateTo("idea-display",{id:c.getProperty("ID")});}},onNoticeListTypeSelect:function(e){this._sIdeaViewKey=e.getParameter("key");this.onSwitchButtonStyle(e);if(this._sIdeaViewKey==="newComments"){this.setViewProperty("/showCommentDialogBtn",true);}else{this.setViewProperty("/showCommentDialogBtn",false);}this._bindIdeas(this._sIdeaViewKey);},bindViewData:function(){var i;i=this.byId("sapInoNoticeUpdateButtons").getSelectedKey();this._sIdeaViewKey=i||Object.keys(l)[0];this._bindIdeas(this._sIdeaViewKey);},_bindIdeas:function(k){var d=C.getSystemSetting("sap.ino.config.DISABLE_IDEA_IMAGE")*1||C.getSystemSetting("sap.ino.config.DISABLE_IDEA_IMAGE_HIDE_PHASE_BAR")*1;var t=Number(d)?this.getFragment("sap.ino.vc.notice.fragments.NoticeListItemNoImage"):this.getFragment("sap.ino.vc.notice.fragments.NoticeListItem");var o={path:l[k].sPath,template:t};var c=this;var L=this.byId("noticeIdeaList");L.bindItems(o);L.attachEventOnce("updateFinished",function(e){c.onResizeLayoutChange(null,c._sCurrentLayout);});},onSwitchButtonStyle:function(e){var s=e.getSource();var i=s.getItems();var k=s.getSelectedKey();var c,p;jQuery.each(i,function(d,o){if(o.getKey()===k){o.setDisplayNotice(false);o.setTextVisible(true);c=o.getIcon();o.setIcon(c+"-selected");}else{o.setDisplayNotice(true);o.setTextVisible(false);c=o.getIcon();p=c.indexOf("-selected");if(p>0){o.setIcon(c.substr(0,p));}}});},openCommentDialog:function(e){if(!this._oCommentDialogPopover){this._oCommentDialogPopover=this.createFragment("sap.ino.vc.notice.fragments.NoticeCommentDialog");this.getView().addDependent(this._oCommentDialogPopover);}if(!this._oCommentDialogPopover.isOpen()){this._oCommentDialogPopover.setModel(new J(e.getSource().getBindingContext("data").getObject()),"CommentData");this._oCommentDialogPopover.setModel(new J(b),"IdeaComment");this._oCommentDialogPopover.openBy(e.getSource());}else{this.closeNotifications();}},closeNotifications:function(){if(this._oCommentDialogPopover&&this._oCommentDialogPopover.isOpen()){this._oCommentDialogPopover.close();}}}));});
