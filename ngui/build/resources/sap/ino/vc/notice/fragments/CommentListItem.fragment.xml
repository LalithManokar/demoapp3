<core:FragmentDefinition
	xmlns:core="sap.ui.core"
	xmlns="sap.m"
	xmlns:l="sap.ui.layout"
	xmlns:u="sap.ui.unified"
	xmlns:ino="sap.ino.controls"
	xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
	<HBox width="100%">
		<ino:IdentityCard
            visible="{= !!${IdeaComment>CHANGED_BY_ID} &amp;&amp;!${device>/system/phone} }"
            userImageUrl="{ path: 'IdeaComment>CHANGED_BY_IMAGE_ID', formatter: '.formatter.userImage' }"
            identityId="{IdeaComment>CHANGED_BY_ID}"
            identityPress="richCommentMixinOnUserPressed"
            imageSize="S" />
         <VBox height="100%"  width="100%">   
            <Link class="sapInoNewIdeaUserText sapUiSmallMarginTop" text="{IdeaComment>CHANGED_BY_NAME}"/>
            <ino:LabelledIcon
    	        iconUrl="sap-icon://customer-history"
    	        class="sapUiTinyMarginBegin"
    	        label="{path: 'IdeaComment>CHANGED_AT', formatter: '.formatter.toRelativeDate'}"
    	        tooltip="{i18n>COMMON_EXP_CHANGE_DATE}"/>
    	    <Text text="{IdeaComment>COMMENT}" class = "sapUiSmallMarginTop sapUiSmallMarginBegin" />
    	    <Button icon="sap-icon://response" press="richCommentMixinOnReply" type="Transparent" visible="{= ${object>/STATUS_CODE} !=='sap.ino.config.MERGED' }">
    			<customData>
    				<core:CustomData value="{IdeaComment>ID}" />
    			</customData>
    		</Button>
    		<List
                showSeparators="Inner" 
                items="{path: 'IdeaComment>ChildrenComments', sorter:[{path: 'CREATED_AT', descending: false}], templateShareable:'false'}"
                backgroudDesign = "Solid"
                inset="true"
                growing="true"
                growingTriggerText="More Replies"
                growingThreshold="3"    
                enableBusyIndicator="true"
                rememberSelections = "true"
                visible="{= ${IdeaComment>HAS_REPLIES} > 0}"
                class="sapInoNoticeCommentChildernList"
                >
    			<items>
    				<CustomListItem class="sapInoNoticeCommentChildernItem">
    					<content>
    						<core:Fragment fragmentName="sap.ino.vc.notice.fragments.CommentChildrenListItem" type="XML" />
    					</content>
    				</CustomListItem>
    			</items>
    		</List>
		</VBox>
		<customData>
			<core:CustomData 
                key="style-manager-class" 
                value="{parts:[{path:'view>/IDEA_COMMENT'},{path:'IdeaComment>CREATED_BY_ID'},{path:'object>/Coach'},{path:'object>/CampaignManagers'}],formatter:'.formatter.setMgrCoachBackGroundColor'}" 
                writeToDom="true"/>
		</customData>
	</HBox>
</core:FragmentDefinition>