<mvc:View
    controllerName="sap.ino.vc.idea.ModifyRewardList"
	xmlns="sap.m"
	xmlns:l="sap.ui.layout"
	xmlns:t="sap.ui.table"
	xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc">
	<t:Table
        id="ideaRewardTable"
        selectionMode="None"
        class="sapInoRewardDialogList"
        enableBusyIndicator="true"
        rows="{object>/Rewards}">
		<t:toolbar>
			<Toolbar class="sapInoRewardToolBarTitle">
				<VBox>
					<Link text="{object>/IDEA_NAME}" href="{path:'object>/IDEA_ID', formatter:'.formatter.ideaNavigationLink'}" wrapping="true" visible="{= ${object>/IDEA_NAME} ? true : false }"/>
					<HBox>
						<Label text="{i18n>IDEA_OBJECT_TIT_PHASE}:&#xA0;"/>
						<Label text="{path: 'object>/IDEA_PHASE_CODE', formatter: '.formatter.ideaPhase'}" />
					</HBox>
				</VBox>
			</Toolbar>
		</t:toolbar>
		<t:columns>
			<t:Column width="20%">
				<Label text="{i18n>IDEA_CREATE_REWARD_FLD_COLUMN_AUTHOR}" />
				<t:template>
					<Text text="{object>EMPLOYEE_NAME}"></Text>
				</t:template>
			</t:Column>
			<t:Column width="20%">
				<Label text="{i18n>IDEA_CREATE_REWARD_FLD_COLUMN_CONTRIBUTION_SHARE}" />
				<t:template>
					<Text text="{path: 'object>CONTRIBUTION_SHARE', formatter: '.rewardShareFormatter'}"></Text>
				</t:template>
			</t:Column>
			<t:Column width="20%" visible="{=${object>/STATUS_CODE} === 'sap.ino.config.REWARD_DRAFT'}">
				<Label text="{i18n>IDEA_CREATE_REWARD_FLD_COLUMN_AMOUNT}{=!${object>/REWARD_UNIT_TEXT} ? '' : '(' }{object>/REWARD_UNIT_TEXT}{=!${object>/REWARD_UNIT_TEXT} ? '' : ')' }" />
				<t:template>
					<Input
					    visible="{=!!${object>EMPLOYEE_NAME}}"
					    class="rewardAmount"
						type="text"
						value="{path:'object>REWARD_AMOUNT',type:'sap.ui.model.type.Integer', constraints:{minimum:0,maximum:999999999999}}" 
						liveChange="onRewardAmoutChange">
						<customData>
							<core:CustomData  key="Id" value="{object>AUTHOR_ID}" />
						</customData>
					</Input>
				</t:template>
			</t:Column>
			<t:Column width="20%"  visible="{=${object>/STATUS_CODE} !== 'sap.ino.config.REWARD_DRAFT'}" >
				<Label text="{i18n>IDEA_CREATE_REWARD_FLD_COLUMN_AMOUNT}{=!${object>/REWARD_UNIT_TEXT} ? '' : '(' }{object>/REWARD_UNIT_TEXT}{=!${object>/REWARD_UNIT_TEXT} ? '' : ')' }" />
				<t:template>
					<Text text="{path:'object>REWARD_AMOUNT'}"></Text>
				</t:template>
			</t:Column>
			<t:Column width="20%">
				<Label text="{i18n>IDEA_CREATE_REWARD_FLD_COLUMN_REWARD_SHARE}" />
				<t:template>
					<Text text="{path: 'object>REWARD_SHARE', formatter: '.rewardShareFormatter'}"></Text>
				</t:template>
			</t:Column>
		</t:columns>
		<t:footer>
			<l:Grid defaultSpan="XL6 L6 M6 S6">
				<Label text="{i18n>IDEA_CREATE_REWARD_FLD_TXT_REWARD_TOTAL}" />
				<Label text="{path:'object>/REWARD_AMOUNT_TOTAL'}{=!${object>/REWARD_UNIT_TEXT} ? '' : ' ' }{object>/REWARD_UNIT_TEXT}" />
			</l:Grid>
		</t:footer>
	</t:Table>
	<Page>
		<footer>
			<OverflowToolbar>
				<layoutData>
					<l:GridData span="XL12 L12 M12 S12" />
				</layoutData>
				<content>
					<core:Fragment fragmentName="sap.ino.vc.commons.fragments.MessageLog" type="XML" />
					<ToolbarSpacer/>
					<Button
        			    visible="{= ${object>/property/actions/executeStatusTransition/enabled} &amp;&amp; (${object>/STATUS_CODE} === 'sap.ino.config.REWARD_PUB_AUTHOR' || ${object>/STATUS_CODE} === 'sap.ino.config.REWARD_PUB_COMMUNITY') }"
                        id="rewardsBtnUnPublish"
                        press="onRewardsBtnUnPublish"
                        type="Accept"
                        text="{i18n>REWARDS_BTN_UNPUBLISH}"/>
					<Button
        			    visible="{= ${object>/property/actions/executeStatusTransition/enabled} &amp;&amp; ${object>/STATUS_CODE} === 'sap.ino.config.REWARD_SUBMITTED' }"
                        id="rewardsBtnPublishAuthor"
                        press="onRewardsBtnPublishAuthor"
                        type="Accept"
                        text="{i18n>REWARDS_BTN_PUBLISH_TO_AUTHOR}"/>
					<Button
        			    visible="{= ${object>/property/actions/executeStatusTransition/enabled} &amp;&amp; (${object>/STATUS_CODE} === 'sap.ino.config.REWARD_SUBMITTED' || ${object>/STATUS_CODE} === 'sap.ino.config.REWARD_PUB_AUTHOR')}"
                        id="rewardsBtnPublishCommunity"
                        press="onRewardsBtnPublishCommunity"
                        type="Accept"
                        text="{i18n>REWARDS_BTN_PUBLISH_TO_COMMUNITY}"/>
					<Button
        			    visible="{= ${object>/STATUS_CODE} === 'sap.ino.config.REWARD_DRAFT' }"
                        id="createRewardSubmitButton"
                        press="onSave"
                        type="Accept"
                        text="{i18n>BTN_SAVE}"/>
					<Button 
        			    visible="{= ${object>/STATUS_CODE} !== 'sap.ino.config.REWARD_DRAFT' }"
        			    enabled="{object>/property/actions/del/enabled}"
                        type="Reject"
                        id="deleteBtn"
                        text="{i18n>BTN_DEL}"
                        press="onRewardDialogDel"/>
					<Button
                        id="createRewardCancelButton"
                        press="onRewardDialogCancel"
                        type="default"
                        text="{=${object>/STATUS_CODE} === 'sap.ino.config.REWARD_DRAFT' ? ${i18n>BTN_CANCEL} : ${i18n>BTN_CLOSE}}"/>
				</content>
			</OverflowToolbar>
		</footer>
	</Page>
</mvc:View>