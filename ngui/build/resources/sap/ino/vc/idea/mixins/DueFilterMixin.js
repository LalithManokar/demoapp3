sap.ui.define(["sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/ValueState","sap/ui/core/format/DateFormat"],function(F,a,V,D){var K="FOLLOW_UP_DATE";var f={from:undefined,to:undefined};var b=D.getInstance({pattern:"YYYY-MM-dd"});function v(e,d){if(!e.getParameter("valid")){e.getSource().setValueState(V.Error);return false;}e.getSource().setValueState(V.None);var s=b.format(e.getSource().getDateValue());if(d&&f.to&&s>f.to){e.getSource().setValueState(V.Error);return false;}if(!d&&f.from&&s<f.from){e.getSource().setValueState(V.Error);return false;}return true;}var c=function(){throw"Mixin may not be instantiated directly";};c.hasDueFromFilter=function(){return!!f.from;};c.hasDueToFilter=function(){return!!f.to;};c.hasDueFilter=function(){return this.hasDueFromFilter()||this.hasDueToFilter();};c.getDueFilter=function(){if(f.from&&f.to){return new F({filters:[new F({filters:[new F(K,a.EQ,b.parse(f.from)),new F(K,a.GE,b.parse(f.from))],and:false}),new F({filters:[new F(K,a.EQ,b.parse(f.to)),new F(K,a.LE,b.parse(f.to))],and:false})],and:true});}if(f.from){return new F(K,a.EQ,b.parse(f.from));}if(f.to){return new F(K,a.EQ,b.parse(f.to));}return new F(K,a.EQ,'');};c.setDueFrom=function(e){if(!v(e,true)){e.getSource().setValueStateText(this.getText("LIST_TIT_FILTER_DUEFROM_GT_DUETO"));this.setFilterItem("/IsValidDueFrom",false);return;}var d=b.format(e.getSource().getDateValue());this.setFilterItem("/DueFrom",d);this.setFilterItem("/IsValidDueFrom",true);f.from=d;};c.setDueTo=function(e){if(!v(e,false)){e.getSource().setValueStateText(this.getText("LIST_TIT_FILTER_DUEFROM_GT_DUETO"));this.setFilterItem("/IsValidDueTo",false);return;}var d=b.format(e.getSource().getDateValue());this.setFilterItem("/DueTo",d);this.setFilterItem("/IsValidDueTo",true);f.to=d;};c.setDueFromValue=function(o){var d="";if(o){d=b.format(b.parse(o));}this.setFilterItem("/DueFrom",d);f.from=d;};c.setDueToValue=function(o){var d="";if(o){d=b.format(b.parse(o));}this.setFilterItem("/DueTo",d);f.to=d;};c.restDue=function(){f={from:undefined,to:undefined};this.setFilterItem("/DueFrom",undefined);this.setFilterItem("/DueTo",undefined);};c.clearDueValueState=function(){var C=[this.byId("dpDue"),this.byId("dpDueTo")];jQuery.each(C,function(i,d){d.setValueState(V.None);});};return c;});
