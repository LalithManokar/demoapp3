<mvc:View
    controllerName="sap.ino.vc.idea.Votes"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:core="sap.ui.core"
	xmlns:format="sap.ui.core.format"
	xmlns:l="sap.ui.layout"
	xmlns:ino="sap.ino.controls"
    displayBlock="true"
	xmlns:data="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
	<List
        showSeparators="Inner"
        items="{path : 'data>Votes', sorter:[{path: 'CHANGED_AT', descending: true}]}"
        id="voteList"
        class="sapInoIdeaVotesList"
        visible="{= ${data>VOTED_BY_GROUP} ? false : true}"
        noDataText="{i18n>IDEA_VOTE_NO_DATA}">
		<items>
			<CustomListItem class="ideaActivityListItem">
				<FlexBox alignItems="Start" wrap="NoWrap" width="100%" height="100%">
					<items>
						<VBox width="100%" >
							<l:Grid position="Left" hSpacing="0" width="100%">
								<HBox>
									<layoutData>
										<l:GridData span="XL3 L3 M5 S12"/>
									</layoutData>
									<ino:IdentityCard
                                        visible="{= ${object>PUBLIC_VOTE} ? true : false}"
                                        userImageUrl="{ path: 'data>IDENTITY_IMAGE_ID', formatter: '.formatter.userImage' }"
                                        identityId="{data>USER_ID}"
                                        identityPress="onOpenIdentityQuickView"
                                        imageSize="M"/>
                                    <VBox height="100%" wrap="Wrap" class="sapInoIdeaVoteBoxIdentity" 
							            visible="{= ${object>PUBLIC_VOTE} ? true : false}">
										<Link 
            							    text="{data>NAME}" 
            							    emphasized="true" 
            							    press="OnUserPressed"
            							    wrapping="true"/>
										<Text text="{data>COMPANY}" wrapping="true"/>
									</VBox>    
									<ino:IdentityCard 
                                        visible="{= !${object>PUBLIC_VOTE} ? true : false}"
                                        imageSize="M"/>
									<VBox height="100%" wrap="Wrap" class="sapInoIdeaVoteBoxIdentity" 
							            visible="{= !${object>PUBLIC_VOTE} ? true : false}">
										<Text text="{i18n>IDEA_VOTE_LIST_ANONYMOUS_USER}" wrapping="false"/>
									</VBox>
								</HBox>
								<VBox wrap="Wrap" class="sapInoIdeaVoteBoxVote" alignItems="Left">
									<layoutData>
										<l:GridData span="XL2 L2 M5 S12"/>
									</layoutData>
									<ino:Vote
    						        visible="true"
                                    enabled="false"
    						        objectId="{object>ID}"
    						        voteId="{data>ID}"
    						        tooltip="{parts: [{path: 'object>VOTE_TYPE_TYPE_CODE'},
        						 	                  {path: 'object>PHASE'},
        						 	                  {path: 'object>STATUS'},
        						 	                  {path: 'object>VOTING_ACTIVE'},
        						 	                  {path: 'object>VOTE_COUNT'},
        						 	                  {path: 'object>SCORE'},
        						 	                  {path: 'data>SCORE'},
        						 	                  {path: 'view>/DISPLAY_ONLY'}],
        						 	          formatter: '.formatter.voteTooltip'}"
    						        type="{object>VOTE_TYPE_TYPE_CODE}"
    						        value="{data>SCORE}"
    						        maxStar="{object>MAX_STAR_NO}"
    						        class="sapInoIdeaVoteVote"
    						        />
									<Label text="{path: 'data>CHANGED_AT', type: 'sap.ui.model.type.Date', formatOptions: { relative: true}}"
                                 class="sapInoIdeaVoteTimeStamp"/>
								</VBox>	
								<VBox>
									<layoutData>
										<l:GridData span="XL2 L2 M2 S12"/>
									</layoutData>
									<Text  class="sapInoIdeaVoteText" visible="{= !${data>SOURCE_IDEA_ID} ? false : true}" text="{i18n>IDEA_VOTE_LIST_MERGED_VOTE}" wrapping="false"/>
								</VBox>
								<VBox wrap="Wrap" alignItems="Left" width="100%">
									<layoutData>
										<l:GridData span="XL5 L5 M5 S12"/>
									</layoutData>
									<Text text="{parts: [{path: 'data>VOTE_REASON'}, {path: 'data>VOTE_COMMENT'}], formatter: '.formatter.voteComment'}" class="sapInoIdeaVoteText"/>
								</VBox>
							</l:Grid>
						</VBox>
					</items>
				</FlexBox>
			</CustomListItem>
		</items>
	</List>
	<List id="groupVoteList"
	    showSeparators="None"
	    visible="{= ${data>VOTED_BY_GROUP} ? true : false}" 
	    class="sapInoGroupVoteList"
	    noDataText="{i18n>IDEA_VOTE_NO_DATA}"
	    items="{path : 'data>GroupVotes', sorter:[{path: 'GROUP_VOTE_NAME', descending: false}]}">
	    <headerToolbar>
			<Toolbar width="100%">
				<content>
					<Title
                        class="sapUxAPObjectPageSubSectionHeaderTitle"
                        text="{parts: [{path: 'data>VOTED_BY_GROUP'}, {path: 'i18n>VOTE_GROUP_LIST_TITLE'}], formatter: '.formatter.groupVoteTitle'}"/>
				</content>
			</Toolbar>
		</headerToolbar>
	    <items>
	        <CustomListItem class="ideaGroupVoteListItem">
	             <Panel expanded="false" width="auto" expand=".onExpand" expandable="true">
	                <headerToolbar>
	                    <OverflowToolbar height="100%" press=".onExpand">
	                        <HBox>
	                            <Text text="{path: 'data>GROUP_VOTE_NAME'}" class="ideaVoteGroupItem" />
	                            <core:Icon src="sap-icon://InoIcons/heart" class="ideaVoteGroupItem" />
                            </HBox>
	                    </OverflowToolbar>
	                </headerToolbar>
	                <content />
	             </Panel>
	        </CustomListItem>
	    </items>
	</List>
</mvc:View>