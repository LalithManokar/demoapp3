<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:ino="sap.ino.controls"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
    <CustomListItem 
        width="100%"
        type="Active"
        press="onItemPress"
        class="sapInoIdeaListItem sapInoIdeaFlatListItem"
        app:aofSmartControl="true"
        app:aofModel="data"
        app:aofObject="sap.ino.xs.object.idea.Idea">
        <l:VerticalLayout
            width="100%">
            <FlexBox
                width="100%"
                alignItems="Stretch"
                class="sapInoIdeaFlatListItemInfoLine">
                <items>
                    <Label tooltip="{i18n>ACC_EXP_DUMMY_TOOLTIP}"/> <!-- Workaround for accessibility, never read. In IE, JAWS always reads first tooltip for each element in the listitem. -->
                    <ino:ColorRibbon color="{data>CAMPAIGN_COLOR}" class="sapInoIdeaListColor sapInoIdeaFlatListItemInfoLine"/>
                    <FlexBox
                        class="sapInoIdeaListLine"
                        alignItems="Center">
                        <items>
                            <HBox class="sapInoIdeaFlatListInfoContainer">
                                <layoutData>
                                    <FlexItemData growFactor="2" />
                                </layoutData>
                                <ino:Image
                                    height="72px"
                                    width="129px"
                                    foregroundColor="{ path: 'data>CAMPAIGN_COLOR', formatter: '.formatter.color'}"
                                    objectId="{data>ID}"
                                    objectName="{data>NAME}"
                                    src="{parts : ['data>TITLE_IMAGE_ID', 'data>TITLE_IMAGE_CHANGED_AT'], formatter: '.formatter.titleImageURL'}"
                                    class="sapUiTinyMarginBeginEnd sapUiTinyMarginTopBottom sapInoIdeaListImageBorder sapInoIdeaFlatListImage">
                                    <ino:followButton>
                    				    <ino:Follow onlyIcon="true" value="{data>FOLLOW}" objectId="{data>ID}" type="IDEA" enabled="true" follow="onFollow" styleType="ideaListFollow flatList"/>
                    				</ino:followButton>
                                </ino:Image>
                                <VBox class="sapUiTinyMarginBeginEnd" justifyContent="Center">
                                    <layoutData>
                                        <FlexItemData growFactor="1" />
                                    </layoutData>
                                    <Link wrapping="true" class="sapUiTinyMarginBottom" text="{data>NAME}" emphasized="true" href="{path: 'data>ID', formatter: '.formatter.ideaNavigationLink'}"  tooltip="{:= ${path: 'data>SHORT_DESCRIPTION', formatter: '.formatter.ideaShortDescription'}}"/>
                    		        <HBox class="sapInoIdeaListSmallFont sapInoIdeaListMarginTop2">
                    		            <Label text="{i18n>IDEA_LIST_FLD_CAMPAIGN}" class="sapInoIdeaListMarginEnd4"/>
                    		            <Link text="{data>CAMPAIGN_SHORT_NAME}" tooltip="{data>CAMPAIGN_SHORT_NAME}" href="{path: 'data>CAMPAIGN_ID', formatter: '.formatter.campaignNavigationLink'}" />
                    		        </HBox>
                    		        <HBox alignItems="Center" justifyContent="Start" class="sapInoIdeaFlatListDates sapInoIdeaListSmallFont sapUiTinyMarginTop">
                    				    <ino:LabelledIcon
                    				        iconUrl="sap-icon://create-entry-time"
                    				        label="{path: 'data>SUBMITTED_AT', formatter: '.formatter.toDate'}"
                    				        class="sapUiSmallMarginEnd"
                    				        tooltip="{i18n>COMMON_EXP_SUBMIT_DATE}"
                    				        visible="{path: 'data>SUBMITTED_AT', formatter: '.formatter.isVisible'}"/>
                    				    <ino:LabelledIcon
                    				        iconUrl="sap-icon://customer-history"
                    				        label="{path: 'data>CHANGED_AT', formatter: '.formatter.toRelativeDate'}"
                    				        tooltip="{i18n>COMMON_EXP_CHANGE_DATE}"/>
                    				</HBox>
                                	<core:ExtensionPoint name="extension_line_grid1"/>
                                </VBox>
                            </HBox>
                            
            		        <VBox alignItems="End" id="mergeListIdeaActions" class="sapInoIdeaFlatListActions">
            		            <layoutData>
                                    <FlexItemData growFactor="1" />
                                </layoutData>
                                <CheckBox visible="{:= ${view>/List/VARIANT} !== 'rewardqualified'}" class="sapInoIdeaManageListSelection" select="onManagedListSelectionChange" selected="{= ${view>/List/SELECT_ALL}}" editable="{= !${view>/List/SELECT_ALL}}" />
            		        </VBox>
            		    </items>
                    </FlexBox>
                </items>
            </FlexBox>
        </l:VerticalLayout>
        <core:InvisibleText
            class="sapInoItemAriaLabel"
            text="{parts: [{path: 'data>NAME'}, 
                           {path: 'data>PHASE'},
                           {path: 'data>STEP'},
                           {path: 'data>STEPS'},
                           {path: 'data>STATUS'},
                           {path: 'data>VOTE_TYPE_TYPE_CODE'},
                           {path: 'data>COMMENT_COUNT'},
                           {path: 'data>VIEW_COUNT'},
                           {path: 'data>SCORE'},
                           {path: 'data>MAX_STAR_NO'},
                           {path: 'data>POS_VOTES'},
                           {path: 'data>NEG_VOTES'}
                       ], formatter: '.formatter.ideaAccessibilityLabelListItem'}"> 
        </core:InvisibleText>
    </CustomListItem >
</core:FragmentDefinition>