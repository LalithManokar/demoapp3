sap.ui.define(["sap/ino/vc/commons/BaseBlockController","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ino/commons/models/object/Attachment","sap/ino/commons/application/Configuration","sap/ino/vc/attachment/AttachmentMixin"],function(B,J,M,A,C,a){"use strict";var b=A.getEndpointURL();return B.extend("sap.ino.vc.attachment.Attachment",jQuery.extend({},a,{onInit:function(){B.prototype.onInit.apply(this,arguments);if(!this.getModel("local")){this.setModel(new J({ATTACHMENT_UPLOAD_URL:b}),"local");}},onFileRenamed:function(e){var t=this;t.getView().setBusy(true);var o=A.rename({id:e.getParameter("documentId"),fileName:e.getParameter("fileName")});o.always(function(){t.getView().setBusy(false);});o.fail(function(r){if(r&&r.MESSAGES&&r.MESSAGES.length>0){M.show(r.MESSAGES[0].MESSAGE_TEXT,{autoClose:false});}});},onAfterRendering:function(){this._attachmentMixinInit({attachmentId:"Attachments",updateObject:function(o){},uploadSuccess:function(o,r){o.addAttachment({"CREATED_BY_NAME":C.getCurrentUser().NAME,"ATTACHMENT_ID":r.attachmentId,"FILE_NAME":r.fileName,"MEDIA_TYPE":r.mediaType,"CREATED_AT":new Date()});}});}}));});
