<mvc:View
    controllerName="sap.ino.vc.follow.FeedList"
	xmlns="sap.m"
	xmlns:ino="sap.ino.controls"
	xmlns:core="sap.ui.core"
	xmlns:l="sap.ui.layout"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:wall="sap.ino.wall">
	<Page 
        id="feedlistpage"
        class="sapInoFeedListBackgroud"
        enableScrolling="false">
		<customHeader>
			<ino:ColorBar 
                backgroundColor="{= !!${data>COLOR_CODE} ? (${path : 'data>COLOR_CODE', formatter : '.formatter.color'}) : undefined }"
                class="sapMBar" 
                design="Auto">
				<core:Fragment fragmentName="sap.ino.vc.commons.fragments.NavBackButton" type="XML" />
				<ToolbarSpacer/>
				<Label text="{i18n>FEEDS_LIST_TIT_FEED}"/>
				<ToolbarSpacer/>
				<core:Fragment fragmentName="sap.ino.vc.commons.fragments.RefreshButton" type="XML" />
				<core:Fragment fragmentName="sap.ino.vc.commons.fragments.FullScreenButton" type="XML" />
			</ino:ColorBar>
		</customHeader>
		<content>
			<Panel
                width="100%"
                height="100%"
                class="sapInoHomeTitledPanel
                sapInoCampaignHomeIdeaList">
				<content>
					<ScrollContainer
                        id="scrollContainer"
                        horizontal="false"
                        vertical="true"
                        height="100%"
                        class="sapInoScrollContainer sapInoObjectList">
						<PullToRefresh
                            id="pullToRefresh"
                            visible="{device>/support/touch}"
                            refresh="onRefresh" />
						<VBox class='sapInoFeedListContainer'>
							<List   
						    id="feedList"
                            showSeparators="Inner"
                            items="{path: 'data>/Feeds', sorter:[{path: 'EVENT_AT', descending: true}]}"
                            noDataText="{i18n>FEED_LIST_NO_DATA}"
                            class="sapInoFeedList"
                            growing="true" 
                            growingScrollToLoad="true" 
                            growingThreshold="10">
								<items>
									<CustomListItem 
								    class="sapInoFeedListItem">
										<content>
											<FlexBox alignItems="Start" width="100%" height="100%">
												<items>
													<VBox width="100%" class="sapUiSmallMarginTopBottom" >
														<HBox width="100%">
															<ino:IdentityCard
                                                                visible="{= !${device>/system/phone} }"
                                                                userImageUrl="{ path: 'data>ACTOR_IMAGE_ID', formatter: '.formatter.userImage' }"
                                                                identityId="{data>ACTOR_ID}"
                                                                identityPress="onOpenIdentityQuickView"
                                                                imageSize="S" />
															<VBox height="100%" wrap="Wrap" class="sapInoFeedListItemBox">
																<l:HorizontalLayout allowWrapping="true" class="sapInoFeedListItemTxt sapUiSmallMarginBottom">
																	<l:content>
																		<Text  visible="{= ${data>ACTOR_ID} === 0}" text="{i18n>IDEA_OBJECT_TIT_IDEA_Anonymity}" class="sapUiTinyMarginEnd"/>
																		<Link  visible="{parts:[{path :'data>FEED_CODE'},{path:'data>ACTOR_ID'}],formatter: '.formatter.feedLink'}"  text="{data>ACTOR_NAME}" press="onOpenActor" class="sapUiTinyMarginEnd"/>
																		<core:HTML 
                                                                            content="{path: 'data>', formatter:'.formatter.feedMsgFormatter'}" 
                                                                            sanitizeContent="true" 
                                                                            afterRendering="_onAfterRendering"/>
																	</l:content>
																</l:HorizontalLayout>
																<Label text="{path: 'data>EVENT_AT', type: 'sap.ui.model.type.DateTime', formatOptions: { relative: false }}"
                                                                class="sapInoTimestamp"/>
																<core:HTML preferDOM="false"  sanitizeContent="true" 
                                                                    visible="{= ${feed>INVOLVED_OBJ_TYPE_CODE} === 'COMMENT' &amp;&amp; !!${feed>CONTENT}}" 
                                                                    content="{path:'data>CONTENT',formatter:'.formatter.wrapToHTML'}" 
                                                                    class="sapUiSmallMarginTop" />
																<l:HorizontalLayout class="sapUiSmallMarginTop" />
															</VBox>
														</HBox>
													</VBox>
												</items>
											</FlexBox>
										</content>
									</CustomListItem>
								</items>
							</List>
						</VBox>
					</ScrollContainer>
				</content>
			</Panel>
		</content>
	</Page>
</mvc:View>