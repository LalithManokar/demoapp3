sap.ui.define(["sap/ui/model/json/JSONModel"],function(J){"use strict";var I=function(){throw"Mixin may not be instantiated directly";};I.bindIdentityProfile=function(i,s,c,o){this._mIdentityMixinIdentityProfile=i;this._setIdentityProfileContext(c||0);if(i){i.bindElement("data>"+s.PATH);i.setModel(new J(s),"IdentityProfile");if(o){o.bindElement("data>"+this.getView().getBindingContext("data").sPath);}}};I.onIdentityProfileCreateIdea=function(){this.navigateTo("idea-create",{query:{campaign:this._getIdentityProfileContext()}});};I.onIdentityProfileCreateWall=function(){jQuery.sap.require("sap.ino.commons.models.object.Wall");var W=sap.ino.commons.models.object.Wall;var t=this;W.create({ID:-1,NAME:t.getText("WALL_BUT_CREATE_WALL_NAME"),WALL_TYPE_CODE:"sap.ino.config.WALL",BACKGROUND_IMAGE_REPEAT:0,BACKGROUND_IMAGE_URL:"cork.jpg",BACKGROUND_IMAGE_ZOOM:0}).done(function(r){t.navigateToWall("wall",{id:r.GENERATED_IDS[-1]});});};I.onIdentityProfileCreateBlog=function(){this.navigateTo("blog-create",{query:{campaign:this._getIdentityProfileContext()}});};I.formatIdentityProfileText=function(k){var p=this._mIdentityMixinIdentityProfile;if(p){var t=p.getModel("i18n");if(!t){return"";}return t.getResourceBundle().getText(k);}return"";};I.formatIdentityProfileCount=function(c){var p=this._mIdentityMixinIdentityProfile;if(p){var b=p.getElementBinding("data");if(!b){return"0";}var C=b.getBoundContext();if(!C){return"0";}var e=C.getObject();if(!e){return"0";}return e[c]||"0";}return"0";};I.formatIdentityProfileNavigationLink=function(r,p){p=p||{};p.id=this._getIdentityProfileContext();return this.getOwnerComponent().getNavigationLink(r,p);};I._setIdentityProfileContext=function(c){this._vIdentityProfileContext=c;};I._getIdentityProfileContext=function(){return this._vIdentityProfileContext;};I.navigateToList=function(e){var c=this.getView().getController();var l=e.oSource;var p=l.oPropagatedProperties.oBindingContexts.IdentityProfile.sPath;var r=l.getModel("IdentityProfile").getProperty(p).Route;if(r.NAME==="campaign-idealist"||r.NAME==="campaign-idealistvariant"||r.NAME==="campaign-bloglist"){r.QUERY.id=c.getCampaignId();}c.navigateTo(r.NAME,r.QUERY);};I.formatIdentityProfileCountVisibility=function(c,v,e,n,r){if(r&&!this._formatIdentityProfileVisByRole(r)){return false;}return true;};I._formatIdentityProfileVisByRole=function(r){if(r[0].indexOf("sap.ino.ui::")>-1){return this._hasCampaignsPrivileges(r);}return this._hasCampaignInstanceRole(r);};I._hasCampaignsPrivileges=function(r){return this._checkCampaignsPrivileges(r,this.getModel("user").getProperty("/privileges"));};I._hasCampaignInstanceRole=function(r){return this._checkCampaignsPrivileges(r,this.getModel("data").getProperty("/CampaignInstanceRoles("+this.getCampaignId()+")"));};I._checkCampaignsPrivileges=function(r,e){if(!e){return false;}var E=false;for(var R=0;R<=r.length-1;R++){if(e[r[R]]){E=true;break;}}if(!E){return false;}return true;};return I;});
