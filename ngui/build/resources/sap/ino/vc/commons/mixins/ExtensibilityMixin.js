sap.ui.define(["sap/ino/commons/models/aof/MetaModel","sap/ino/commons/models/core/CodeModel","sap/ino/commons/util/SmartControl","sap/ino/commons/util/UIObjectConfig","sap/ui/core/ValueState","sap/ui/core/format/DateFormat","sap/m/Label","sap/m/Input","sap/m/CheckBox","sap/m/Select","sap/m/DatePicker","sap/ui/core/ListItem"],function(M,C,S,U,V,D,L,I,a,b,c,d){"use strict";var E=function(){throw"Mixin may not be instantiated directly";};var e=D.getInstance({pattern:"YYYY-MM-dd"});E.sortExtensionFields=[];E.filterExtensionFields=[];E._extensibilityExtensionFieldSorter=function(){var t=this;var f=[];var o=this.getView().data();if(!o["aofObject"]&&this.getView().getContent().length>0){o=this.getView().getContent()[0].data();}if(o["aofObject"]){var m=M.getApplicationObjectMetadata(o["aofObject"]);if(m.nodes.Extension){jQuery.each(t.sortExtensionFields,function(i,s){if(s==="_ID"||s==="_OBJECT_TYPE_CODE"){return;}if(m.nodes.Extension.attributes[s]){var A=m.nodes.Extension.attributes[s];f.push({TEXT:m.name+".Extension."+A.name,ACTION:A.name,DEFAULT_ORDER:"ASC"});}});}}return f;};E._extensibilityExtensionFilterItems=function(f){var t=this;var o=this.getView().data();if(!o["aofObject"]&&this.getView().getContent().length>0){o=this.getView().getContent()[0].data();}if(o["aofObject"]){var m=M.getApplicationObjectMetadata(o["aofObject"]);if(m.nodes.Extension){jQuery.each(t.filterExtensionFields,function(i,s){if(s==="_ID"||s==="_OBJECT_TYPE_CODE"){return;}if(m.nodes.Extension.attributes[s]){var A=m.nodes.Extension.attributes[s];var g="{= ${user>/privileges/sap.ino.ui::backoffice.access} && ${view>/List/MANAGE} === true }";var h;switch(A.dataType){case"TIMESTAMP":h=null;break;case"DATE":h=new c({visible:g,width:"100%",value:"{view>/List/EXTENSION/"+A.name+"}",change:function(k){if(k.getParameter("valid")){k.getSource().setValueState(V.None);var v=k.getSource().getDateValue();v=e.format(v);t.setViewProperty("/List/EXTENSION/"+A.name,v);t.navigateIntern(t.getQuery(),true,true);}else{k.getSource().setValueState(V.Error);}}});break;case"TINYINT":h=new a({visible:g,width:"100%",selected:{path:"view>/List/EXTENSION/"+A.name,formatter:function(v){return v===1||v==="1";}},select:function(k){var n=k.getParameter("selected");t.setViewProperty("/List/EXTENSION/"+A.name,n?1:null);t.navigateIntern(t.getQuery(),true,true);}});break;default:h=new I({visible:g,value:"{view>/List/EXTENSION/"+A.name+"}",change:function(k){t.navigateIntern(t.getQuery(),true,true);},width:"100%"});break;}if(A.foreignKeyTo&&!!U.getDefinition(A.foreignKeyTo)){h=null;}if((A.customProperties&&A.customProperties.valueOptionList)||(A.foreignKeyTo&&!U.getDefinition(A.foreignKeyTo))){var j=A.foreignKeyTo;if(A.customProperties&&A.customProperties.valueOptionList){j="sap.ino.xs.object.basis.ValueOptionList.Root_"+A.customProperties.valueOptionList;}h=new b({visible:g,selectedKey:"{view>/List/EXTENSION/"+A.name+"}",change:function(k){t.navigateIntern(t.getQuery(),true,true);},items:{path:"code>/"+j,template:new d({key:{path:"code>CODE"},text:{path:"code>CODE",formatter:C.getFormatter(j)},tooltip:{path:"code>CODE",formatter:C.getLongTextFormatter(j)}}),sorter:{path:'CODE'},parameters:{includeEmptyCode:true}},width:"100%"});}if(h){h.addStyleClass("sapUiSmallMarginBottom");var l=new L({text:"{i18n>"+m.name+".Extension."+A.name+"}",visible:g});if(h.addAriaLabelledBy){h.addAriaLabelledBy(l);}f.addContent(l);f.addContent(h);}}});}}};return E;});
