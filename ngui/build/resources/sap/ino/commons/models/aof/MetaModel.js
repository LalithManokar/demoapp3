/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/model/json/JSONPropertyBinding","sap/ino/commons/application/Configuration"],function(J,a,C){"use strict";var A=null;var M=J.extend("sap.ino.commons.models.aof.MetaModel",{metadata:{events:{"modelInitialized":{}}}});M=new M({});var g=b;M.getApplicationObjectMetadata=function(o,r){if(!M.getProperty("/"+o)){g(o,function(c){var d=m(c);M.setProperty("/"+o,d);if(r){r(d);r=undefined;}M.fireEvent("modelInitialized");});}var c=M.getProperty("/"+o);if(r){r(c);M.fireEvent("modelInitialized");}return c;};M.bindProperty=function(p,c,P){if(p){var d=p.split("/");if(d.length>2){var o=d[1];M.getApplicationObjectMetadata(o);}}var B=new a(this,p,c,P);return B;};M.getEndpoint=function(s){var B=C.getBackendRootURL();if(!A){A=C.getApplicationObjects();}return B+A[s];};M.getBackendAllMetadata=function(){if(C.isDevelopmentEnv()){return;}var c;var u=C.getBackendRootURL()+"/sap/ino/ngui/build/resources/sap/ino/corelib/allmetadata.json";var o=jQuery.ajax({url:u,async:false,datatype:"json"});o.done(function(d){for(var i=0,l=d.length;i<=l-1;i++){c=d[i].name;if(c&&!M.getProperty("/"+c)){var e=m(d[i]);M.setProperty("/"+c,e);}}});};function m(o){jQuery.each(o.nodes,function(n,N){jQuery.each(N.attributes,function(s,c){c.changeable=!c.readOnly;});});return o;}function b(o,s){var u=C.getBackendRootURL()+"/sap/ino/xs/rest/static/meta.xsjs/"+o;var c=jQuery.ajax({url:u,async:false,datatype:"json"});c.done(function(d){s(d);});}return M;});
