/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/core/MessageType","sap/ino/commons/application/Configuration","sap/ino/commons/application/WebAnalytics","sap/ui/model/resource/ResourceModel","sap/ino/commons/models/core/CodeModel","sap/ino/commons/models/core/ClipboardModel","sap/ino/commons/models/core/ModelSynchronizer","sap/ui/model/odata/v2/ODataModel","sap/ui/core/IconPool","sap/ino/commons/models/misc/Notifications","sap/m/MessageBox"],function(U,J,D,M,C,W,R,a,b,c,O,I,N,d){"use strict";var v="2024-09-24 08:05:15";var f=[{"TEXT":"BREAD_HOME_TITLE_TEXT","name":"home","target":"home","available":"all","path":"home"},{"name":"home-explicit","target":"home"},{"variant":true,"TEXT":"PAGE_TIT_IDEAS","MANAGETEXT":"PAGE_TIT_IDEAS","name":"idealist","target":"idealist","available":"idea-display","path":"home/idealist"},{"variant":true,"name":"idealistvariant","target":"idealist","available":"idea-display","path":"home/idealistvariant"},{"variant":true,"TEXT":"PAGE_TIT_WALLS","name":"walllist","target":"walllist","available":"wall","path":"home/walllist"},{"variant":true,"name":"walllistvariant","target":"walllist","path":"home/walllist"},{"oData":"Wall","pattern":"id","title":"BREAD_WALL_TITLE_TEXT","name":"wall","available":"wall","target":"wall","path":"home/walllist/wall"},{"oData":"Wall","pattern":"id","name":"wallremote","target":"wallremote","path":"home/walllist/wallremote","available":"wall"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-headline","target":"wallremoteitem-headline","path":"home/walllist/wallremote/wallremoteitem-headline"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-sticker","target":"wallremoteitem-sticker","path":"home/walllist/wallremote/wallremoteitem-sticker"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-link","target":"wallremoteitem-link","path":"home/walllist/wallremote/wallremoteitem-link"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-image","target":"wallremoteitem-image","path":"home/walllist/wallremote/wallremoteitem-image"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-text","target":"wallremoteitem-text","path":"home/walllist/wallremote/wallremoteitem-text"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-sprite","target":"wallremoteitem-sprite","path":"home/walllist/wallremote/wallremoteitem-sprite"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-person","target":"wallremoteitem-person","path":"home/walllist/wallremote/wallremoteitem-person"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-video","target":"wallremoteitem-video","path":"home/walllist/wallremote/wallremoteitem-video"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-attachment","target":"wallremoteitem-attachment","path":"home/walllist/wallremote/wallremoteitem-attachment"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-group","target":"wallremoteitem-group","path":"home/walllist/wallremote/wallremoteitem-group"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-line","target":"wallremoteitem-line","path":"home/walllist/wallremote/wallremoteitem-line"},{"oData":"Wall","pattern":"id","name":"wallremoteitem-arrow","target":"wallremoteitem-arrow","path":"home/walllist/wallremote/wallremoteitem-arrow"},{"variant":true,"TEXT":"PAGE_TIT_CAMPAIGNS","name":"campaignlist","target":"campaignlist","available":"campaign","path":"home/campaignlist"},{"variant":true,"name":"campaignlistvariant","target":"campaignlist","available":"campaign","path":"home/campaignlistvariant"},{"TEXT":"PAGE_TIT_PEOPLE","name":"peoplelist","target":"peoplelist","path":"home/peoplelist"},{"name":"peoplelistvariant","target":"peoplelist","path":"home/peoplelistvariant"},{"TEXT":"PAGE_TIT_EXPERTFINDER","name":"expertfinder","target":"expertfinder","path":"home/expertfinder"},{"oData":"IdeaSmall","pattern":"id","title":"BREAD_IDEA_TITLE_TEXT","name":"idea-display","target":"idea-display","available":"evaluation-display/evaluation-create/evaluationrequest-create/evaluationrequest-display/evaluationrequest-edit/idea-display","path":"home/campaignlist/campaign/campaign-idealist/idea-display"},{"TEXT":"PAGE_TIT_IDEA_EDIT","oData":"IdeaSmall","name":"idea-edit","target":"idea-modify","path":"home/idealist/idea-display/idea-edit"},{"TEXT":"PAGE_TIT_IDEA_CREATE","name":"idea-create","target":"idea-modify","path":"home/idea-create"},{"oData":"CampaignFull","pattern":"id","title":"BREAD_CAMPAIGN_TITLE_TEXT","name":"campaign","target":"campaign","available":"campaign-idealist/campaign-idealistvariant/campaign-bloglist/campaign-comment/campaign-feeds/campaign-managerlist/blog-create/idea-display/blog-display/idea-create/campaign-bloglistvariant","path":"home/campaignlist/campaign"},{"TEXT":"PAGE_TIT_CAMPAIGN_COMMENT","name":"campaign-comment","target":"campaign-comment","path":"home/campaignlist/campaign/campaign-comment"},{"TEXT":"PAGE_TIT_CAMPAIGN_FEEDS","name":"campaign-feeds","target":"campaign-feeds","path":"home/campaignlist/campaign/campaign-feeds"},{"variant":true,"TEXT":"PAGE_TIT_CAMPAIGN_IDEAS","name":"campaign-idealist","target":"campaign-idealist","available":"idea-display","path":"home/campaignlist/campaign/campaign-idealist"},{"variant":true,"name":"campaign-idealistvariant","target":"campaign-idealist","available":"idea-display","path":"home/campaignlist/campaign/campaign-idealistvariant"},{"TEXT":"PAGE_TIT_CAMPAIGN_MANAGERS","variant":true,"name":"campaign-managerlist","target":"campaign-managerlist","path":"home/campaignlist/campaign/campaign-managerlist"},{"TEXT":"PAGE_TIT_SEARCHCATEGORY","name":"search","target":"search","path":"home/search"},{"name":"searchcategory","target":"searchcategory"},{"name":"message","target":"message"},{"name":"vote","target":"vote"},{"name":"identitycard","target":"identitycard"},{"name":"processindicator","target":"processindicator"},{"name":"ideacard","target":"ideacard"},{"name":"campaigncard","target":"campaigncard"},{"name":"votedisplay","target":"votedisplay","path":"home/votedisplay"},{"variant":true,"TEXT":"PAGE_TIT_REPORTS","name":"reportlist","target":"reportlist","path":"home/reportlist"},{"variant":true,"name":"reportlistvariant","target":"reportlist","path":"home/reportlistvariant"},{"oData":"ReportTemplates","title":"BREAD_REPORT_TITLE_TEXT","pattern":"code","TEXT":"PAGE_TIT_REPORTS","name":"report","target":"report","path":"home/reportlist/report"},{"TEXT":"PAGE_TIT_EVALUATION","name":"evaluation-display","target":"evaluation-display","available":"evaluation-edit","path":"home/evaluation-display"},{"TEXT":"PAGE_TIT_EVALUATION_EDIT","name":"evaluation-edit","target":"evaluation-modify","path":"home/evaluation-display/evaluation-edit"},{"name":"welcomepage","target":"welcomepage"},{"TEXT":"PAGE_TIT_EVALUATION_CREATE","name":"evaluation-create","target":"evaluation-modify"},{"TEXT":"PAGE_TIT_FEEDS","name":"feedlist","target":"feedlist","path":"home/feedlist"},{"variant":true,"TEXT":"PAGE_TIT_TAGS","name":"taglist","target":"taglist","path":"home/taglist"},{"TEXT":"PAGE_TIT_TAGS","name":"taglistvariant","target":"taglist","path":"home/taglistvariant"},{"variant":true,"name":"followlist","target":"followlist","path":"home/followlist"},{"variant":true,"name":"followlistvariant","target":"followlist","path":"home/followlistvariant"},{"variant":true,"TEXT":"REGISTER_APPR_LIST_TIT","name":"registerapprovallist","target":"registerapprovallist","path":"home/registerapprovallist"},{"variant":true,"TEXT":"REGISTER_APPR_LIST_TIT","name":"registerapprovallistvariant","target":"registerapprovallist","path":"home/registerapprovallistvariant"},{"variant":true,"TEXT":"REGISTER_APPR_LIST_TIT","name":"campaign-registerapprovallistvariant","target":"campaign-registerapprovallist","path":"campaign/campaign-registerapprovallistvariant"},{"TEXT":"PAGE_TIT_BLOGS","name":"bloglist","target":"bloglist","available":"blog-display","path":"home/bloglist"},{"variant":true,"name":"bloglistvariant","target":"bloglist","available":"blog-display","path":"home/bloglistvariant"},{"variant":true,"TEXT":"PAGE_TIT_CAMPAIGN_BLOGS","name":"campaign-bloglist","target":"campaign-bloglist","available":"blog-display","path":"home/campaignlist/campaign/campaign-bloglist"},{"variant":true,"name":"campaign-bloglistvariant","target":"campaign-bloglist","available":"blog-display","path":"home/campaignlist/campaign/campaign-bloglistvariant"},{"TEXT":"PAGE_TIT_BLOG_EDIT","name":"blog-edit","target":"blog-modify","path":"home/bloglist/blog-display/blog-edit"},{"TEXT":"PAGE_TIT_BLOG_CREATE","name":"blog-create","target":"blog-modify","path":"home/blog-create"},{"oData":"CampaignBlogsSmall","title":"BREAD_BLOG_TITLE_TEXT","pattern":"id","name":"blog-display","available":"blog-display/blog-edit","target":"blog-display","path":"home/bloglist/blog-display"},{"TEXT":"PAGE_TIT_EVALUATIONREQUEST_CREATE","name":"evaluationrequest-create","target":"evaluationrequestmodify","path":"home/evaluationrequest-create"},{"TEXT":"PAGE_TIT_EVALUATIONREQUEST_EDIT","name":"evaluationrequest-edit","target":"evaluationrequestmodify","path":"home/evalreqlist/evaluationrequest-display/evaluationrequest-edit"},{"TEXT":"PAGE_TIT_EVALUATIONREQUEST_DISPLAY","name":"evaluationrequest-display","target":"evaluationrequestdisplay","available":"evaluationrequest-edit/evaluationrequest-item","path":"home/evalreqlist/evaluationrequest-display"},{"TEXT":"PAGE_TIT_EVALUATIONREQUEST_ITEM","name":"evaluationrequest-item","target":"evaluationrequestitem","path":"home/evalreqlist/evaluationrequest-display/evaluationrequest-item"},{"variant":true,"TEXT":"PAGE_TIT_REWARDS","name":"rewardlist","target":"rewardlist","path":"home/rewardlist"},{"variant":true,"name":"rewardlistvariant","target":"rewardlist","path":"home/rewardlistvariant"},{"variant":true,"TEXT":"PAGE_TIT_EVALUATION_REQUESTS","name":"evalreqlist","target":"evalreqlist","path":"home/evalreqlist"},{"variant":true,"name":"evalreqlistvariant","target":"evalreqlist","path":"home/evalreqlistvariant"},{"TEXT":"PAGE_TIT_MY_SETTING","name":"mySetting","target":"mySetting","path":"home/mySetting"},{"TEXT":"PAGE_TIT_LEADERBOARD","name":"leaderboard","target":"leaderboard","path":"home/leaderboard"}];return U.extend("sap.ino.commons.application.BaseComponent",{init:function(){U.prototype.init.apply(this,arguments);this.initLanguage();this.initModels();this.initRouting();this.initURLWhitelist();this.initSessionTimeoutHandler();this.initTabHandler();this.start();},initLanguage:function(){var u=this._getCurrentUser();if(u){sap.ui.getCore().getConfiguration().setLanguage(u.LOCALE);}},initModels:function(){var m=sap.ui.getCore().getMessageManager();var o=new J(D);o.setDefaultBindingMode("OneWay");this.setModel(o,"device");var n=new J();this.setModel(n,"navigation");this._i18n=this.getModel("i18n");if(!this._i18n){this._i18n=new R({bundleUrl:C.getResourceBundleURL("nguii18n")});this.setModel(this._i18n,"i18n");}m.unregisterMessageProcessor(this._i18n);this.setModel(C.getSystemSettingsModel(),"config");m.unregisterMessageProcessor(C.getSystemSettingsModel());this.setModel(C.getUserModel(),"user");m.unregisterMessageProcessor(C.getUserModel());this.setModel(C.getSearchModel(),"search");m.unregisterMessageProcessor(C.getSearchModel());var e=m.getMessageModel();this.setModel(e,"message");var s=C.getFullApplicationPath("sap.ino.config.URL_PATH_OD_APPLICATION");if(C.hasCurrentUserPrivilege("sap.ino.ui::backoffice.access")){s=C.getFullApplicationPath("sap.ino.config.URL_PATH_OD_BACKOFFICE");}var g=new O(s,false);g.bDisableHeadRequestForToken=true;g.setDefaultCountMode(sap.ui.model.odata.CountMode.None);this.setModel(g,"data");c.setODataModel(g);m.unregisterMessageProcessor(g);if(window.less&&window.less.env==="development"){g.setUseBatch(false);}this.setModel(a,"code");var p=D.system.desktop;var h=new N(p);this.setModel(h,"notifications");h.updateNotificationCount();var i=this.getModel("module");if(!i){i=new R({bundleUrl:C.getResourceBundleURL("moduletexts")+'?t='+Date.now()});this.setModel(i,"module");}var H=new J({});H.setDefaultBindingMode("OneWay");this.setModel(H,"help");var S=new J({});S.setDefaultBindingMode("OneWay");this.setModel(S,"search");var j=new J({"FULLSCREEN":!this.getShell().getAppWidthLimited(),"SHOW_BACKOFFICE":this.getModel("user").getProperty("/privileges/sap.ino.ui::backoffice.access"),"SHOW_BACKOFFICE_BLOG":this.getModel("user").getProperty("/privileges/sap.ino.ui::campaign_manager")});j.setDefaultBindingMode("OneWay");this.setModel(j,"component");var k=b.sharedInstance();k.setODataModel(g);k.setEnabled(!this.getModel("device").getProperty("/system/phone")&&this.getModel("user").getProperty("/privileges/sap.ino.ui::backoffice.access"));this.setModel(k,"clipboard");var l=new J({HashList:[],CurrentHash:null,Count:0});var q=new J({HashList:[]});this.setModel(q,"historyDetail");this.setModel(l,"history");var B=new J({CurrentRoute:"",CurrentAvailable:"all",CurrentHash:"none"});this.setModel(B,"breadCrumbs");},initRouting:function(){var t=this;var r=this.getRouter();var g=function(n,s,e){var i=s;var j=function(){var o=t.getRouter().getRoute(i);var p=o?o.getPattern():"";if(p){p=p.split(":")[0];}if(e!==p){t.getRootController().onBeforeNavigate(i);}setTimeout(function(){n();jQuery.sap.delayedCall(100,t.getRootController(),'onAfterNavigate');},0);};t._navigateIfAllowed(j);};var h=function(){return t.getRootController().isCloseAllowed();};var T=function(){var H=sap.ui.core.routing.History.getInstance();var e=H.aHistory;var i=e[H.iHistoryPosition].split("/");var s="";if(i.length>2&&i[2].split("?")[0]){s=i[0]+"_"+i[2].replace(/-/g,"_").split("?")[0];}else{s=i[0].replace(/-/g,"_").split("?")[0];}if(s.indexOf("tags")===0){s="tags";}var j=e[H.iHistoryPosition];var k=H._sCurrentDirection;var o=t.getRootView().getModel("history");var B=t.getRootView().getModel("breadCrumbs");var l=B.getProperty("/CurrentHash");B.setProperty("/CurrentHash",j);var m=o.getProperty("/HashList");var L=o.getProperty("/CurrentHash");var n={title:s,hash:j};if(L&&L.title===n.title&&(n.hash.indexOf("?section")>0||L.hash.indexOf("?section")>0)){return;}else if((k==="NewEntry"||k==="Unknown"||k==="Forwards")&&L!==null&&L.hash!==n.hash&&L.title!==n.title&&e.indexOf(L.hash)>=0){m.unshift(L);}else if(k==="Backwards"&&L.hash!==n.hash&&L.title!==n.title){m.shift();}o.setProperty("/CurrentHash",n);o.setProperty("/HashList",m);o.setProperty("/Count",m.length);var p=t.getCurrentView().getController().getViewProperty("/List/IS_IDEA_FILTER_COMMUNITY_GROUP_VIEW");if(p){if(s==="ideas_commented"||s==="ideas_voted"){s=s==="ideas_commented"?"ideas_my_commented":"ideas_my_voted";}}var q=t._i18n.getResourceBundle();var P=q.getText("PAGE_TIT_"+(!s?"HOME":s.toUpperCase()));if(s==="ideas_mygroup"||s==="ideas_mygroupcommented"||s==="ideas_mygroupvoted"){var u=C.getGroupConfiguration().DISPLAY_LABEL;P=q.getText("PAGE_TIT_"+s.toUpperCase(),[u]);}if(s==="reports_customReports"){P=C.getCustomReportsTile();}document.title=P+" - "+t._i18n.getResourceBundle().getText("PAGE_TIT_SUFFIX");var w=C.getSystemSetting("sap.ino.config.OPEN_FOR_INM_BREADCRUMBS")==="0"?false:true;var x=t.getRootView().byId("inmBreadCrumbs");x.setVisible(w);if(w&&(n.hash!==l)){var y=t.getCurrentRoute();if(j==='my-setting'){y="mySetting";}var z=t.getBreadObjectByName(y);var A=t.getRootView().byId("innerShell");A.addStyleClass("sapInoInnoMgmtMShellBreadCrumbs");var E=x.getLinks().length;x.addStyleClass("inmBreadCrumbs");if(y===B.getProperty("/CurrentRoute")){x.removeLink(E-1);t.maintainBreadCrumbs(x,z,B,j,s);}else if(k!=="Backwards"){t.maintainBreadCrumbs(x,z,B,j,s);}else if(E===1){t.maintainBreadCrumbs(x,z,B,j,s);}else{x.removeLink(E-1);var F=x.getLinks()[x.getLinks().length-1];F.setEnabled(false);if(B.getProperty("/CurrentRoute")!==y){t.maintainBreadCrumbs(x,z,B,j,s);}}}};var _=function(e){t.getRootView().fireEvent('routeMatchedEvent',e.getParameters());};r.setRoutingCallback(g);r.setCloseCallback(h);r.attachRoutePatternMatched(null,T);r.attachBypassed(null,g);r.attachRouteMatched(null,_);},initURLWhitelist:function(){var w=C.getURLWhitelist();if(w&&w.length>0){jQuery.sap.addUrlWhitelist(window.location.protocol.split(':')[0],window.location.hostname,window.location.port,null);jQuery.each(w,function(i,o){jQuery.sap.addUrlWhitelist(o.PROTOCOL,o.HOST,o.PORT,o.PATH);});}else{jQuery.sap.addUrlWhitelist(window.location.protocol.split(':')[0],window.location.hostname,window.location.port,null);}},initSessionTimeoutHandler:function(){var e=4;var o=XMLHttpRequest.prototype.open;var t=function(E){if(E.type==="error"){jQuery.ajax({url:C.getBackendRootURL()+"/sap/hana/xs/formLogin/checkSession.xsjs",success:function(h,s,x){if(h.login===false){window.location.reload(false);}}});}var r=new RegExp(C.getBackendRootURL(),"igm");if(this.readyState===e&&(!this.responseURL||(this.responseURL&&C.isAbsoluteURL(this.responseURL)&&r.test(this.responseURL)))){var g=this.getResponseHeader("x-sap-origin-location");var l=this.getResponseHeader('x-sap-login-page');if(l&&g){window.location.reload(false);}}};XMLHttpRequest.prototype.open=function(){this.addEventListener('readystatechange',t,false);this.addEventListener('error',t,false);o.apply(this,arguments);};},initTabHandler:function(){$(document).ready(function(){document.onkeydown=function(){var e=window.event;if(document.activeElement.id==="sap-ino-main--openMenu"){if(e.which===jQuery.sap.KeyCodes.TAB&&e.shiftKey){$("div[id$='list-after']").focus();}}};});},start:function(){W.start(C);this.getRouter().initialize();},getVersionTimestamp:function(){return jQuery.sap.startsWith(v,"@UI_VERSION_TIME")?"development":v;},getVersion:function(){var m=this.getMetadata();while(m&&m.getName()!=="sap.ino.apps.ino.Component"){m=m.getParent();}return!m?undefined:m.getVersion();},getCurrentUserId:function(){return this._getCurrentUser().USER_ID;},getCurrentUserImageId:function(){return this._getCurrentUser().IDENTITY_IMAGE_ID;},getCurrentUserName:function(){return this._getCurrentUser().NAME;},getCurrentTechnicalUserName:function(){return this._getCurrentUser().USER_NAME;},getCurrentView:function(){return this.getRootController().getCurrentPage();},setCurrentRoute:function(n){this.getModel("navigation").setProperty("/Route",n);},getCurrentRoute:function(){return this.getModel("navigation").getProperty("/Route");},navigateTo:function(t,o,n,e){this.getRouter().navTo(t,o,n,e);},navigateToExternal:function(t,o){var e=this;var n=function(){var u=e.getRouter().getURL(t,o);var w=window.open(u,"InnovationManagement");w.opener=null;};this._navigateIfAllowed(n);},navigateToByURL:function(u){var n=function(){window.location.href=u;};this._navigateIfAllowed(n);},navigateToInNewWindow:function(t,o){var u=this.getRouter().getURL(t,o);var w=window.open(u,"_blank");w.opener=null;},navigateToByURLInNewWindow:function(u){var w=window.open(u,"_blank");w.opener=null;},getNavigationLink:function(r,p){return"#/"+this.getRouter().getURL(r,p);},getRootView:function(){return this.getAggregation("rootControl");},getRootController:function(){return this.getRootView().getController();},getShell:function(){return this.getRootView()?this.getRootView().byId("innerShell"):undefined;},logout:function(){var t=this;jQuery.ajax({url:C.getBackendRootURL()+"/sap/hana/xs/formLogin/token.xsjs",headers:{"X-CSRF-Token":"Fetch"},success:function(r,s,x){var T=x.getResponseHeader("X-CSRF-Token");jQuery.ajax({url:C.getBackendRootURL()+"/sap/hana/xs/formLogin/logout.xscfunc",headers:{"X-CSRF-Token":T},type:"post",contentType:"application/xml",success:function(r,s,x){window.location=C.getBackendRootURL()+"/sap/hana/xs/formLogin/login.html?x-sap-origin-location="+encodeURIComponent(window.location.pathname)+encodeURIComponent(window.location.hash);},error:function(o){t.showMessage(M.Error,t._i18n.getResourceBundle().getText("LOGOUT_ERROR_MSG"));}});}});},setHelpContent:function(h){var H=this.getModel("help");H.setProperty("/CONTENT",h);},_getCurrentUser:function(){if(!this._oCurrentUser){this._oCurrentUser=C.getCurrentUser();}return this._oCurrentUser;},_navigateIfAllowed:function(n){var t=this;var e=function(){var A=t.getRootController().isNavigationAllowed();C.getUserModel().setProperty("/data/TERMACCEPTCALLBACK",null);if(!A){var r=t.getRootController();r.showDataLossPopup(n);}else{n();}};var T=C.getUserModel().getProperty("/data/TERM_ACCEPTED");var s=C.getSystemSetting("sap.ino.config.TERMS_AND_CONDITIONS_TEXT");var g=C.getSystemSetting("sap.ino.config.TERMS_AND_CONDITIONS_ACTIVE");var o=this.getRootController().getTermsDialog(this.getRootController());C.getUserModel().setProperty("/data/TERMACCEPTCALLBACK",null);if(T===0&&s&&g==="1"&&!o.isOpen()){C.getUserModel().setProperty("/data/USER_ACCEPTED",0);C.getUserModel().setProperty("/data/TERMACCEPTCALLBACK",e);C.getUserModel().setProperty("/data/TERMACTION",true);o.setStretch(true);o.open();}else{if(!o.isOpen()){e();}}},attachNavigate:function(e,h){if(this.getRootView()){this.getRootController().byId("app").attachNavigate(e,h);return true;}return false;},detachNavigate:function(e,h){if(this.getRootView()){this.getRootController().byId("app").detachNavigate(e,h);return true;}return false;},attachAfterNavigate:function(e,h){if(this.getRootView()){this.getRootController().byId("app").attachAfterNavigate(e,h);return true;}return false;},detachAfterNavigate:function(e,h){if(this.getRootView()){this.getRootController().byId("app").detachAfterNavigate(e,h);return true;}return false;},maintainBreadCrumbs:function(B,o,e,s,g){var G;var l;var p;var P=s.split("/").length>1?s.split("/")[1]:"";var V=o.variant?g.split("_").pop():"";if(e.getProperty("/CurrentAvailable")==="all"){G=false;}else if(e.getProperty("/CurrentAvailable")!=="none"){var A=e.getProperty("/CurrentAvailable").split("/");A.forEach(function(n,j){if(!G){G=n===o.name?true:false;return;}});}else{G=false;}if(G){l=true;p=null;this.addBreadCrumbs(B,o,P,e,l,p,V,o);}else{B.destroyLinks();var h=o.path.split("/");var i=h.length;h.forEach(jQuery.proxy(function(n,j){var k=this.getBreadObjectByName(n);if(k.pattern){p={};p[k.pattern]=P;}l=i===j+1;this.addBreadCrumbs(B,k,P,e,l,p,V,o);},this));}},addBreadCrumbs:function(B,o,p,e,l,P,V,g){var s=C.getBackendRootURL()+"/sap/ino/"+window.location.search;var h=C.getFullApplicationPath("sap.ino.config.URL_PATH_OD_APPLICATION");if(C.hasCurrentUserPrivilege("sap.ino.ui::backoffice.access")){h=C.getFullApplicationPath("sap.ino.config.URL_PATH_OD_BACKOFFICE");}h+="/";if((o.name==="campaign"||o.name==="campaign-idealist")&&g.name==="idea-display"){var i=jQuery.ajax({url:h+"IdeaSmall("+p+")",type:"GET",dataType:"json",async:false});i.done(function(K){p=K.d.CAMPAIGN_ID;P.id=p;});}var n,t,j,k,T;var m="";var q;if(o.name==='report'){var r=p.indexOf("MyReports")>=0?true:false;if(r){q=p;}else{var u=p.split("'")[1];q=o.oData+"(CODE='"+u+"')";}}else{q=o.oData+"("+p+")";}var w=this;if(o.pattern){var x=jQuery.ajax({url:h+q,type:"GET",dataType:"json",async:false});x.done(function(K){n=K.d.SHORT_NAME?K.d.SHORT_NAME:K.d.NAME;t=K.d.TITLE?K.d.TITLE:n;k=K.d.DEFAULT_TEXT?K.d.DEFAULT_TEXT:t;if(o.name==='report'&&!r){k=w.getModel("code").getText("sap.ino.xs.object.analytics.ReportTemplate.Root",K.d.CODE);}if(r){var Q=JSON.parse(K.d.CONFIG);k=Q.Title;r=false;}if(o.name==='idea-display'&&g.name==="idea-display"&&g.path.indexOf('campaign-idealist/idea-display')>-1){T=K.d.CAMPAIGN_ID;}});if(o.title){m=this._i18n.getResourceBundle().getText(o.title)+" ";}}if(o.variant&&this.getCurrentRoute()===o.name){var L=this.getCurrentView().getController().getViewProperty("/List/VARIANT");var y=this.getCurrentView().getController().list?this.getCurrentView().getController().list.CURRENTSELECTLINK:"";this.getCurrentView().getController().getModel("list").setProperty("/CURRENTSELECTLINK",undefined);var A=this.getCurrentView().getController().list?this.getCurrentView().getController().list.Variants:"";if(A!==""&&y&&y.TYPE_CODE==="QUICK_LINK_CUSTOM_IDEA"){j=y.LINK_TEXT;}else if(A!==""&&this.getObjectListVariantText(A,L)){j=this.getObjectListVariantText(A,L);}}else if(o.TEXT){j=this._i18n.getResourceBundle().getText(o.TEXT);}else{j="";}if(o.name==='idea-display'&&g.name==="idea-display"&&g.path.indexOf('campaign-idealist/idea-display')>-1){var z=B.getLinks();var E=z[z.length-1];var F;if(T&&E&&E.getProperty("href").indexOf('campaign/')>-1&&E.getProperty("href").indexOf('campaign/'+T)===-1){var G=jQuery.ajax({url:h+'CampaignSmall('+T+')',type:"GET",dataType:"json",async:false});G.done(function(K){F=K.d.SHORT_NAME?K.d.SHORT_NAME:K.d.NAME;});E.setProperty("href",s+this.getNavigationLink('campaign',{id:T}));E.setProperty("text",this._i18n.getResourceBundle().getText("BREAD_CAMPAIGN_TITLE_TEXT")+F);}}B.addLink(new sap.m.Link({text:o.pattern?m+k:j,target:"_top",enabled:l?false:true,href:l?window.location.href+window.location.search:s+this.getNavigationLink(o.name,P)}));if(l&&B.getLinks().length>1){var H=B.getLinks().length>1?B.getLinks().length-2:B.getLinks().length-1;B.getLinks()[H].setEnabled(true);this.setHistoricalTitle(o.pattern?m+k:j);}e.setProperty("/CurrentAvailable",o.available?o.available:"none");e.setProperty("/CurrentRoute",o.name);},setBreadCrumbsText:function(B,t){B.setCurrentLocationText(t);},getBreadObjectByName:function(t){var e;jQuery.each(f,function(i,g){if(g.name===t){e=g;}});return e;},getObjectListVariantText:function(A,t){var V=A.Values;var s;jQuery.each(V,function(i,e){if(e.ACTION===t&&e.TEXT){s=e.TEXT;}});if(t&&t.indexOf('mygroup')>-1&&s){return this._i18n.getResourceBundle().getText(s,[C.getGroupConfiguration().DISPLAY_LABEL]);}if(s){return this._i18n.getResourceBundle().getText(s);}return"";},setHistoricalTitle:function(V){var s=this.getModel("history").getProperty("/CurrentHash")?this.getModel("history").getProperty("/CurrentHash").hash:'';var h={detailTitle:V,hash:s};var H=this.getModel("historyDetail").getProperty("/HashList");H.unshift(h);this.getModel("historyDetail").setProperty("/HashList",H);}});});
