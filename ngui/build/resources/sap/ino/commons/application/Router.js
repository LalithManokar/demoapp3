/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
sap.ui.define(["sap/m/routing/Router","sap/ui/core/routing/History","sap/ui/core/mvc/ViewType"],function(R,H,V){"use strict";return R.extend("sap.ino.commons.application.Router",{_fnRoutingCallback:undefined,_fnCloseCallback:undefined,onNavBack:function(r){var t=this;var h=H.getInstance();var p=h.getPreviousHash();var g=function(){if(p!==undefined){window.history.go(-1);}else{t.navTo("home",undefined,r);}};if(this._fnRoutingCallback){this._fnRoutingCallback(g);}else{g();}},onDeleteNavBack:function(o,r){var h=H.getInstance()&&H.getInstance().aHistory;var i=h&&h.length;if(i>2&&h[i-3].indexOf(o)>-1){window.history.go(-2);}else if(i>1&&h[i-2].indexOf(o)>-1){window.history.go(-1);}else{this.navTo("home",undefined,r);}},getContext:function(){var h=H.getInstance();if(typeof h.iHistoryPosition==="number"){return h.aHistory[h.iHistoryPosition];}else{return undefined;}},navTo:function(r,d,n,N){var o=this;var a=arguments;var f=function(){R.prototype.navTo.apply(o,a);};var c=this.getContext();if(this._fnRoutingCallback){this._fnRoutingCallback(f,r,c);}else{f();}},parse:function(n){var r=this;var N=function(){R.prototype.parse.apply(r,[n]);};if(this._fnRoutingCallback){this._fnRoutingCallback(N);}else{N();}},setRoutingCallback:function(c){this._fnRoutingCallback=c;},setCloseCallback:function(c){if(this._fnCloseCallback){jQuery(window).off('beforeunload',this._fnCloseCallback);}this._fnCloseCallback=c;jQuery(window).on('beforeunload',this._fnCloseCallback);}});});
