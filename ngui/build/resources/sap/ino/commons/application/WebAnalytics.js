/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
jQuery.sap.declare("sap.ino.commons.application.WebAnalytics");sap.ui.define([],function(){"use strict";var S={campaignView:"CAMPAIGN",ideaView:"IDEA",wallView:"WALL"};sap.ino.commons.application.WebAnalytics={start:function(c){var t=c.isComponentActive('sap.ino.config.SWA_ACTIVE');if(!t){return;}var C=c.isComponentActive('sap.ino.config.SWA_CLICK_ACTIVE');var D=1;var a=c.getSystemSetting('sap.ino.config.SWA_DNT_LEVEL');if(a){D=parseInt(a,0);}var b=c.getSWABaseURL();var l=c.getSWATrackerURL();window.swa={pubToken:'HCO_INO',baseUrl:b,loggingUrl:l,dntLevel:D,bannerEnabled:false,loggingEnabled:t,clicksEnabled:false,pageLoadEnabled:true,customEventsEnabled:true,visitorCookieDuration:7776000000};var d=document,g=d.createElement('script'),s=d.getElementsByTagName('script')[0];g.type='text/javascript';g.defer=true;g.async=true;g.src=window.swa.baseUrl+'js/privacy.js';g.onload=function(){window.swa.trackLoad=function(){window.Matomo.getAsyncTracker().disableAlwaysUseSendBeacon();if((window.swa.loggingEnabled)&&(window.swa.pageLoadEnabled)&&(typeof window.Piwik!=="undefined")){window.Matomo.getAsyncTracker().trackPageView();}};};s.parentNode.insertBefore(g,s);},stop:function(){if(window.swa){window.swa.loggingEnabled=false;window.swa.disable();}},piwikPromise:function(){return new Promise(function(r,R){var c=0;window.Matomo.getAsyncTracker().disableAlwaysUseSendBeacon();var i=setInterval(function(){if(window.swa.trackCustomEvent&&window.Piwik){clearInterval(i);r();}c++;if(c>20){clearInterval(i);R();}},1000);});},logCampaignView:function(i){if(window.swa){sap.ino.commons.application.WebAnalytics.piwikPromise().then(function(){window.swa.trackCustomEvent(S.campaignView,i);},function(){throw"Event could not be logged: "+S.campaignView+" "+i;});}},logIdeaView:function(i){if(window.swa){sap.ino.commons.application.WebAnalytics.piwikPromise().then(function(){window.swa.trackCustomEvent(S.ideaView,i);},function(){throw"Event could not be logged: "+S.ideaView+" "+i;});}},logWallView:function(i){if(window.swa){sap.ino.commons.application.WebAnalytics.piwikPromise().then(function(){window.swa.trackCustomEvent(S.wallView,i);},function(){throw"Event could not be logged: "+S.wallView+" "+i;});}}};return sap.ino.commons.application.WebAnalytics;});
