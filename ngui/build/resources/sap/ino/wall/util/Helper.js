/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
jQuery.sap.declare("sap.ino.wall.util.Helper");(function(){"use strict";sap.ino.wall.util.Helper={getURLParameter:function(n,s,e){n=n.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var r=new RegExp("[\\?&]"+n+"=([^&#]*)"),a=r.exec(location.search);return(a===null?null:decodeURIComponent(a[1].replace(/\+/g," ")));},getErrorCodeFromServerResponse:function(j,s,e){var t=/<h1>([^<]*)<\/h1>/.exec(j.responseText),E;if(t&&t[1]){E=t[1].split(" - ")[1];return E;}},extractErrorCodeFromServerResponse:function(j,s,e){var E=this.getErrorCodeFromServerResponse(j,s,e),a="";if(/^[A-Z0-9\d_]+$/.test(E)){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ino.wall");a=r.getText("WALL_APP_ERROR_"+E);}else if(E){e+=" ("+E+")";}if(!a){a=s.toUpperCase()+": "+e;}return a;},randomMinMax:function(m,M){return Math.floor(Math.random()*(M-m+1)+m);},randomFromArray:function(a){if(a.length){return a[sap.ino.wall.util.Helper.randomMinMax(0,a.length-1)];}return null;},stringFormat:function(s){var a=Array.prototype.slice.call(arguments,1),r=/\{(\d+)\}/g,S=function(m,n){return n in a?a[n]:m;};return s.replace(r,S);},getTextSelection:function(){var t="";if(window.getSelection){t=window.getSelection().toString();}else if(document.selection&&document.selection.type!="Control"){t=document.selection.createRange().text;}return t;},getTextSelectionNode:function(){if(document.selection){return document.selection.createRange().parentElement();}else{var s=window.getSelection();if(s.rangeCount>0){return s.getRangeAt(0).startContainer.parentNode;}}},deselectAllText:function(){var s=(window.getSelection?window.getSelection():document.selection);if(s){if(s.removeAllRanges){s.removeAllRanges();}else if(s.empty){s.empty();}}},selectAllText:function(e){var r,s;if(document.body.createTextRange){r=document.body.createTextRange();r.moveToElementText(e);r.select();}else if(window.getSelection){s=window.getSelection();r=document.createRange();r.selectNodeContents(e);s.removeAllRanges();s.addRange(r);}},isScrolledIntoView:function($){var d=jQuery(window).scrollTop(),a=d+jQuery(window).height(),e=$.offset().top,b=e+$.height();return((b<=a)&&(e>=d));},showError:function(m,c,r){sap.ino.wall.util.Helper._showErrorByType(m,c,"Error",r);},showErrorUnexpected:function(m,c,r){sap.ino.wall.util.Helper._showErrorByType(m,c,"ErrorUnexpected",r);},showFatal:function(m,c,r){sap.ino.wall.util.Helper._showErrorByType(m,c,"Fatal",r);},showFatalUnexpected:function(m,c,r){sap.ino.wall.util.Helper._showErrorByType(m,c,"FatalUnexpected",r);},_showErrorByType:function(m,c,t,r){var T="",i=sap.m.MessageBox.Icon.ERROR;var R=sap.ui.getCore().getLibraryResourceBundle("sap.ino.wall");if(t===undefined){T=R.getText("WALL_APP_ERROR_EXPECTED");i=sap.ui.core.IconPool.getIconURI("alert");}else{switch(t){case"Error":T=R.getText("WALL_APP_ERROR_EXPECTED");i=sap.ui.core.IconPool.getIconURI("error");break;case"ErrorUnexpected":T=R.getText("WALL_APP_ERROR_UNEXPECTED");i=sap.ui.core.IconPool.getIconURI("error");break;case"Fatal":case"FatalUnexpected":T=R.getText("WALL_APP_FATAL_UNEXPECTED");i=sap.ui.core.IconPool.getIconURI("flag");break;default:break;}}return sap.m.MessageBox.show(m,{icon:i,title:T,onClose:c});},renderItemIntoContainer:function(d,i,D,I){var r;if(d){r=sap.ui.getCore().createRenderManager();r.renderControl(i);r.flush(d,D,I);r.destroy();}return this;},createRandomHexColor:function(){var c=Math.floor(Math.random()*16777215).toString(16);while(c.length<6){c="0"+c;}return"#"+c;},shadeColor:function(h,p){if(!h){return;}if(h.charAt("0")!="#"){h="#"+h;}if(h.length===4){h=h[0]+h[1]+h[1]+h[2]+h[2]+h[3]+h[3];}var n=parseInt(h.slice(1),16),a=Math.round(2.55*p),R=(n>>16)+a,G=(n>>8&0x00FF)+a,B=(n&0x0000FF)+a;return"#"+(0x1000000+(R<255?(R<1?0:R):255)*0x10000+(G<255?(G<1?0:G):255)*0x100+(B<255?(B<1?0:B):255)).toString(16).slice(1);},getColorLuminance:function(H){if(!H){return;}if(H.charAt("0")!="#"){H="#"+H;}var R,L=0.0,u,f;u=function(c){if(c.length===7){return[parseInt('0x'+c.substring(1,3),16)/255,parseInt('0x'+c.substring(3,5),16)/255,parseInt('0x'+c.substring(5,7),16)/255];}else if(c.length===4){return[parseInt('0x'+c.substring(1,2),16)/15,parseInt('0x'+c.substring(2,3),16)/15,parseInt('0x'+c.substring(3,4),16)/15];}};f=function(R){var m,a,d,h,s,l,r=R[0],g=R[1],b=R[2];m=Math.min(r,Math.min(g,b));a=Math.max(r,Math.max(g,b));d=a-m;l=(m+a)/2;s=0;if(l>0&&l<1){s=d/(l<0.5?(2*l):(2-2*l));}h=0;if(d>0){if(a===r&&a!==g){h+=(g-b)/d;}if(a===g&&a!==b){h+=(2+(b-r)/d);}if(a===b&&a!==r){h+=(4+(r-g)/d);}h/=6;}return[h,s,l];};R=u(H);if(R&&R.length){L=f(R)[2];}return L;},transparentColor:function(h,o){var r,g,b;if(!h){return;}h=h.replace('#','');r=parseInt(h.substring(0,2),16);g=parseInt(h.substring(2,4),16);b=parseInt(h.substring(4,6),16);return'rgba('+r+','+g+','+b+','+(o/100)+')';},addBrowserPrefix:function(s){if(sap.ui.Device.browser.webkit){return"-webkit-"+s;}else if(sap.ui.Device.browser.firefox){return"-moz-"+s;}else if(sap.ui.Device.browser.internet_explorer){return"-ms-"+s;}},stripTags:function(i,a,k){var t=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,c=/<!--[\s\S]*?-->/gi;a=(((a||'')+'').toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join('');if(!k){i=i.replace(/<p>/g,"<div>");i=i.replace(/<\/p>/g,"</div>");}return i.replace(c,'').replace(t,function($,b){return a.indexOf('<'+b.toLowerCase()+'>')>-1?$:'';});},getEventX:function(e){return e.originalEvent.pageX||((e.touches&&e.touches.length>0)?e.touches[0].pageX:undefined)||((e.changedTouches&&e.changedTouches.length>0)?e.changedTouches[0].pageX:undefined);},getEventY:function(e){return e.originalEvent.pageY||((e.touches&&e.touches.length>0)?e.touches[0].pageY:undefined)||((e.changedTouches&&e.changedTouches.length>0)?e.changedTouches[0].pageY:undefined);},getStandardImages:function(){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ino.wall");var s=[{file:"basket.jpg",preview:"basket_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_BASKET")},{file:"brick.jpg",preview:"brick_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_BRICK")},{file:"carpet.jpg",preview:"carpet_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_CARPET")},{file:"cork.jpg",preview:"cork_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_CORK")},{file:"dots_grey.jpg",preview:"dots_grey_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_DOTS_GREY")},{file:"dots_red.jpg",preview:"dots_red_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_DOTS_RED")},{file:"felt.jpg",preview:"felt_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_FELT")},{file:"flowers.jpg",preview:"flowers_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_FLOWERS")},{file:"gaze.jpg",preview:"gaze_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_GAZE")},{file:"graphpaper.jpg",preview:"graphpaper_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_GRAPHPAPER")},{file:"grass.jpg",preview:"grass_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_GRASS")},{file:"lined_paper.jpg",preview:"lined_paper_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_LINED_PAPER")},{file:"linen.jpg",preview:"linen_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_LINEN")},{file:"paper.jpg",preview:"paper_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_PAPER")},{file:"patchwork.jpg",preview:"patchwork_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_PATCHWORK")},{file:"squared_paper.jpg",preview:"squared_paper_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_SQUARED_PAPER")},{file:"stone.jpg",preview:"stone_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_STONE")},{file:"yellow_patchwork.jpg",preview:"yellow_patchwork_preview.jpg",name:r.getText("WALL_SETTING_BACKGROUND_STANDARD_IMG_YELLOW_PATCHWORK")}];return s;}};})();
