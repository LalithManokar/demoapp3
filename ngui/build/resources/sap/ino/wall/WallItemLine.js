/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
jQuery.sap.declare("sap.ino.wall.WallItemLine");(function(){"use strict";jQuery.sap.require("sap.ino.wall.WallItemBase");jQuery.sap.require("sap.ino.wall.util.Helper");jQuery.sap.require("sap.ino.wall.config.Config");jQuery.sap.require("sap.ino.wall.ColorPicker");sap.ino.wall.WallItemBase.extend("sap.ino.wall.WallItemLine",{metadata:{properties:{"orientation":{type:"string",group:"Misc",defaultValue:'HORIZONTAL'},"thickness":{type:"int",group:"Misc",defaultValue:4},"style":{type:"string",group:"Misc",defaultValue:'SOLID'},"color":{type:"string",group:"Misc",defaultValue:'#888888'}},aggregations:{"_selectOrientation":{type:"sap.m.Select",multiple:false,visibility:"hidden"},"_selectThickness":{type:"sap.m.Select",multiple:false,visibility:"hidden"},"_inputColor":{type:"sap.m.Input",multiple:false,visibility:"hidden"},"_buttonOrientationH":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_buttonOrientationV":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_buttonStyleSolid":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_buttonStyleDashed":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_buttonStyleDotted":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_buttonThickness1px":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_buttonThickness3px":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_buttonThickness5px":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_buttonColorSelector":{type:"sap.m.Button",multiple:false,visibility:"hidden"},"_colorPicker":{type:"sap.ino.wall.ColorPicker",multiple:false,visibility:"hidden"}}}});sap.ino.wall.WallItemLine.prototype.init=function(){sap.ino.wall.WallItemBase.prototype.init.call(this);this.setTitle(this._oRB.getText("WALL_ITEMLINE_STATUSMSG_ORIENTATION_HORIZONTAL"),true);};sap.ino.wall.WallItemLine.prototype.onAfterRendering=function(){var l=sap.ino.wall.util.Helper.getColorLuminance(this.getColor()),b=sap.ui.getCore().byId(this.getId()+"-buttonColorSelector");sap.ino.wall.WallItemBase.prototype.onAfterRendering.apply(this,arguments);if(b){b.$().find(".sapMBtnInner").css("background-color",this.getColor());}if(l<=0.6){this._getButtonColorSelector().addStyleClass("sapInoWallWILineColorSelectorButtonBright").removeStyleClass("sapInoWallWILineColorSelectorButtonNormal");}else{this._getButtonColorSelector().addStyleClass("sapInoWallWILineColorSelectorButtonNormal").removeStyleClass("sapInoWallWILineColorSelectorButtonBright");}};var w=sap.ino.wall.WallItemBase.prototype.setFlipped;sap.ino.wall.WallItemLine.prototype.setFlipped=function(f){var v;if(f&&this._isRendered()){v=this.getParent().getViewPoint();if(this.getOrientation()==="HORIZONTAL"){this.$().find(".sapInoWallWILineEditButtons").css("left",v.getX()-this.$().find(".sapInoWallWILineEditButtons").width()/2).css("top",-33-this.getThickness()/2);}else{this.$().find(".sapInoWallWILineEditButtons").css("left",-10).css("top",v.getY()-this.$().find(".sapInoWallWILineEditButtons").height()/2);}}if(this.getAggregation("_colorPicker")){this.getAggregation("_colorPicker").close();}w.apply(this,arguments);};sap.ino.wall.WallItemLine.prototype.setOrientation=function(o,s){var O=this.getOrientation(),z;this.setProperty("orientation",o,true);if(this._isRendered()&&O!==o){z=100/this.getParent().getZoom();if(O==="HORIZONTAL"){if(this._touchStartMousePositionX){if(!sap.ino.wall.config.Config.getZoomCapable()){this.setX(Math.abs((this.getParent().$("inner").offset().left-this._touchStartMousePositionX)*z)+"px");}else{this.setX(Math.abs(this.getParent().$("inner").offset().left-this._touchStartMousePositionX*z)+"px");}}else{this.setX(this.getY());}this.setY("0px");if(this._isRendered()){this.$().removeClass("sapInoWallWILineHORIZONTAL").addClass("sapInoWallWILineVERTICAL");this.$().find("#"+this.getId()+"-front").removeClass("sapInoWallWILineHORIZONTAL").addClass("sapInoWallWILineVERTICAL");this.$().find("#"+this.getId()+"-back").removeClass("sapInoWallWILineHORIZONTAL").addClass("sapInoWallWILineVERTICAL");this.$().find(".sapInoWallWILineFirst").css("border-right-style",this.getStyle().toLowerCase());this.$().find(".sapInoWallWILineFirst").css("border-bottom-style","none");var d=this.$().find(".sapInoWallWILineFirst").css("height");this.$().find(".sapInoWallWILineFirst").css("height","");this.$().find(".sapInoWallWILineFirst").css("width",d);this.$().find(".sapInoWallWILineSecond").css("height","");this.$().find(".sapInoWallWILineSecond").css("width",d);}}else if(O==="VERTICAL"){if(this._touchStartMousePositionY){if(!sap.ino.wall.config.Config.getZoomCapable()){this.setY(Math.abs((this.getParent().$("inner").offset().top-this._touchStartMousePositionY)*z)+"px");}else{this.setY(Math.abs(this.getParent().$("inner").offset().top-this._touchStartMousePositionY*z)+"px");}}else{this.setY(this.getX());}this.setX("0px");if(this._isRendered()){this.$().removeClass("sapInoWallWILineVERTICAL").addClass("sapInoWallWILineHORIZONTAL");this.$().find("#"+this.getId()+"-front").removeClass("sapInoWallWILineVERTICAL").addClass("sapInoWallWILineHORIZONTAL");this.$().find("#"+this.getId()+"-back").removeClass("sapInoWallWILineVERTICAL").addClass("sapInoWallWILineHORIZONTAL");this.$().find(".sapInoWallWILineFirst").css("border-right-style","none");this.$().find(".sapInoWallWILineFirst").css("border-bottom-style",this.getStyle().toLowerCase());var d=this.$().find(".sapInoWallWILineFirst").css("width");this.$().find(".sapInoWallWILineFirst").css("width","");this.$().find(".sapInoWallWILineFirst").css("height",d);this.$().find(".sapInoWallWILineSecond").css("width","");this.$().find(".sapInoWallWILineSecond").css("height",d);}}if(this.$().hasClass("flipped")){this.setFlipped(true);}this.setTitle(this._oRB.getText("WALL_ITEMLINE_STATUSMSG_ORIENTATION_"+o.toUpperCase()),true);sap.ui.getCore().byId(this.getId()+"-buttonOrientation"+(o==="HORIZONTAL"?"V":"H")).setPressed(false);sap.ui.getCore().byId(this.getId()+"-buttonOrientation"+(o==="HORIZONTAL"?"H":"V")).setPressed(true);}if(this.getParent()&&!s){this.getParent()._notifyItemChanged(this);}};sap.ino.wall.WallItemLine.prototype.setStyle=function(s,S){this.setProperty("style",s,true);if(this._isRendered()){this.$().find(".sapInoWallWILineFirst").css("border-"+(this.getOrientation()==="HORIZONTAL"?"bottom":"right")+"-style",s.toLowerCase());}if(this.getParent()&&!S){this.getParent()._notifyItemChanged(this);}};sap.ino.wall.WallItemLine.prototype.setThickness=function(t,s){var o=this.getThickness(),$=this.$().find(".sapInoWallWILineEditButtons");this.setProperty("thickness",t,true);if(this._isRendered()&&o!==t){var d=13-parseInt(t/2);var D=(this.getOrientation()==="VERTICAL")?"width":"height";this.$().find(".sapInoWallWILineFirst").css("border-width",t);this.$().find(".sapInoWallWILineFirst").css(D,d);this.$().find(".sapInoWallWILineSecond").css(D,d);}if(this.getParent()&&!s){this.getParent()._notifyItemChanged(this);}};sap.ino.wall.WallItemLine.prototype.setColor=function(c,s){var l;var b=this._getButtonColorSelector();this.setProperty("color",c,true);if(this._isRendered()){this.$().find(".sapInoWallWILineFirst").css("border-color",c);if(b){sap.ui.getCore().byId(this.getId()+"-buttonColorSelector").$().find(".sapMBtnInner").css("background-color",this.getColor());}l=sap.ino.wall.util.Helper.getColorLuminance(c);if(l<=0.6){this._getButtonColorSelector().addStyleClass("sapInoWallWILineColorSelectorButtonBright").removeStyleClass("sapInoWallWILineColorSelectorButtonNormal");}else{this._getButtonColorSelector().addStyleClass("sapInoWallWILineColorSelectorButtonNormal").removeStyleClass("sapInoWallWILineColorSelectorButtonBright");}}if(this.getParent()&&!s){this.getParent()._notifyItemChanged(this);}};sap.ino.wall.WallItemLine.prototype._getButtonOrientationH=function(){var t=this,c=this.getAggregation("_buttonOrientationH");if(!c){c=new sap.m.ToggleButton(this.getId()+"-buttonOrientationH",{tooltip:this._oRB.getText("WALL_ITEMLINE_STATUSMSG_ORIENTATION_HORIZONTAL"),press:function(e){t.setOrientation("HORIZONTAL");sap.ui.getCore().byId(t.getId()+"-buttonOrientationH").setPressed(true);sap.ui.getCore().byId(t.getId()+"-buttonOrientationV").setPressed(false);}}).addStyleClass("noflip").addStyleClass("sapInoWallWILineButton").addStyleClass("sapInoWallWILineButtonHORIZONTAL");if(this.getOrientation()==="HORIZONTAL"){c.setPressed(true);}this.setAggregation("_buttonOrientationH",c,true);}return c;};sap.ino.wall.WallItemLine.prototype._getButtonOrientationV=function(){var t=this,c=this.getAggregation("_buttonOrientationV");if(!c){c=new sap.m.ToggleButton(this.getId()+"-buttonOrientationV",{tooltip:this._oRB.getText("WALL_ITEMLINE_STATUSMSG_ORIENTATION_VERTICAL"),press:function(e){t.setOrientation("VERTICAL");sap.ui.getCore().byId(t.getId()+"-buttonOrientationH").setPressed(false);sap.ui.getCore().byId(t.getId()+"-buttonOrientationV").setPressed(true);}}).addStyleClass("noflip").addStyleClass("sapInoWallWILineButton").addStyleClass("sapInoWallWILineButtonEnd").addStyleClass("sapInoWallWILineButtonVERTICAL");if(this.getOrientation()==="VERTICAL"){c.setPressed(true);}this.setAggregation("_buttonOrientationV",c,true);}return c;};sap.ino.wall.WallItemLine.prototype._getButtonStyleSolid=function(){var t=this,c=this.getAggregation("_buttonStyleSolid");if(!c){c=new sap.m.ToggleButton(this.getId()+"-buttonStyleSolid",{tooltip:this._oRB.getText("WALL_ITEMLINE_STATUSMSG_STYLE_SOLID"),press:function(e){t.setStyle("SOLID");sap.ui.getCore().byId(t.getId()+"-buttonStyleSolid").setPressed(true);sap.ui.getCore().byId(t.getId()+"-buttonStyleDashed").setPressed(false);sap.ui.getCore().byId(t.getId()+"-buttonStyleDotted").setPressed(false);}}).addStyleClass("noflip").addStyleClass("sapInoWallWILineButton").addStyleClass("sapInoWallWILineButtonSOLID");if(this.getStyle()==="SOLID"){c.setPressed(true);}this.setAggregation("_buttonStyleSolid",c,true);}return c;};sap.ino.wall.WallItemLine.prototype._getButtonStyleDashed=function(){var t=this,c=this.getAggregation("_buttonStyleDashed");if(!c){c=new sap.m.ToggleButton(this.getId()+"-buttonStyleDashed",{tooltip:this._oRB.getText("WALL_ITEMLINE_STATUSMSG_STYLE_DASHED"),press:function(e){t.setStyle("DASHED");sap.ui.getCore().byId(t.getId()+"-buttonStyleSolid").setPressed(false);sap.ui.getCore().byId(t.getId()+"-buttonStyleDashed").setPressed(true);sap.ui.getCore().byId(t.getId()+"-buttonStyleDotted").setPressed(false);}}).addStyleClass("noflip").addStyleClass("sapInoWallWILineButton").addStyleClass("sapInoWallWILineButtonDASHED");if(this.getStyle()==="DASHED"){c.setPressed(true);}this.setAggregation("_buttonStyleDashed",c,true);}return c;};sap.ino.wall.WallItemLine.prototype._getButtonStyleDotted=function(){var t=this,c=this.getAggregation("_buttonStyleDotted");if(!c){c=new sap.m.ToggleButton(this.getId()+"-buttonStyleDotted",{tooltip:this._oRB.getText("WALL_ITEMLINE_STATUSMSG_STYLE_DOTTED"),press:function(e){t.setStyle("DOTTED");sap.ui.getCore().byId(t.getId()+"-buttonStyleSolid").setPressed(false);sap.ui.getCore().byId(t.getId()+"-buttonStyleDashed").setPressed(false);sap.ui.getCore().byId(t.getId()+"-buttonStyleDotted").setPressed(true);}}).addStyleClass("noflip").addStyleClass("sapInoWallWILineButton").addStyleClass("sapInoWallWILineButtonEnd").addStyleClass("sapInoWallWILineButtonDOTTED");if(this.getStyle()==="DOTTED"){c.setPressed(true);}this.setAggregation("_buttonStyleDotted",c,true);}return c;};sap.ino.wall.WallItemLine.prototype._getButtonThickness1px=function(){var t=this,c=this.getAggregation("_buttonThickness1px");if(!c){c=new sap.m.ToggleButton(this.getId()+"-buttonThickness1px",{tooltip:this._oRB.getText("WALL_ITEMLINE_STATUSMSG_THICKNESS_1"),press:function(e){t.setThickness(2);sap.ui.getCore().byId(t.getId()+"-buttonThickness1px").setPressed(true);sap.ui.getCore().byId(t.getId()+"-buttonThickness3px").setPressed(false);sap.ui.getCore().byId(t.getId()+"-buttonThickness5px").setPressed(false);}}).addStyleClass("noflip").addStyleClass("sapInoWallWILineButton").addStyleClass("sapInoWallWILineButtonThin");if(this.getThickness()===2){c.setPressed(true);}this.setAggregation("_buttonThickness1px",c,true);}return c;};sap.ino.wall.WallItemLine.prototype._getButtonThickness3px=function(){var t=this,c=this.getAggregation("_buttonThickness3px");if(!c){c=new sap.m.ToggleButton(this.getId()+"-buttonThickness3px",{tooltip:this._oRB.getText("WALL_ITEMLINE_STATUSMSG_THICKNESS_3"),press:function(e){t.setThickness(4);sap.ui.getCore().byId(t.getId()+"-buttonThickness1px").setPressed(false);sap.ui.getCore().byId(t.getId()+"-buttonThickness3px").setPressed(true);sap.ui.getCore().byId(t.getId()+"-buttonThickness5px").setPressed(false);}}).addStyleClass("noflip").addStyleClass("sapInoWallWILineButton").addStyleClass("sapInoWallWILineButtonMedium");if(this.getThickness()===4){c.setPressed(true);}this.setAggregation("_buttonThickness3px",c,true);}return c;};sap.ino.wall.WallItemLine.prototype._getButtonThickness5px=function(){var t=this,c=this.getAggregation("_buttonThickness5px");if(!c){c=new sap.m.ToggleButton(this.getId()+"-buttonThickness5px",{tooltip:this._oRB.getText("WALL_ITEMLINE_STATUSMSG_THICKNESS_5"),press:function(e){t.setThickness(6);sap.ui.getCore().byId(t.getId()+"-buttonThickness1px").setPressed(false);sap.ui.getCore().byId(t.getId()+"-buttonThickness3px").setPressed(false);sap.ui.getCore().byId(t.getId()+"-buttonThickness5px").setPressed(true);}}).addStyleClass("noflip").addStyleClass("sapInoWallWILineButton").addStyleClass("sapInoWallWILineButtonEnd").addStyleClass("sapInoWallWILineButtonThick");if(this.getThickness()===6){c.setPressed(true);}this.setAggregation("_buttonThickness5px",c,true);}return c;};sap.ino.wall.WallItemLine.prototype._getColorPicker=function(){var t=this,c=this.getAggregation("_colorPicker");if(!c){c=new sap.ino.wall.ColorPicker(this.getId()+"-colorPicker",{color:this.getColor(),change:function(e){t.setColor(e.getParameter("color"));}});c.setPlacement(sap.m.PlacementType.Vertical);this.setAggregation("_colorPicker",c,true);}return c;};sap.ino.wall.WallItemLine.prototype._getButtonColorSelector=function(){var t=this,c=this.getAggregation("_buttonColorSelector");if(!c){c=new sap.m.Button(this.getId()+"-buttonColorSelector",{tooltip:this._oRB.getText("WALL_ITEMLINE_STATUSMSG_COLOR_SELECT"),press:function(e){var C=t._getColorPicker();C.setPlacement(t.getOrientation()==="HORIZONTAL"?sap.m.PlacementType.Vertical:sap.m.PlacementType.Horizontal);if(C.isOpen()){C.close();}else{C.openBy(c,40,40);}},icon:"sap-icon://palette"}).addStyleClass("noflip").addStyleClass("sapInoWallWILineColorSelectorButton").addStyleClass("sapInoWallWILineButton").addStyleClass("sapInoWallWILineButtonEnd").addStyleClass("sapInoWallWILineColorSelectorButtonNormal");this.setAggregation("_buttonColorSelector",c,true);}return c;};sap.ino.wall.WallItemLine.prototype.formatToJSON=function(){var j=sap.ino.wall.WallItemBase.prototype.formatToJSON.call(this);j.orientation=this.getOrientation();j.thickness=this.getThickness();j.style=this.getStyle();j.color=this.getColor();return j;};})();
