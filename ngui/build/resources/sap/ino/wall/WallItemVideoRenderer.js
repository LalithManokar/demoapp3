/*!
 * SAP Innovation Management (c) Copyright 2014 SAP AG. All rights reserved.
 */
jQuery.sap.declare("sap.ino.wall.WallItemVideoRenderer");(function(){"use strict";jQuery.sap.require("sap.ino.wall.WallItemBaseRenderer");jQuery.sap.require("sap.ui.core.IconPool");jQuery.sap.require("sap.ino.wall.config.Config");sap.ino.wall.WallItemVideoRenderer=sap.ui.core.Renderer.extend(sap.ino.wall.WallItemBaseRenderer);sap.ino.wall.WallItemVideoRenderer.renderItem=function(r,c){var i,b=c._getBusyIndicator(),p=c._getImagePreview();r.write("<div class=\"flippable sapInoWallWIVideo\">");r.write("<div id="+c.getId()+"-front");r.addClass("sapInoWallWIV");r.addClass("gradients");r.addClass("front");r.writeClasses();r.write(">");r.write("<div id="+c.getId()+"-frontOuterOuter");r.addClass("sapInoWallWIVOuterOuter");r.writeClasses();r.write(">");r.write("<div id="+c.getId()+"-frontOuter");r.addClass("sapInoWallWIVOuter");r.writeClasses();r.write(">");r.write("<div id="+c.getId()+"-frontInner");r.addClass("sapInoWallWIVInner");r.writeClasses();r.write(">");if(c.getStatus()==="Busy"){p.addStyleClass("sapInoWallImageBusy");}r.write('<div id="'+c.getId()+'-imagePreviewWrapper" style="min-height: 117px">');if(p){r.renderControl(p.addStyleClass("noflip").attachTap(function(e){var v=null,s;if(c._bMoving){return;}s=new sap.m.SegmentedButton({width:"100%",buttons:[new sap.m.Button(c.getId()+"-buttonS",{icon:"sap-icon://play",width:"25%",text:"S"}),new sap.m.Button(c.getId()+"-buttonM",{icon:"sap-icon://play",width:"25%",text:"M"}),new sap.m.Button(c.getId()+"-buttonL",{icon:"sap-icon://play",width:"25%",text:"L"}),new sap.m.Button(c.getId()+"-buttonFS",{icon:"sap-icon://full-screen",width:"25%",text:"FS"})],select:function(e){var a=e.getParameter('id');if(a===c.getId()+"-buttonS"){v.setStretch(false);v.$().find("iframe").attr("width","320").attr("height","240");}else if(a===c.getId()+"-buttonM"){v.setStretch(false);v.$().find("iframe").attr("width","640").attr("height","390");}else if(a===c.getId()+"-buttonL"){v.setStretch(false);v.$().find("iframe").attr("width","845").attr("height","480");}else if(a===c.getId()+"-buttonFS"){v.setStretch(true);setTimeout(function(){v.$().find("iframe").attr("width","100%").attr("height",v.$().find(".sapMDialogScroll").height());},0);}}}).addStyleClass("sapInoWallWIVSizes");s.setSelectedButton(s.getButtons()[1]);s._fCalcBtnWidth=function(){};v=new sap.m.Dialog({stretch:sap.ui.Device.system.phone,horizontalScrolling:false,verticalScrolling:false,afterOpen:function(){if(sap.ui.Device.system.phone){v.$().find("iframe").attr("width","100%").attr("height",v.$().find(".sapMDialogSection").height());}},customHeader:new sap.m.Bar({contentLeft:[sap.ui.core.IconPool.createControlByURI({src:"sap-icon://video"},sap.m.Image).addStyleClass("sapInoWallWIVDialogIcon"),new sap.m.Label({text:c.getTitle(),}).addStyleClass("sapInoWallWIVDialog")],contentRight:new sap.m.Button({icon:"sap-icon://decline",press:function(){v.close();v.destroy();v=null;s.destroy();s=null;}})}),}).addStyleClass("sapInoWallWIVDialog");if(!sap.ui.Device.system.phone){v.setHorizontalScrolling(true);v.setVerticalScrolling(true);v.setSubHeader(new sap.m.Bar({contentLeft:[s]}));}if(/youtu\.be/.test(c.getVideo())){var V=/youtu\.be\/(.*)/.exec(c.getVideo())[1];v.addContent(new sap.ui.core.HTML({content:'<iframe width="640" height="390" id="'+c.getId()+'-video" src="https://www.youtube.com/embed/'+V+'" frameborder="0" allowfullscreen></iframe>',sanitizeContent:true}));}else if(/www\.youtube\.com/.test(c.getVideo())){var V=/www.youtube.com\/watch\?v=(.*)/.exec(c.getVideo())[1];v.addContent(new sap.ui.core.HTML({content:'<iframe width="640" height="390" id="'+c.getId()+'-video" src="https://www.youtube.com/embed/'+V+'" frameborder="0" allowfullscreen></iframe>',sanitizeContent:true}));}else{v.destroy();return false;}v.open();}));}r.write("</div>");if(c.getStatus()!=="Busy"){b.addStyleClass("sapInoWallInvisible");}r.renderControl(b);if(!sap.ino.wall.config.Config.getDebugPositioning()){r.write("<div class=\"sapInoWallWITitle sapInoWallWITitleText\">");r.writeEscaped(c.getTitle());r.write("</div>");}else{r.write("front");}r.write("</div>");r.write("</div>");r.write("</div>");r.write("</div>");r.write("<div id="+c.getId()+"-back");r.addClass("sapInoWallWIV");r.addClass("gradients");r.addClass("back");r.writeClasses();r.write(">");r.write("<div id="+c.getId()+"-frontOuter");r.addClass("sapInoWallWIVOuter");r.writeClasses();r.write(">");r.write("<div id="+c.getId()+"-frontInner");r.addClass("sapInoWallWIVInner");r.writeClasses();r.write(">");if(!sap.ino.wall.config.Config.getDebugPositioning()){r.write("<div class=\"sapInoWallWITitleEdit\">");i=c._getInputTitle().setProperty("placeholder",c._oRB.getText("WALL_ITEMVIDEO_PLACEHOLDER_TITLE"),true);r.renderControl(i);r.write("</div>");r.write("<div class=\"sapInoWallWIVVideoEdit\">");r.renderControl(c._getInputVideo());r.write("</div>");r.write("<div class=\"sapInoWallWIVEdithint\">");r.write(c._oRB.getText("WALL_ITEMVIDEO_EDITHINT"));r.write("</div>");}else{r.write("back");}r.write("</div>");r.write("</div>");r.write("</div>");r.renderControl(c._getButtonFlip());r.write("</div>");};})();
