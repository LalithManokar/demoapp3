/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/library","sap/ui/base/ManagedObject","sap/m/Table","sap/f/cards/BaseContent","sap/m/Column","sap/m/ColumnListItem","sap/m/Text","sap/m/Link","sap/m/ProgressIndicator","sap/m/ObjectIdentifier","sap/m/ObjectStatus","sap/f/Avatar","sap/ui/core/library","sap/m/library","sap/f/cards/BindingResolver","sap/f/cards/BindingHelper","sap/f/cards/IconFormatter","sap/ui/util/openWindow"],function(l,M,R,B,C,a,T,L,P,O,b,A,c,m,d,e,I,o){"use strict";var f=l.AvatarSize;var V=c.VerticalAlign;var g=m.ListSeparators;var h=m.ListType;var i=l.cards.AreaType;var k=B.extend("sap.f.cards.TableContent",{renderer:{}});k.prototype.exit=function(){B.prototype.exit.apply(this,arguments);if(this._oItemTemplate){this._oItemTemplate.destroy();this._oItemTemplate=null;}};k.prototype._getTable=function(){if(this._bIsBeingDestroyed){return null;}var t=this.getAggregation("_content");if(!t){t=new R({id:this.getId()+"-Table",showSeparators:g.None});this.setAggregation("_content",t);}return t;};k.prototype.setConfiguration=function(j){B.prototype.setConfiguration.apply(this,arguments);if(!j){return this;}if(j.rows&&j.columns){this._setStaticColumns(j.rows,j.columns);return this;}if(j.row&&j.row.columns){this._setColumns(j.row);}return this;};k.prototype._setColumns=function(r){var j=[],t=this._getTable(),n=r.columns;n.forEach(function(q){this._getTable().addColumn(new C({header:new T({text:q.title}),width:q.width}));j.push(this._createCell(q));}.bind(this));this._oItemTemplate=new a({cells:j,vAlign:V.Middle});this._oActions.setAreaType(i.ContentItem);this._oActions.attach(r,this);var p={template:this._oItemTemplate};this._bindAggregation("items",t,p);};k.prototype._setStaticColumns=function(r,n){var t=this._getTable();n.forEach(function(j){t.addColumn(new C({header:new T({text:j.title}),width:j.width}));});r.forEach(function(p){var q=new a({vAlign:V.Middle});if(p.cells&&Array.isArray(p.cells)){for(var j=0;j<p.cells.length;j++){q.addCell(this._createCell(p.cells[j]));}}if(p.actions&&Array.isArray(p.actions)){var s=p.actions[0];if(s.type===h.Navigation){q.setType(h.Navigation);}if(s.url){q.attachPress(function(){o(s.url,s.target||"_blank");});}}t.addItem(q);}.bind(this));this.fireEvent("_actionContentReady");};k.prototype._createCell=function(j){if(j.url){return new L({text:j.value,href:j.url,target:j.target||"_blank"});}if(j.identifier){var n=new O({title:j.value});if(j.identifier.url){var p=M.bindingParser(j.identifier.url);if(p){p.formatter=function(v){if(typeof v==="string"){return true;}return false;};n.bindProperty("titleActive",p);}else{n.setTitleActive(!!j.identifier.url);}n.attachTitlePress(function(E){var s=E.getSource(),r=s.getBindingContext(),t=s.getModel(),u,U,v;if(r){u=r.getPath();}U=d.resolveValue(j.identifier.url,t,u);v=d.resolveValue(j.identifier.target,t,u);if(U){o(U,v||"_blank");}});}return n;}if(j.state){return new b({text:j.value,state:j.state});}if(j.value){return new T({text:j.value});}if(j.icon){var q=new A({displayShape:j.icon.shape,displaySize:f.XS});e.bindProperty(q,"src",j.icon.src,function(v){return I.formatSrc(v,this._sAppId);}.bind(this));return q;}if(j.progressIndicator){return new P({percentValue:j.progressIndicator.percent,displayValue:j.progressIndicator.text,state:j.progressIndicator.state});}};k.prototype.getInnerList=function(){return this._getTable();};return k;});
