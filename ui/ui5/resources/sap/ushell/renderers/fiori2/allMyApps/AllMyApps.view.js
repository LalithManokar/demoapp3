// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/Device","sap/m/BusyIndicator","sap/m/SplitApp","sap/m/Label","sap/m/Link","sap/m/Text","sap/m/Page","sap/m/StandardListItem","sap/m/CustomListItem","sap/m/List","sap/m/VBox","sap/m/Bar","sap/m/ScrollContainer","sap/m/library","sap/ui/core/library","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources","sap/ushell/Config"],function(D,B,S,L,a,T,P,b,C,c,V,d,f,m,g,A,r,h){"use strict";var i=m.BarDesign,j=m.ListMode,k=m.ListType,l=m.SplitAppMode,n=g.TextAlign;sap.ui.jsview("sap.ushell.renderers.fiori2.allMyApps.AllMyApps",{createContent:function(o){this.oMasterBusyIndicator=new B("allMyAppsMasterBusyIndicator",{size:"1rem"}).addStyleClass("sapUshellAllMyAppsBusyIndicator");this.oDetailBusyIndicator=new B("allMyAppsDetailBusyIndicator",{size:"1rem"}).addStyleClass("sapUshellAllMyAppsBusyIndicator");this.oSplitApp=new S("sapUshellAllMyAppsMasterDetail",{masterPages:[this.oMasterBusyIndicator,this.getMasterPartContent(o)],detailPages:[this.oDetailBusyIndicator,this.getEmptyDetailsContent(),this.getDetailsPartContent(o)],mode:{path:"/isPhoneWidth",formatter:function(I){return I?l.ShowHideMode:l.StretchCompressMode;}}}).addStyleClass("sapUshellAllMyAppsView");this.bAfterOpenHandlerCalled=false;return this.oSplitApp;},getEmptyDetailsContent:function(){var t,e;t=new L({text:r.i18n.getText("AllMyAppsEmptyText"),textAlign:n.Center}).addStyleClass("sapUshellAllMyAppsEmptyDetailsPageText");e=new P("sapUshellAllMyAppsEmptyDetailsPage",{content:[t],showHeader:false,enableScrolling:false});return e;},getMasterPartContent:function(o){var e;if(!this.oDataSourceList){this.oDataSourceListTemplate=new b({type:{parts:["allMyAppsModel>type","/allMyAppsMasterLevel"],formatter:function(t,p){var s=D.system.phone||((p===this.getController().oStateEnum.FIRST_LEVEL)&&(t!==sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG));return s?k.Navigation:k.Active;}.bind(this)},title:"{allMyAppsModel>title}"});this._addCustomData(this.oDataSourceListTemplate,"aria-controls","sapUshellAllMyAppsDetailsPage");this.oDataSourceList=new c("sapUshellAllMyAppsDataSourcesList",{tooltip:"{i18n>catalogSelect_tooltip}",rememberSelections:true,mode:D.system.phone?j.None:j.SingleSelectMaster,items:{path:"allMyAppsModel>/AppsData",template:this.oDataSourceListTemplate},growingThreshold:100,showNoData:false,itemPress:[o.handleMasterListItemPress,o]});this._addCustomData(this.oDataSourceList,"role","navigation");}e=new P("sapUshellAllMyAppsMasterPage",{showHeader:false});e.addContent(this.oDataSourceList);return e;},getDetailsPartContent:function(o){var p=new V(),t=new L({text:"{allMyAppsModel>title}",tooltip:"{allMyAppsModel>title}"}),s=new L({text:"{allMyAppsModel>subTitle}",tooltip:"{allMyAppsModel>subTitle}",visible:{parts:["allMyAppsModel>subTitle"],formatter:function(e){return!!e;}}}),I,q,u;t.addStyleClass("sapUshellAllMyAppsItemTitle");s.addStyleClass("sapUshellAllMyAppsItemSubTitle");p.addItem(t);p.addItem(s);I=new C({content:p,type:k.Active,press:function(){o.onAppItemClick(this);}});I.addStyleClass("sapUshellAllMyAppsListItem");I.addEventDelegate({onsapenter:function(e){o.onAppItemClick(e.srcControl);},onsapspace:function(e){o.onAppItemClick(e.srcControl);}});this.oDetailsHeaderLabel=new L("sapUshellAllMyAppsDetailsHeaderLabel",{});q=new d("sapUshellDetailsPageHeaderBar",{contentLeft:this.oDetailsHeaderLabel,contentRight:[],contentMiddle:[],design:i.Header});this.oItemsContainerlist=new c("oItemsContainerlist",{items:{path:"allMyAppsModel>apps",template:I}});this.oItemsContainer=new f("allMyAppsScrollContainer",{horizontal:false,vertical:true,content:this.oItemsContainerlist}).addStyleClass("sapUshellAllMyAppsDetailsItemContainer");var v=[];this.oCustomLabel=new T({text:{path:"allMyAppsModel>sCustomLabel"}});v.push(this.oCustomLabel);if(h.last("/core/shell/enablePersonalization")){this.oCustomLink=new a({text:{path:"allMyAppsModel>sCustomLink"},press:function(e){o.handleGroupPress(e);}});v.push(this.oCustomLink);}this.oCustomPanel=new V({visible:{parts:[{path:"allMyAppsModel>numberCustomTiles"}],formatter:function(e){return!!e;}},items:v});this.oCustomPanel.addStyleClass("sapUshellAllMyAppsCustomPanel");u=new P("sapUshellAllMyAppsDetailsPage",{content:[q,this.oItemsContainer,this.oCustomPanel],showHeader:false,enableScrolling:true});this._addCustomData(u,"role","applications");return u;},_afterOpen:function(){if(!this.bAfterOpenHandlerCalled){this.bAfterOpenHandlerCalled=true;if(D.system.desktop){this.getController().initKeyBoardNavigationHandling();}}},_addCustomData:function(I,K,v){I.addCustomData(new A({key:K,value:v,writeToDom:true}));},getControllerName:function(){return"sap.ushell.renderers.fiori2.allMyApps.AllMyApps";}});});
