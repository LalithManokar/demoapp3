schema = "SAP_INO";
query = 
"
select idea.id as idea_id, idea.campaign_id, role_camp.identity_id, 'CAMPAIGN' as origin
from \"sap.ino.db.idea::t_idea\" as idea 
left outer join \"sap.ino.db.subresponsibility::t_responsibility_value_stage\" as resp_value
    on resp_value.code = idea.resp_value_code
inner join \"sap.ino.db.iam::v_object_identity_role_transitive\" as role_camp
    on  (role_camp.object_id = idea.campaign_id and
        role_camp.object_type_code = 'CAMPAIGN')
        or (role_camp.object_id = resp_value.id and role_camp.object_type_code = 'RESPONSIBILITY')
inner join \"sap.ino.db.iam::t_role_privilege\" as role_privilege
    on  role_privilege.role_code = role_camp.role_code
inner join \"sap.ino.db.campaign::t_campaign_phase\" as campaign_phase
                on  campaign_phase.campaign_id = idea.campaign_id and
                    campaign_phase.phase_code = idea.phase_code
where role_privilege.privilege = 'CAMP_EVAL_CREATE' and campaign_phase.evaluation_model_code is not null

union all 

select idea.id as idea_id, idea.campaign_id, role_idea.identity_id, 'IDEA' as origin 
from \"sap.ino.db.idea::t_idea\" as idea 
inner join \"sap.ino.db.iam::v_object_identity_role_transitive\" as role_idea
    on  role_idea.object_id = idea.id and
        role_idea.object_type_code = 'IDEA'
inner join \"sap.ino.db.iam::t_role_privilege\" as role_privilege
    on  role_privilege.role_code = role_idea.role_code
inner join \"sap.ino.db.campaign::t_campaign_phase\" as campaign_phase
                on  campaign_phase.campaign_id = idea.campaign_id and
                    campaign_phase.phase_code = idea.phase_code
where role_privilege.privilege = 'IDEA_EVAL_CREATE' and campaign_phase.evaluation_model_code is not null

with read only";

depends_on_table = ["sap.ino.db.idea::t_idea",
                    "sap.ino.db.campaign::t_campaign_phase",
                    "sap.ino.db.iam::t_role_privilege",
                    "sap.ino.db.subresponsibility::t_responsibility_value_stage"];

depends_on_view = ["sap.ino.db.iam::v_object_identity_role_transitive"];